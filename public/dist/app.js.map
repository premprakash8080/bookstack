{
  "version": 3,
  "sources": ["../../resources/js/services/events.ts", "../../resources/js/services/http.ts", "../../resources/js/services/translations.ts", "../../resources/js/components/index.ts", "../../resources/js/services/dom.ts", "../../resources/js/services/util.ts", "../../resources/js/components/component.js", "../../resources/js/components/add-remove-rows.js", "../../resources/js/components/ajax-delete-row.js", "../../resources/js/components/ajax-form.js", "../../resources/js/components/attachments.js", "../../resources/js/components/attachments-list.js", "../../resources/js/services/keyboard-navigation.ts", "../../resources/js/components/auto-suggest.js", "../../resources/js/components/auto-submit.js", "../../resources/js/components/back-to-top.js", "../../node_modules/sortablejs/modular/sortable.esm.js", "../../resources/js/components/book-sort.js", "../../resources/js/services/animations.ts", "../../resources/js/components/chapter-contents.js", "../../resources/js/components/code-editor.js", "../../resources/js/components/code-highlighter.js", "../../resources/js/components/code-textarea.js", "../../resources/js/components/collapsible.js", "../../resources/js/components/confirm-dialog.js", "../../resources/js/components/custom-checkbox.js", "../../resources/js/components/details-highlighter.js", "../../resources/js/components/dropdown.js", "../../resources/js/components/dropdown-search.js", "../../resources/js/services/clipboard.ts", "../../resources/js/components/dropzone.js", "../../resources/js/components/editor-toolbox.js", "../../resources/js/components/entity-permissions.js", "../../resources/js/components/entity-search.js", "../../resources/js/components/entity-selector.js", "../../resources/js/components/entity-selector-popup.js", "../../resources/js/components/event-emit-select.js", "../../resources/js/components/expand-toggle.js", "../../resources/js/components/global-search.js", "../../resources/js/components/header-mobile-toggle.js", "../../resources/js/components/image-manager.js", "../../resources/js/components/image-picker.js", "../../resources/js/components/list-sort-control.js", "../../resources/js/wysiwyg/utils/dom.ts", "../../resources/js/components/loading-button.ts", "../../resources/js/components/markdown-editor.js", "../../resources/js/components/new-user-password.js", "../../resources/js/components/notification.js", "../../resources/js/components/optional-input.js", "../../resources/js/wysiwyg-tinymce/shortcuts.js", "../../resources/js/wysiwyg-tinymce/common-events.js", "../../resources/js/wysiwyg-tinymce/scrolling.js", "../../resources/js/wysiwyg-tinymce/drop-paste-handling.js", "../../resources/js/wysiwyg-tinymce/toolbars.js", "../../resources/js/wysiwyg-tinymce/icons.js", "../../resources/js/wysiwyg-tinymce/filters.js", "../../resources/js/wysiwyg-tinymce/plugin-codeeditor.js", "../../node_modules/idb-keyval/dist/index.js", "../../resources/js/services/drawio.ts", "../../resources/js/wysiwyg-tinymce/plugin-drawio.js", "../../resources/js/wysiwyg-tinymce/plugins-customhr.js", "../../resources/js/wysiwyg-tinymce/plugins-imagemanager.js", "../../resources/js/wysiwyg-tinymce/plugins-about.js", "../../resources/js/wysiwyg-tinymce/util.js", "../../resources/js/wysiwyg-tinymce/plugins-details.js", "../../resources/js/wysiwyg-tinymce/plugins-table-additions.js", "../../resources/js/wysiwyg-tinymce/plugins-tasklist.js", "../../resources/js/wysiwyg-tinymce/fixes.js", "../../resources/js/wysiwyg-tinymce/config.js", "../../resources/js/components/page-comment.js", "../../resources/js/components/page-comments.js", "../../resources/js/components/page-display.js", "../../resources/js/services/dates.ts", "../../resources/js/components/page-editor.js", "../../resources/js/components/page-picker.js", "../../resources/js/components/permissions-table.js", "../../resources/js/components/pointer.js", "../../resources/js/components/popup.js", "../../resources/js/components/setting-app-color-scheme.js", "../../resources/js/components/setting-color-picker.js", "../../resources/js/components/setting-homepage-control.js", "../../resources/js/components/shelf-sort.js", "../../resources/js/components/shortcuts.js", "../../resources/js/components/shortcut-input.js", "../../resources/js/components/sortable-list.js", "../../resources/js/components/submit-on-change.js", "../../resources/js/components/tabs.js", "../../resources/js/components/tag-manager.js", "../../resources/js/components/template-manager.js", "../../resources/js/components/toggle-switch.js", "../../resources/js/components/tri-layout.js", "../../resources/js/components/user-select.js", "../../resources/js/components/webhook-events.js", "../../resources/js/components/wysiwyg-editor.js", "../../resources/js/components/wysiwyg-editor-tinymce.js", "../../resources/js/components/wysiwyg-input.js", "../../resources/js/services/text.ts", "../../resources/js/services/components.ts", "../../resources/js/app.ts"],
  "sourcesContent": ["import {HttpError} from \"./http\";\n\nexport class EventManager {\n    protected listeners: Record<string, ((data: any) => void)[]> = {};\n    protected stack: {name: string, data: {}}[] = [];\n\n    /**\n     * Emit a custom event for any handlers to pick-up.\n     */\n    emit(eventName: string, eventData: {} = {}): void {\n        this.stack.push({name: eventName, data: eventData});\n\n        const listenersToRun = this.listeners[eventName] || [];\n        for (const listener of listenersToRun) {\n            listener(eventData);\n        }\n    }\n\n    /**\n     * Listen to a custom event and run the given callback when that event occurs.\n     */\n    listen<T>(eventName: string, callback: (data: T) => void): void {\n        if (typeof this.listeners[eventName] === 'undefined') this.listeners[eventName] = [];\n        this.listeners[eventName].push(callback);\n    }\n\n    /**\n     * Emit an event for public use.\n     * Sends the event via the native DOM event handling system.\n     */\n    emitPublic(targetElement: Element, eventName: string, eventData: {}): void {\n        const event = new CustomEvent(eventName, {\n            detail: eventData,\n            bubbles: true,\n        });\n        targetElement.dispatchEvent(event);\n    }\n\n    /**\n     * Emit a success event with the provided message.\n     */\n    success(message: string): void {\n        this.emit('success', message);\n    }\n\n    /**\n     * Emit an error event with the provided message.\n     */\n    error(message: string): void {\n        this.emit('error', message);\n    }\n\n    /**\n     * Notify of standard server-provided validation errors.\n     */\n    showValidationErrors(responseErr: {status?: number, data?: object}): void {\n        if (!responseErr.status) return;\n        if (responseErr.status === 422 && responseErr.data) {\n            const message = Object.values(responseErr.data).flat().join('\\n');\n            this.error(message);\n        }\n    }\n\n    /**\n     * Notify standard server-provided error messages.\n     */\n    showResponseError(responseErr: {status?: number, data?: Record<any, any>}|HttpError): void {\n        if (!responseErr.status) return;\n        if (responseErr.status >= 400 && typeof responseErr.data === 'object' && responseErr.data.message) {\n            this.error(responseErr.data.message);\n        }\n    }\n}\n", "type ResponseData = Record<any, any>|string;\n\ntype RequestOptions = {\n    params?: Record<string, string>,\n    headers?: Record<string, string>\n};\n\ntype FormattedResponse = {\n    headers: Headers;\n    original: Response;\n    data: ResponseData;\n    redirected: boolean;\n    status: number;\n    statusText: string;\n    url: string;\n};\n\nexport class HttpError extends Error implements FormattedResponse {\n\n    data: ResponseData;\n    headers: Headers;\n    original: Response;\n    redirected: boolean;\n    status: number;\n    statusText: string;\n    url: string;\n\n    constructor(response: Response, content: ResponseData) {\n        super(response.statusText);\n        this.data = content;\n        this.headers = response.headers;\n        this.redirected = response.redirected;\n        this.status = response.status;\n        this.statusText = response.statusText;\n        this.url = response.url;\n        this.original = response;\n    }\n}\n\nexport class HttpManager {\n\n    /**\n     * Get the content from a fetch response.\n     * Checks the content-type header to determine the format.\n     */\n    protected async getResponseContent(response: Response): Promise<ResponseData|null> {\n        if (response.status === 204) {\n            return null;\n        }\n\n        const responseContentType = response.headers.get('Content-Type') || '';\n        const subType = responseContentType.split(';')[0].split('/').pop();\n\n        if (subType === 'javascript' || subType === 'json') {\n            return response.json();\n        }\n\n        return response.text();\n    }\n\n    createXMLHttpRequest(method: string, url: string, events: Record<string, (e: Event) => void> = {}): XMLHttpRequest {\n        const csrfToken = document.querySelector('meta[name=token]')?.getAttribute('content');\n        const req = new XMLHttpRequest();\n\n        for (const [eventName, callback] of Object.entries(events)) {\n            req.addEventListener(eventName, callback.bind(req));\n        }\n\n        req.open(method, url);\n        req.withCredentials = true;\n        req.setRequestHeader('X-CSRF-TOKEN', csrfToken || '');\n\n        return req;\n    }\n\n    /**\n     * Create a new HTTP request, setting the required CSRF information\n     * to communicate with the back-end. Parses & formats the response.\n     */\n    protected async request(url: string, options: RequestOptions & RequestInit = {}): Promise<FormattedResponse> {\n        let requestUrl = url;\n\n        if (!requestUrl.startsWith('http')) {\n            requestUrl = window.baseUrl(requestUrl);\n        }\n\n        if (options.params) {\n            const urlObj = new URL(requestUrl);\n            for (const paramName of Object.keys(options.params)) {\n                const value = options.params[paramName];\n                if (typeof value !== 'undefined' && value !== null) {\n                    urlObj.searchParams.set(paramName, value);\n                }\n            }\n            requestUrl = urlObj.toString();\n        }\n\n        const csrfToken = document.querySelector('meta[name=token]')?.getAttribute('content') || '';\n        const requestOptions: RequestInit = {...options, credentials: 'same-origin'};\n        requestOptions.headers = {\n            ...requestOptions.headers || {},\n            baseURL: window.baseUrl(''),\n            'X-CSRF-TOKEN': csrfToken,\n        };\n\n        const response = await fetch(requestUrl, requestOptions);\n        const content = await this.getResponseContent(response) || '';\n        const returnData: FormattedResponse = {\n            data: content,\n            headers: response.headers,\n            redirected: response.redirected,\n            status: response.status,\n            statusText: response.statusText,\n            url: response.url,\n            original: response,\n        };\n\n        if (!response.ok) {\n            throw new HttpError(response, content);\n        }\n\n        return returnData;\n    }\n\n    /**\n     * Perform a HTTP request to the back-end that includes data in the body.\n     * Parses the body to JSON if an object, setting the correct headers.\n     */\n    protected async dataRequest(method: string, url: string, data: Record<string, any>|null): Promise<FormattedResponse> {\n        const options: RequestInit & RequestOptions = {\n            method,\n            body: data as BodyInit,\n        };\n\n        // Send data as JSON if a plain object\n        if (typeof data === 'object' && !(data instanceof FormData)) {\n            options.headers = {\n                'Content-Type': 'application/json',\n                'X-Requested-With': 'XMLHttpRequest',\n            };\n            options.body = JSON.stringify(data);\n        }\n\n        // Ensure FormData instances are sent over POST\n        // Since Laravel does not read multipart/form-data from other types\n        // of request, hence the addition of the magic _method value.\n        if (data instanceof FormData && method !== 'post') {\n            data.append('_method', method);\n            options.method = 'post';\n        }\n\n        return this.request(url, options);\n    }\n\n    /**\n     * Perform a HTTP GET request.\n     * Can easily pass query parameters as the second parameter.\n     */\n    async get(url: string, params: {} = {}): Promise<FormattedResponse> {\n        return this.request(url, {\n            method: 'GET',\n            params,\n        });\n    }\n\n    /**\n     * Perform a HTTP POST request.\n     */\n    async post(url: string, data: null|Record<string, any> = null): Promise<FormattedResponse> {\n        return this.dataRequest('POST', url, data);\n    }\n\n    /**\n     * Perform a HTTP PUT request.\n     */\n    async put(url: string, data: null|Record<string, any> = null): Promise<FormattedResponse> {\n        return this.dataRequest('PUT', url, data);\n    }\n\n    /**\n     * Perform a HTTP PATCH request.\n     */\n    async patch(url: string, data: null|Record<string, any> = null): Promise<FormattedResponse> {\n        return this.dataRequest('PATCH', url, data);\n    }\n\n    /**\n     * Perform a HTTP DELETE request.\n     */\n    async delete(url: string, data: null|Record<string, any> = null): Promise<FormattedResponse> {\n        return this.dataRequest('DELETE', url, data);\n    }\n\n    /**\n     * Parse the response text for an error response to a user\n     * presentable string. Handles a range of errors responses including\n     * validation responses & server response text.\n     */\n    protected formatErrorResponseText(text: string): string {\n        const data = text.startsWith('{') ? JSON.parse(text) : {message: text};\n        if (!data) {\n            return text;\n        }\n\n        if (data.message || data.error) {\n            return data.message || data.error;\n        }\n\n        const values = Object.values(data);\n        const isValidation = values.every(val => {\n            return Array.isArray(val) && val.every(x => typeof x === 'string');\n        });\n\n        if (isValidation) {\n            return values.flat().join(' ');\n        }\n\n        return text;\n    }\n\n}\n", "/**\n *  Translation Manager\n *  Helps with some of the JavaScript side of translating strings\n *  in a way which fits with Laravel.\n */\nexport class Translator {\n\n    /**\n     * Parse the given translation and find the correct plural option\n     * to use. Similar format at Laravel's 'trans_choice' helper.\n     */\n    choice(translation: string, count: number, replacements: Record<string, string> = {}): string {\n        const splitText = translation.split('|');\n        const exactCountRegex = /^{([0-9]+)}/;\n        const rangeRegex = /^\\[([0-9]+),([0-9*]+)]/;\n        let result = null;\n\n        for (const t of splitText) {\n            // Parse exact matches\n            const exactMatches = t.match(exactCountRegex);\n            if (exactMatches !== null && Number(exactMatches[1]) === count) {\n                result = t.replace(exactCountRegex, '').trim();\n                break;\n            }\n\n            // Parse range matches\n            const rangeMatches = t.match(rangeRegex);\n            if (rangeMatches !== null) {\n                const rangeStart = Number(rangeMatches[1]);\n                if (rangeStart <= count && (rangeMatches[2] === '*' || Number(rangeMatches[2]) >= count)) {\n                    result = t.replace(rangeRegex, '').trim();\n                    break;\n                }\n            }\n        }\n\n        if (result === null && splitText.length > 1) {\n            result = (count === 1) ? splitText[0] : splitText[1];\n        }\n\n        if (result === null) {\n            result = splitText[0];\n        }\n\n        return this.performReplacements(result, replacements);\n    }\n\n    protected performReplacements(string: string, replacements: Record<string, string>): string {\n        const replaceMatches = string.match(/:(\\S+)/g);\n        if (replaceMatches === null) {\n            return string;\n        }\n\n        let updatedString = string;\n\n        for (const match of replaceMatches) {\n            const key = match.substring(1);\n            if (typeof replacements[key] === 'undefined') {\n                continue;\n            }\n            updatedString = updatedString.replace(match, replacements[key]);\n        }\n\n        return updatedString;\n    }\n\n}\n", "export {AddRemoveRows} from './add-remove-rows';\nexport {AjaxDeleteRow} from './ajax-delete-row';\nexport {AjaxForm} from './ajax-form';\nexport {Attachments} from './attachments';\nexport {AttachmentsList} from './attachments-list';\nexport {AutoSuggest} from './auto-suggest';\nexport {AutoSubmit} from './auto-submit';\nexport {BackToTop} from './back-to-top';\nexport {BookSort} from './book-sort';\nexport {ChapterContents} from './chapter-contents';\nexport {CodeEditor} from './code-editor';\nexport {CodeHighlighter} from './code-highlighter';\nexport {CodeTextarea} from './code-textarea';\nexport {Collapsible} from './collapsible';\nexport {ConfirmDialog} from './confirm-dialog';\nexport {CustomCheckbox} from './custom-checkbox';\nexport {DetailsHighlighter} from './details-highlighter';\nexport {Dropdown} from './dropdown';\nexport {DropdownSearch} from './dropdown-search';\nexport {Dropzone} from './dropzone';\nexport {EditorToolbox} from './editor-toolbox';\nexport {EntityPermissions} from './entity-permissions';\nexport {EntitySearch} from './entity-search';\nexport {EntitySelector} from './entity-selector';\nexport {EntitySelectorPopup} from './entity-selector-popup';\nexport {EventEmitSelect} from './event-emit-select';\nexport {ExpandToggle} from './expand-toggle';\nexport {GlobalSearch} from './global-search';\nexport {HeaderMobileToggle} from './header-mobile-toggle';\nexport {ImageManager} from './image-manager';\nexport {ImagePicker} from './image-picker';\nexport {ListSortControl} from './list-sort-control';\nexport {LoadingButton} from './loading-button.ts';\nexport {MarkdownEditor} from './markdown-editor';\nexport {NewUserPassword} from './new-user-password';\nexport {Notification} from './notification';\nexport {OptionalInput} from './optional-input';\nexport {PageComment} from './page-comment';\nexport {PageComments} from './page-comments';\nexport {PageDisplay} from './page-display';\nexport {PageEditor} from './page-editor';\nexport {PagePicker} from './page-picker';\nexport {PermissionsTable} from './permissions-table';\nexport {Pointer} from './pointer';\nexport {Popup} from './popup';\nexport {SettingAppColorScheme} from './setting-app-color-scheme';\nexport {SettingColorPicker} from './setting-color-picker';\nexport {SettingHomepageControl} from './setting-homepage-control';\nexport {ShelfSort} from './shelf-sort';\nexport {Shortcuts} from './shortcuts';\nexport {ShortcutInput} from './shortcut-input';\nexport {SortableList} from './sortable-list';\nexport {SubmitOnChange} from './submit-on-change';\nexport {Tabs} from './tabs';\nexport {TagManager} from './tag-manager';\nexport {TemplateManager} from './template-manager';\nexport {ToggleSwitch} from './toggle-switch';\nexport {TriLayout} from './tri-layout';\nexport {UserSelect} from './user-select';\nexport {WebhookEvents} from './webhook-events';\nexport {WysiwygEditor} from './wysiwyg-editor';\nexport {WysiwygEditorTinymce} from './wysiwyg-editor-tinymce';\nexport {WysiwygInput} from './wysiwyg-input';\n", "/**\n * Check if the given param is a HTMLElement\n */\nexport function isHTMLElement(el: any): el is HTMLElement {\n    return el instanceof HTMLElement;\n}\n\n/**\n * Create a new element with the given attrs and children.\n * Children can be a string for text nodes or other elements.\n */\nexport function elem(tagName: string, attrs: Record<string, string> = {}, children: Element[]|string[] = []): HTMLElement {\n    const el = document.createElement(tagName);\n\n    for (const [key, val] of Object.entries(attrs)) {\n        if (val === null) {\n            el.removeAttribute(key);\n        } else {\n            el.setAttribute(key, val);\n        }\n    }\n\n    for (const child of children) {\n        if (typeof child === 'string') {\n            el.append(document.createTextNode(child));\n        } else {\n            el.append(child);\n        }\n    }\n\n    return el;\n}\n\n/**\n * Run the given callback against each element that matches the given selector.\n */\nexport function forEach(selector: string, callback: (el: Element) => any) {\n    const elements = document.querySelectorAll(selector);\n    for (const element of elements) {\n        callback(element);\n    }\n}\n\n/**\n * Helper to listen to multiple DOM events\n */\nexport function onEvents(listenerElement: Element, events: string[], callback: (e: Event) => any): void {\n    for (const eventName of events) {\n        listenerElement.addEventListener(eventName, callback);\n    }\n}\n\n/**\n * Helper to run an action when an element is selected.\n * A \"select\" is made to be accessible, So can be a click, space-press or enter-press.\n */\nexport function onSelect(elements: HTMLElement|HTMLElement[], callback: (e: Event) => any): void {\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    for (const listenerElement of elements) {\n        listenerElement.addEventListener('click', callback);\n        listenerElement.addEventListener('keydown', event => {\n            if (event.key === 'Enter' || event.key === ' ') {\n                event.preventDefault();\n                callback(event);\n            }\n        });\n    }\n}\n\n/**\n * Listen to key press on the given element(s).\n */\nfunction onKeyPress(key: string, elements: HTMLElement|HTMLElement[], callback: (e: KeyboardEvent) => any): void {\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    const listener = (event: KeyboardEvent) => {\n        if (event.key === key) {\n            callback(event);\n        }\n    };\n\n    elements.forEach(e => e.addEventListener('keydown', listener));\n}\n\n/**\n * Listen to enter press on the given element(s).\n */\nexport function onEnterPress(elements: HTMLElement|HTMLElement[], callback: (e: KeyboardEvent) => any): void {\n    onKeyPress('Enter', elements, callback);\n}\n\n/**\n * Listen to escape press on the given element(s).\n */\nexport function onEscapePress(elements: HTMLElement|HTMLElement[], callback: (e: KeyboardEvent) => any): void {\n    onKeyPress('Escape', elements, callback);\n}\n\n/**\n * Set a listener on an element for an event emitted by a child\n * matching the given childSelector param.\n * Used in a similar fashion to jQuery's $('listener').on('eventName', 'childSelector', callback)\n */\nexport function onChildEvent(\n    listenerElement: HTMLElement,\n    childSelector: string,\n    eventName: string,\n    callback: (this: HTMLElement, e: Event, child: HTMLElement) => any\n): void {\n    listenerElement.addEventListener(eventName, (event: Event) => {\n        const matchingChild = (event.target as HTMLElement|null)?.closest(childSelector) as HTMLElement;\n        if (matchingChild) {\n            callback.call(matchingChild, event, matchingChild);\n        }\n    });\n}\n\n/**\n * Look for elements that match the given selector and contain the given text.\n * Is case-insensitive and returns the first result or null if nothing is found.\n */\nexport function findText(selector: string, text: string): Element|null {\n    const elements = document.querySelectorAll(selector);\n    text = text.toLowerCase();\n    for (const element of elements) {\n        if ((element.textContent || '').toLowerCase().includes(text) && isHTMLElement(element)) {\n            return element;\n        }\n    }\n    return null;\n}\n\n/**\n * Show a loading indicator in the given element.\n * This will effectively clear the element.\n */\nexport function showLoading(element: HTMLElement): void {\n    element.innerHTML = '<div class=\"loading-container\"><div></div><div></div><div></div></div>';\n}\n\n/**\n * Get a loading element indicator element.\n */\nexport function getLoading(): HTMLElement {\n    const wrap = document.createElement('div');\n    wrap.classList.add('loading-container');\n    wrap.innerHTML = '<div></div><div></div><div></div>';\n    return wrap;\n}\n\n/**\n * Remove any loading indicators within the given element.\n */\nexport function removeLoading(element: HTMLElement): void {\n    const loadingEls = element.querySelectorAll('.loading-container');\n    for (const el of loadingEls) {\n        el.remove();\n    }\n}\n\n/**\n * Convert the given html data into a live DOM element.\n * Initiates any components defined in the data.\n */\nexport function htmlToDom(html: string): HTMLElement {\n    const wrap = document.createElement('div');\n    wrap.innerHTML = html;\n    window.$components.init(wrap);\n    const firstChild = wrap.children[0];\n    if (!isHTMLElement(firstChild)) {\n        throw new Error('Could not find child HTMLElement when creating DOM element from HTML');\n    }\n\n    return firstChild;\n}\n", "/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n * @attribution https://davidwalsh.name/javascript-debounce-function\n */\nexport function debounce(func: Function, waitMs: number, immediate: boolean): Function {\n    let timeout: number|null = null;\n    return function debouncedWrapper(this: any, ...args: any[]) {\n        const context: any = this;\n        const later = function debouncedTimeout() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        const callNow = immediate && !timeout;\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n        timeout = window.setTimeout(later, waitMs);\n        if (callNow) func.apply(context, args);\n    };\n}\n\nfunction isDetailsElement(element: HTMLElement): element is HTMLDetailsElement {\n    return element.nodeName === 'DETAILS';\n}\n\n/**\n * Scroll-to and highlight an element.\n */\nexport function scrollAndHighlightElement(element: HTMLElement): void {\n    if (!element) return;\n\n    // Open up parent <details> elements if within\n    let parent = element;\n    while (parent.parentElement) {\n        parent = parent.parentElement;\n        if (isDetailsElement(parent) && !parent.open) {\n            parent.open = true;\n        }\n    }\n\n    element.scrollIntoView({behavior: 'smooth'});\n\n    const highlight = getComputedStyle(document.body).getPropertyValue('--color-link');\n    element.style.outline = `2px dashed ${highlight}`;\n    element.style.outlineOffset = '5px';\n    element.style.removeProperty('transition');\n    setTimeout(() => {\n        element.style.transition = 'outline linear 3s';\n        element.style.outline = '2px dashed rgba(0, 0, 0, 0)';\n        const listener = () => {\n            element.removeEventListener('transitionend', listener);\n            element.style.removeProperty('transition');\n            element.style.removeProperty('outline');\n            element.style.removeProperty('outlineOffset');\n        };\n        element.addEventListener('transitionend', listener);\n    }, 1000);\n}\n\n/**\n * Escape any HTML in the given 'unsafe' string.\n * Take from https://stackoverflow.com/a/6234804.\n */\nexport function escapeHtml(unsafe: string): string {\n    return unsafe\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#039;');\n}\n\n/**\n * Generate a random unique ID.\n */\nexport function uniqueId(): string {\n    // eslint-disable-next-line no-bitwise\n    const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    return (`${S4() + S4()}-${S4()}-${S4()}-${S4()}-${S4()}${S4()}${S4()}`);\n}\n\n/**\n * Generate a random smaller unique ID.\n */\nexport function uniqueIdSmall(): string {\n    // eslint-disable-next-line no-bitwise\n    const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    return S4();\n}\n\n/**\n * Create a promise that resolves after the given time.\n */\nexport function wait(timeMs: number): Promise<any> {\n    return new Promise(res => {\n        setTimeout(res, timeMs);\n    });\n}\n\n/**\n * Generate a full URL from the given relative URL, using a base\n * URL defined in the head of the page.\n */\nexport function baseUrl(path: string): string {\n    let targetPath = path;\n    const baseUrlMeta = document.querySelector('meta[name=\"base-url\"]');\n    if (!baseUrlMeta) {\n        throw new Error('Could not find expected base-url meta tag in document');\n    }\n\n    let basePath = baseUrlMeta.getAttribute('content') || '';\n    if (basePath[basePath.length - 1] === '/') {\n        basePath = basePath.slice(0, basePath.length - 1);\n    }\n\n    if (targetPath[0] === '/') {\n        targetPath = targetPath.slice(1);\n    }\n\n    return `${basePath}/${targetPath}`;\n}\n\n/**\n * Get the current version of BookStack in use.\n * Grabs this from the version query used on app assets.\n */\nfunction getVersion(): string {\n    const styleLink = document.querySelector('link[href*=\"/dist/styles.css?version=\"]');\n    if (!styleLink) {\n        throw new Error('Could not find expected style link in document for version use');\n    }\n\n    const href = (styleLink.getAttribute('href') || '');\n    return href.split('?version=').pop() || '';\n}\n\n/**\n * Perform a module import, Ensuring the import is fetched with the current\n * app version as a cache-breaker.\n */\nexport function importVersioned(moduleName: string): Promise<object> {\n    const importPath = window.baseUrl(`dist/${moduleName}.js?version=${getVersion()}`);\n    return import(importPath);\n}", "export class Component {\n\n    /**\n     * The registered name of the component.\n     * @type {string}\n     */\n    $name = '';\n\n    /**\n     * The element that the component is registered upon.\n     * @type {Element}\n     */\n    $el = null;\n\n    /**\n     * Mapping of referenced elements within the component.\n     * @type {Object<string, Element>}\n     */\n    $refs = {};\n\n    /**\n     * Mapping of arrays of referenced elements within the component so multiple\n     * references, sharing the same name, can be fetched.\n     * @type {Object<string, Element[]>}\n     */\n    $manyRefs = {};\n\n    /**\n     * Options passed into this component.\n     * @type {Object<String, String>}\n     */\n    $opts = {};\n\n    /**\n     * Component-specific setup methods.\n     * Use this to assign local variables and run any initial setup or actions.\n     */\n    setup() {\n        //\n    }\n\n    /**\n     * Emit an event from this component.\n     * Will be bubbled up from the dom element this is registered on, as a custom event\n     * with the name `<elementName>-<eventName>`, with the provided data in the event detail.\n     * @param {String} eventName\n     * @param {Object} data\n     */\n    $emit(eventName, data = {}) {\n        data.from = this;\n        const componentName = this.$name;\n        const event = new CustomEvent(`${componentName}-${eventName}`, {\n            bubbles: true,\n            detail: data,\n        });\n        this.$el.dispatchEvent(event);\n    }\n\n}\n", "import {onChildEvent} from '../services/dom.ts';\nimport {uniqueId} from '../services/util.ts';\nimport {Component} from './component';\n\n/**\n * AddRemoveRows\n * Allows easy row add/remove controls onto a table.\n * Needs a model row to use when adding a new row.\n */\nexport class AddRemoveRows extends Component {\n\n    setup() {\n        this.modelRow = this.$refs.model;\n        this.addButton = this.$refs.add;\n        this.removeSelector = this.$opts.removeSelector;\n        this.rowSelector = this.$opts.rowSelector;\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.addButton.addEventListener('click', this.add.bind(this));\n\n        onChildEvent(this.$el, this.removeSelector, 'click', e => {\n            const row = e.target.closest(this.rowSelector);\n            row.remove();\n        });\n    }\n\n    // For external use\n    add() {\n        const clone = this.modelRow.cloneNode(true);\n        clone.classList.remove('hidden');\n        this.setClonedInputNames(clone);\n        this.modelRow.parentNode.insertBefore(clone, this.modelRow);\n        window.$components.init(clone);\n    }\n\n    /**\n     * Update the HTML names of a clone to be unique if required.\n     * Names can use placeholder values. For exmaple, a model row\n     * may have name=\"tags[randrowid][name]\".\n     * These are the available placeholder values:\n     * - randrowid - An random string ID, applied the same across the row.\n     * @param {HTMLElement} clone\n     */\n    setClonedInputNames(clone) {\n        const rowId = uniqueId();\n        const randRowIdElems = clone.querySelectorAll('[name*=\"randrowid\"]');\n        for (const elem of randRowIdElems) {\n            elem.name = elem.name.split('randrowid').join(rowId);\n        }\n    }\n\n}\n", "import {onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class AjaxDeleteRow extends Component {\n\n    setup() {\n        this.row = this.$el;\n        this.url = this.$opts.url;\n        this.deleteButtons = this.$manyRefs.delete;\n\n        onSelect(this.deleteButtons, this.runDelete.bind(this));\n    }\n\n    runDelete() {\n        this.row.style.opacity = '0.7';\n        this.row.style.pointerEvents = 'none';\n\n        window.$http.delete(this.url).then(resp => {\n            if (typeof resp.data === 'object' && resp.data.message) {\n                window.$events.emit('success', resp.data.message);\n            }\n            this.row.remove();\n        }).catch(() => {\n            this.row.style.opacity = null;\n            this.row.style.pointerEvents = null;\n        });\n    }\n\n}\n", "import {onEnterPress, onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\n/**\n * Ajax Form\n * Will handle button clicks or input enter press events and submit\n * the data over ajax. Will always expect a partial HTML view to be returned.\n * Fires an 'ajax-form-success' event when submitted successfully.\n *\n * Will handle a real form if that's what the component is added to\n * otherwise will act as a fake form element.\n */\nexport class AjaxForm extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.responseContainer = this.container;\n        this.url = this.$opts.url;\n        this.method = this.$opts.method || 'post';\n        this.successMessage = this.$opts.successMessage;\n        this.submitButtons = this.$manyRefs.submit || [];\n\n        if (this.$opts.responseContainer) {\n            this.responseContainer = this.container.closest(this.$opts.responseContainer);\n        }\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        if (this.container.tagName === 'FORM') {\n            this.container.addEventListener('submit', this.submitRealForm.bind(this));\n            return;\n        }\n\n        onEnterPress(this.container, event => {\n            this.submitFakeForm();\n            event.preventDefault();\n        });\n\n        this.submitButtons.forEach(button => onSelect(button, this.submitFakeForm.bind(this)));\n    }\n\n    submitFakeForm() {\n        const fd = new FormData();\n        const inputs = this.container.querySelectorAll('[name]');\n        for (const input of inputs) {\n            fd.append(input.getAttribute('name'), input.value);\n        }\n        this.submit(fd);\n    }\n\n    submitRealForm(event) {\n        event.preventDefault();\n        const fd = new FormData(this.container);\n        this.submit(fd);\n    }\n\n    async submit(formData) {\n        this.responseContainer.style.opacity = '0.7';\n        this.responseContainer.style.pointerEvents = 'none';\n\n        try {\n            const resp = await window.$http[this.method.toLowerCase()](this.url, formData);\n            this.$emit('success', {formData});\n            this.responseContainer.innerHTML = resp.data;\n            if (this.successMessage) {\n                window.$events.emit('success', this.successMessage);\n            }\n        } catch (err) {\n            this.responseContainer.innerHTML = err.data;\n        }\n\n        window.$components.init(this.responseContainer);\n        this.responseContainer.style.opacity = null;\n        this.responseContainer.style.pointerEvents = null;\n    }\n\n}\n", "import {showLoading} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class Attachments extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.pageId = this.$opts.pageId;\n        this.editContainer = this.$refs.editContainer;\n        this.listContainer = this.$refs.listContainer;\n        this.linksContainer = this.$refs.linksContainer;\n        this.listPanel = this.$refs.listPanel;\n        this.attachLinkButton = this.$refs.attachLinkButton;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        const reloadListBound = this.reloadList.bind(this);\n        this.container.addEventListener('dropzone-upload-success', reloadListBound);\n        this.container.addEventListener('ajax-form-success', reloadListBound);\n\n        this.container.addEventListener('sortable-list-sort', event => {\n            this.updateOrder(event.detail.ids);\n        });\n\n        this.container.addEventListener('event-emit-select-edit', event => {\n            this.startEdit(event.detail.id);\n        });\n\n        this.container.addEventListener('event-emit-select-edit-back', () => {\n            this.stopEdit();\n        });\n\n        this.container.addEventListener('event-emit-select-insert', event => {\n            const insertContent = event.target.closest('[data-drag-content]').getAttribute('data-drag-content');\n            const contentTypes = JSON.parse(insertContent);\n            window.$events.emit('editor::insert', {\n                html: contentTypes['text/html'],\n                markdown: contentTypes['text/plain'],\n            });\n        });\n\n        this.attachLinkButton.addEventListener('click', () => {\n            this.showSection('links');\n        });\n    }\n\n    showSection(section) {\n        const sectionMap = {\n            links: this.linksContainer,\n            edit: this.editContainer,\n            list: this.listContainer,\n        };\n\n        for (const [name, elem] of Object.entries(sectionMap)) {\n            elem.toggleAttribute('hidden', name !== section);\n        }\n    }\n\n    reloadList() {\n        this.stopEdit();\n        window.$http.get(`/attachments/get/page/${this.pageId}`).then(resp => {\n            this.listPanel.innerHTML = resp.data;\n            window.$components.init(this.listPanel);\n        });\n    }\n\n    updateOrder(idOrder) {\n        window.$http.put(`/attachments/sort/page/${this.pageId}`, {order: idOrder}).then(resp => {\n            window.$events.emit('success', resp.data.message);\n        });\n    }\n\n    async startEdit(id) {\n        this.showSection('edit');\n\n        showLoading(this.editContainer);\n        const resp = await window.$http.get(`/attachments/edit/${id}`);\n        this.editContainer.innerHTML = resp.data;\n        window.$components.init(this.editContainer);\n    }\n\n    stopEdit() {\n        this.showSection('list');\n    }\n\n}\n", "import {Component} from './component';\n\n/**\n * Attachments List\n * Adds '?open=true' query to file attachment links\n * when ctrl/cmd is pressed down.\n */\nexport class AttachmentsList extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.fileLinks = this.$manyRefs.linkTypeFile;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        const isExpectedKey = event => event.key === 'Control' || event.key === 'Meta';\n        window.addEventListener('keydown', event => {\n            if (isExpectedKey(event)) {\n                this.addOpenQueryToLinks();\n            }\n        }, {passive: true});\n        window.addEventListener('keyup', event => {\n            if (isExpectedKey(event)) {\n                this.removeOpenQueryFromLinks();\n            }\n        }, {passive: true});\n    }\n\n    addOpenQueryToLinks() {\n        for (const link of this.fileLinks) {\n            if (link.href.split('?')[1] !== 'open=true') {\n                link.href += '?open=true';\n                link.setAttribute('target', '_blank');\n            }\n        }\n    }\n\n    removeOpenQueryFromLinks() {\n        for (const link of this.fileLinks) {\n            link.href = link.href.split('?')[0];\n            link.removeAttribute('target');\n        }\n    }\n\n}\n", "import {isHTMLElement} from \"./dom\";\n\ntype OptionalKeyEventHandler = ((e: KeyboardEvent) => any)|null;\n\n/**\n * Handle common keyboard navigation events within a given container.\n */\nexport class KeyboardNavigationHandler {\n\n    protected containers: HTMLElement[];\n    protected onEscape: OptionalKeyEventHandler;\n    protected onEnter: OptionalKeyEventHandler;\n\n    constructor(container: HTMLElement, onEscape: OptionalKeyEventHandler = null, onEnter: OptionalKeyEventHandler = null) {\n        this.containers = [container];\n        this.onEscape = onEscape;\n        this.onEnter = onEnter;\n        container.addEventListener('keydown', this.#keydownHandler.bind(this));\n    }\n\n    /**\n     * Also share the keyboard event handling to the given element.\n     * Only elements within the original container are considered focusable though.\n     */\n    shareHandlingToEl(element: HTMLElement) {\n        this.containers.push(element);\n        element.addEventListener('keydown', this.#keydownHandler.bind(this));\n    }\n\n    /**\n     * Focus on the next focusable element within the current containers.\n     */\n    focusNext() {\n        const focusable = this.#getFocusable();\n        const activeEl = document.activeElement;\n        const currentIndex = isHTMLElement(activeEl) ? focusable.indexOf(activeEl) : -1;\n        let newIndex = currentIndex + 1;\n        if (newIndex >= focusable.length) {\n            newIndex = 0;\n        }\n\n        focusable[newIndex].focus();\n    }\n\n    /**\n     * Focus on the previous existing focusable element within the current containers.\n     */\n    focusPrevious() {\n        const focusable = this.#getFocusable();\n        const activeEl = document.activeElement;\n        const currentIndex = isHTMLElement(activeEl) ? focusable.indexOf(activeEl) : -1;\n        let newIndex = currentIndex - 1;\n        if (newIndex < 0) {\n            newIndex = focusable.length - 1;\n        }\n\n        focusable[newIndex].focus();\n    }\n\n    #keydownHandler(event: KeyboardEvent) {\n        // Ignore certain key events in inputs to allow text editing.\n        if (isHTMLElement(event.target) && event.target.matches('input') && (event.key === 'ArrowRight' || event.key === 'ArrowLeft')) {\n            return;\n        }\n\n        if (event.key === 'ArrowDown' || event.key === 'ArrowRight') {\n            this.focusNext();\n            event.preventDefault();\n        } else if (event.key === 'ArrowUp' || event.key === 'ArrowLeft') {\n            this.focusPrevious();\n            event.preventDefault();\n        } else if (event.key === 'Escape') {\n            if (this.onEscape) {\n                this.onEscape(event);\n            } else if (isHTMLElement(document.activeElement)) {\n                document.activeElement.blur();\n            }\n        } else if (event.key === 'Enter' && this.onEnter) {\n            this.onEnter(event);\n        }\n    }\n\n    /**\n     * Get an array of focusable elements within the current containers.\n     */\n    #getFocusable(): HTMLElement[] {\n        const focusable: HTMLElement[] = [];\n        const selector = '[tabindex]:not([tabindex=\"-1\"]),[href],button:not([tabindex=\"-1\"],[disabled]),input:not([type=hidden])';\n        for (const container of this.containers) {\n            const toAdd = [...container.querySelectorAll(selector)].filter(e => isHTMLElement(e));\n            focusable.push(...toAdd);\n        }\n\n        return focusable;\n    }\n\n}\n", "import {escapeHtml} from '../services/util.ts';\nimport {onChildEvent} from '../services/dom.ts';\nimport {Component} from './component';\nimport {KeyboardNavigationHandler} from '../services/keyboard-navigation.ts';\n\nconst ajaxCache = {};\n\n/**\n * AutoSuggest\n */\nexport class AutoSuggest extends Component {\n\n    setup() {\n        this.parent = this.$el.parentElement;\n        this.container = this.$el;\n        this.type = this.$opts.type;\n        this.url = this.$opts.url;\n        this.input = this.$refs.input;\n        this.list = this.$refs.list;\n\n        this.lastPopulated = 0;\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        const navHandler = new KeyboardNavigationHandler(\n            this.list,\n            () => {\n                this.input.focus();\n                setTimeout(() => this.hideSuggestions(), 1);\n            },\n            event => {\n                event.preventDefault();\n                const selectionValue = event.target.textContent;\n                if (selectionValue) {\n                    this.selectSuggestion(selectionValue);\n                }\n            },\n        );\n        navHandler.shareHandlingToEl(this.input);\n\n        onChildEvent(this.list, '.text-item', 'click', (event, el) => {\n            this.selectSuggestion(el.textContent);\n        });\n\n        this.input.addEventListener('input', this.requestSuggestions.bind(this));\n        this.input.addEventListener('focus', this.requestSuggestions.bind(this));\n        this.input.addEventListener('blur', this.hideSuggestionsIfFocusedLost.bind(this));\n        this.input.addEventListener('keydown', event => {\n            if (event.key === 'Tab') {\n                this.hideSuggestions();\n            }\n        });\n    }\n\n    selectSuggestion(value) {\n        this.input.value = value;\n        this.lastPopulated = Date.now();\n        this.input.focus();\n        this.input.dispatchEvent(new Event('input', {bubbles: true}));\n        this.input.dispatchEvent(new Event('change', {bubbles: true}));\n        this.hideSuggestions();\n    }\n\n    async requestSuggestions() {\n        if (Date.now() - this.lastPopulated < 50) {\n            return;\n        }\n\n        const nameFilter = this.getNameFilterIfNeeded();\n        const search = this.input.value.toLowerCase();\n        const suggestions = await this.loadSuggestions(search, nameFilter);\n\n        const toShow = suggestions.filter(val => search === '' || val.toLowerCase().startsWith(search)).slice(0, 10);\n\n        this.displaySuggestions(toShow);\n    }\n\n    getNameFilterIfNeeded() {\n        if (this.type !== 'value') return null;\n        return this.parent.querySelector('input').value;\n    }\n\n    /**\n     * @param {String} search\n     * @param {String|null} nameFilter\n     * @returns {Promise<Object|String|*>}\n     */\n    async loadSuggestions(search, nameFilter = null) {\n        // Truncate search to prevent over numerous lookups\n        search = search.slice(0, 4);\n\n        const params = {search, name: nameFilter};\n        const cacheKey = `${this.url}:${JSON.stringify(params)}`;\n\n        if (ajaxCache[cacheKey]) {\n            return ajaxCache[cacheKey];\n        }\n\n        const resp = await window.$http.get(this.url, params);\n        ajaxCache[cacheKey] = resp.data;\n        return resp.data;\n    }\n\n    /**\n     * @param {String[]} suggestions\n     */\n    displaySuggestions(suggestions) {\n        if (suggestions.length === 0) {\n            this.hideSuggestions();\n            return;\n        }\n\n        // This used to use <button>s but was changed to div elements since Safari would not focus on buttons\n        // on which causes a range of other complexities related to focus handling.\n        this.list.innerHTML = suggestions.map(value => `<li><div tabindex=\"0\" class=\"text-item\">${escapeHtml(value)}</div></li>`).join('');\n        this.list.style.display = 'block';\n        for (const button of this.list.querySelectorAll('.text-item')) {\n            button.addEventListener('blur', this.hideSuggestionsIfFocusedLost.bind(this));\n        }\n    }\n\n    hideSuggestions() {\n        this.list.style.display = 'none';\n    }\n\n    hideSuggestionsIfFocusedLost(event) {\n        if (!this.container.contains(event.relatedTarget)) {\n            this.hideSuggestions();\n        }\n    }\n\n}\n", "import {Component} from './component';\n\nexport class AutoSubmit extends Component {\n\n    setup() {\n        this.form = this.$el;\n\n        this.form.submit();\n    }\n\n}\n", "import {Component} from './component';\n\nexport class BackToTop extends Component {\n\n    setup() {\n        this.button = this.$el;\n        this.targetElem = document.getElementById('header');\n        this.showing = false;\n        this.breakPoint = 1200;\n\n        if (document.body.classList.contains('flexbox')) {\n            this.button.style.display = 'none';\n            return;\n        }\n\n        this.button.addEventListener('click', this.scrollToTop.bind(this));\n        window.addEventListener('scroll', this.onPageScroll.bind(this));\n    }\n\n    onPageScroll() {\n        const scrollTopPos = document.documentElement.scrollTop || document.body.scrollTop || 0;\n        if (!this.showing && scrollTopPos > this.breakPoint) {\n            this.button.style.display = 'block';\n            this.showing = true;\n            setTimeout(() => {\n                this.button.style.opacity = 0.4;\n            }, 1);\n        } else if (this.showing && scrollTopPos < this.breakPoint) {\n            this.button.style.opacity = 0;\n            this.showing = false;\n            setTimeout(() => {\n                this.button.style.display = 'none';\n            }, 500);\n        }\n    }\n\n    scrollToTop() {\n        const targetTop = this.targetElem.getBoundingClientRect().top;\n        const scrollElem = document.documentElement.scrollTop ? document.documentElement : document.body;\n        const duration = 300;\n        const start = Date.now();\n        const scrollStart = this.targetElem.getBoundingClientRect().top;\n\n        function setPos() {\n            const percentComplete = (1 - ((Date.now() - start) / duration));\n            const target = Math.abs(percentComplete * scrollStart);\n            if (percentComplete > 0) {\n                scrollElem.scrollTop = target;\n                requestAnimationFrame(setPos.bind(this));\n            } else {\n                scrollElem.scrollTop = targetTop;\n            }\n        }\n\n        requestAnimationFrame(setPos.bind(this));\n    }\n\n}\n", "/**!\n * Sortable 1.15.3\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.3\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop);\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = getParentOrHost(parent));\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild,\n  expando: expando\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvent: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n", "import Sortable, {MultiDrag} from 'sortablejs';\nimport {Component} from './component';\nimport {htmlToDom} from '../services/dom.ts';\n\n// Auto sort control\nconst sortOperations = {\n    name(a, b) {\n        const aName = a.getAttribute('data-name').trim().toLowerCase();\n        const bName = b.getAttribute('data-name').trim().toLowerCase();\n        return aName.localeCompare(bName);\n    },\n    created(a, b) {\n        const aTime = Number(a.getAttribute('data-created'));\n        const bTime = Number(b.getAttribute('data-created'));\n        return bTime - aTime;\n    },\n    updated(a, b) {\n        const aTime = Number(a.getAttribute('data-updated'));\n        const bTime = Number(b.getAttribute('data-updated'));\n        return bTime - aTime;\n    },\n    chaptersFirst(a, b) {\n        const aType = a.getAttribute('data-type');\n        const bType = b.getAttribute('data-type');\n        if (aType === bType) {\n            return 0;\n        }\n        return (aType === 'chapter' ? -1 : 1);\n    },\n    chaptersLast(a, b) {\n        const aType = a.getAttribute('data-type');\n        const bType = b.getAttribute('data-type');\n        if (aType === bType) {\n            return 0;\n        }\n        return (aType === 'chapter' ? 1 : -1);\n    },\n};\n\n/**\n * The available move actions.\n * The active function indicates if the action is possible for the given item.\n * The run function performs the move.\n * @type {{up: {active(Element, ?Element, Element): boolean, run(Element, ?Element, Element)}}}\n */\nconst moveActions = {\n    up: {\n        active(elem, parent) {\n            return !(elem.previousElementSibling === null && !parent);\n        },\n        run(elem, parent) {\n            const newSibling = elem.previousElementSibling || parent;\n            newSibling.insertAdjacentElement('beforebegin', elem);\n        },\n    },\n    down: {\n        active(elem, parent) {\n            return !(elem.nextElementSibling === null && !parent);\n        },\n        run(elem, parent) {\n            const newSibling = elem.nextElementSibling || parent;\n            newSibling.insertAdjacentElement('afterend', elem);\n        },\n    },\n    next_book: {\n        active(elem, parent, book) {\n            return book.nextElementSibling !== null;\n        },\n        run(elem, parent, book) {\n            const newList = book.nextElementSibling.querySelector('ul');\n            newList.prepend(elem);\n        },\n    },\n    prev_book: {\n        active(elem, parent, book) {\n            return book.previousElementSibling !== null;\n        },\n        run(elem, parent, book) {\n            const newList = book.previousElementSibling.querySelector('ul');\n            newList.appendChild(elem);\n        },\n    },\n    next_chapter: {\n        active(elem, parent) {\n            return elem.dataset.type === 'page' && this.getNextChapter(elem, parent);\n        },\n        run(elem, parent) {\n            const nextChapter = this.getNextChapter(elem, parent);\n            nextChapter.querySelector('ul').prepend(elem);\n        },\n        getNextChapter(elem, parent) {\n            const topLevel = (parent || elem);\n            const topItems = Array.from(topLevel.parentElement.children);\n            const index = topItems.indexOf(topLevel);\n            return topItems.slice(index + 1).find(item => item.dataset.type === 'chapter');\n        },\n    },\n    prev_chapter: {\n        active(elem, parent) {\n            return elem.dataset.type === 'page' && this.getPrevChapter(elem, parent);\n        },\n        run(elem, parent) {\n            const prevChapter = this.getPrevChapter(elem, parent);\n            prevChapter.querySelector('ul').append(elem);\n        },\n        getPrevChapter(elem, parent) {\n            const topLevel = (parent || elem);\n            const topItems = Array.from(topLevel.parentElement.children);\n            const index = topItems.indexOf(topLevel);\n            return topItems.slice(0, index).reverse().find(item => item.dataset.type === 'chapter');\n        },\n    },\n    book_end: {\n        active(elem, parent) {\n            return parent || (parent === null && elem.nextElementSibling);\n        },\n        run(elem, parent, book) {\n            book.querySelector('ul').append(elem);\n        },\n    },\n    book_start: {\n        active(elem, parent) {\n            return parent || (parent === null && elem.previousElementSibling);\n        },\n        run(elem, parent, book) {\n            book.querySelector('ul').prepend(elem);\n        },\n    },\n    before_chapter: {\n        active(elem, parent) {\n            return parent;\n        },\n        run(elem, parent) {\n            parent.insertAdjacentElement('beforebegin', elem);\n        },\n    },\n    after_chapter: {\n        active(elem, parent) {\n            return parent;\n        },\n        run(elem, parent) {\n            parent.insertAdjacentElement('afterend', elem);\n        },\n    },\n};\n\nexport class BookSort extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.sortContainer = this.$refs.sortContainer;\n        this.input = this.$refs.input;\n\n        Sortable.mount(new MultiDrag());\n\n        const initialSortBox = this.container.querySelector('.sort-box');\n        this.setupBookSortable(initialSortBox);\n        this.setupSortPresets();\n        this.setupMoveActions();\n\n        window.$events.listen('entity-select-change', this.bookSelect.bind(this));\n    }\n\n    /**\n     * Set up the handlers for the item-level move buttons.\n     */\n    setupMoveActions() {\n        // Handle move button click\n        this.container.addEventListener('click', event => {\n            if (event.target.matches('[data-move]')) {\n                const action = event.target.getAttribute('data-move');\n                const sortItem = event.target.closest('[data-id]');\n                this.runSortAction(sortItem, action);\n            }\n        });\n\n        this.updateMoveActionStateForAll();\n    }\n\n    /**\n     * Set up the handlers for the preset sort type buttons.\n     */\n    setupSortPresets() {\n        let lastSort = '';\n        let reverse = false;\n        const reversibleTypes = ['name', 'created', 'updated'];\n\n        this.sortContainer.addEventListener('click', event => {\n            const sortButton = event.target.closest('.sort-box-options [data-sort]');\n            if (!sortButton) return;\n\n            event.preventDefault();\n            const sortLists = sortButton.closest('.sort-box').querySelectorAll('ul');\n            const sort = sortButton.getAttribute('data-sort');\n\n            reverse = (lastSort === sort) ? !reverse : false;\n            let sortFunction = sortOperations[sort];\n            if (reverse && reversibleTypes.includes(sort)) {\n                sortFunction = function reverseSortOperation(a, b) {\n                    return 0 - sortOperations[sort](a, b);\n                };\n            }\n\n            for (const list of sortLists) {\n                const directItems = Array.from(list.children).filter(child => child.matches('li'));\n                directItems.sort(sortFunction).forEach(sortedItem => {\n                    list.appendChild(sortedItem);\n                });\n            }\n\n            lastSort = sort;\n            this.updateMapInput();\n        });\n    }\n\n    /**\n     * Handle book selection from the entity selector.\n     * @param {Object} entityInfo\n     */\n    bookSelect(entityInfo) {\n        const alreadyAdded = this.container.querySelector(`[data-type=\"book\"][data-id=\"${entityInfo.id}\"]`) !== null;\n        if (alreadyAdded) return;\n\n        const entitySortItemUrl = `${entityInfo.link}/sort-item`;\n        window.$http.get(entitySortItemUrl).then(resp => {\n            const newBookContainer = htmlToDom(resp.data);\n            this.sortContainer.append(newBookContainer);\n            this.setupBookSortable(newBookContainer);\n            this.updateMoveActionStateForAll();\n\n            const summary = newBookContainer.querySelector('summary');\n            summary.focus();\n        });\n    }\n\n    /**\n     * Set up the given book container element to have sortable items.\n     * @param {Element} bookContainer\n     */\n    setupBookSortable(bookContainer) {\n        const sortElems = Array.from(bookContainer.querySelectorAll('.sort-list, .sortable-page-sublist'));\n\n        const bookGroupConfig = {\n            name: 'book',\n            pull: ['book', 'chapter'],\n            put: ['book', 'chapter'],\n        };\n\n        const chapterGroupConfig = {\n            name: 'chapter',\n            pull: ['book', 'chapter'],\n            put(toList, fromList, draggedElem) {\n                return draggedElem.getAttribute('data-type') === 'page';\n            },\n        };\n\n        for (const sortElem of sortElems) {\n            Sortable.create(sortElem, {\n                group: sortElem.classList.contains('sort-list') ? bookGroupConfig : chapterGroupConfig,\n                animation: 150,\n                fallbackOnBody: true,\n                swapThreshold: 0.65,\n                onSort: () => {\n                    this.ensureNoNestedChapters();\n                    this.updateMapInput();\n                    this.updateMoveActionStateForAll();\n                },\n                dragClass: 'bg-white',\n                ghostClass: 'primary-background-light',\n                multiDrag: true,\n                multiDragKey: 'Control',\n                selectedClass: 'sortable-selected',\n            });\n        }\n    }\n\n    /**\n     * Handle nested chapters by moving them to the parent book.\n     * Needed since sorting with multi-sort only checks group rules based on the active item,\n     * not all in group, therefore need to manually check after a sort.\n     * Must be done before updating the map input.\n     */\n    ensureNoNestedChapters() {\n        const nestedChapters = this.container.querySelectorAll('[data-type=\"chapter\"] [data-type=\"chapter\"]');\n        for (const chapter of nestedChapters) {\n            const parentChapter = chapter.parentElement.closest('[data-type=\"chapter\"]');\n            parentChapter.insertAdjacentElement('afterend', chapter);\n        }\n    }\n\n    /**\n     * Update the input with our sort data.\n     */\n    updateMapInput() {\n        const pageMap = this.buildEntityMap();\n        this.input.value = JSON.stringify(pageMap);\n    }\n\n    /**\n     * Build up a mapping of entities with their ordering and nesting.\n     * @returns {Array}\n     */\n    buildEntityMap() {\n        const entityMap = [];\n        const lists = this.container.querySelectorAll('.sort-list');\n\n        for (const list of lists) {\n            const bookId = list.closest('[data-type=\"book\"]').getAttribute('data-id');\n            const directChildren = Array.from(list.children)\n                .filter(elem => elem.matches('[data-type=\"page\"], [data-type=\"chapter\"]'));\n            for (let i = 0; i < directChildren.length; i++) {\n                this.addBookChildToMap(directChildren[i], i, bookId, entityMap);\n            }\n        }\n\n        return entityMap;\n    }\n\n    /**\n     * Parse a sort item and add it to a data-map array.\n     * Parses sub0items if existing also.\n     * @param {Element} childElem\n     * @param {Number} index\n     * @param {Number} bookId\n     * @param {Array} entityMap\n     */\n    addBookChildToMap(childElem, index, bookId, entityMap) {\n        const type = childElem.getAttribute('data-type');\n        const parentChapter = false;\n        const childId = childElem.getAttribute('data-id');\n\n        entityMap.push({\n            id: childId,\n            sort: index,\n            parentChapter,\n            type,\n            book: bookId,\n        });\n\n        const subPages = childElem.querySelectorAll('[data-type=\"page\"]');\n        for (let i = 0; i < subPages.length; i++) {\n            entityMap.push({\n                id: subPages[i].getAttribute('data-id'),\n                sort: i,\n                parentChapter: childId,\n                type: 'page',\n                book: bookId,\n            });\n        }\n    }\n\n    /**\n     * Run the given sort action up the provided sort item.\n     * @param {Element} item\n     * @param {String} action\n     */\n    runSortAction(item, action) {\n        const parentItem = item.parentElement.closest('li[data-id]');\n        const parentBook = item.parentElement.closest('[data-type=\"book\"]');\n        moveActions[action].run(item, parentItem, parentBook);\n        this.updateMapInput();\n        this.updateMoveActionStateForAll();\n        item.scrollIntoView({behavior: 'smooth', block: 'nearest'});\n        item.focus();\n    }\n\n    /**\n     * Update the state of the available move actions on this item.\n     * @param {Element} item\n     */\n    updateMoveActionState(item) {\n        const parentItem = item.parentElement.closest('li[data-id]');\n        const parentBook = item.parentElement.closest('[data-type=\"book\"]');\n        for (const [action, functions] of Object.entries(moveActions)) {\n            const moveButton = item.querySelector(`[data-move=\"${action}\"]`);\n            moveButton.disabled = !functions.active(item, parentItem, parentBook);\n        }\n    }\n\n    updateMoveActionStateForAll() {\n        const items = this.container.querySelectorAll('[data-type=\"chapter\"],[data-type=\"page\"]');\n        for (const item of items) {\n            this.updateMoveActionState(item);\n        }\n    }\n\n}\n", "/**\n * Used in the function below to store references of clean-up functions.\n * Used to ensure only one transitionend function exists at any time.\n */\nconst animateStylesCleanupMap: WeakMap<object, any> = new WeakMap();\n\n/**\n * Animate the css styles of an element using FLIP animation techniques.\n * Styles must be an object where the keys are style rule names and the values\n * are an array of two items in the format [initialValue, finalValue]\n */\nfunction animateStyles(\n    element: HTMLElement,\n    styles: Record<string, string[]>,\n    animTime: number = 400,\n    onComplete: Function | null = null\n): void {\n    const styleNames = Object.keys(styles);\n    for (const style of styleNames) {\n        element.style.setProperty(style, styles[style][0]);\n    }\n\n    const cleanup = () => {\n        for (const style of styleNames) {\n            element.style.removeProperty(style);\n        }\n        element.style.removeProperty('transition');\n        element.removeEventListener('transitionend', cleanup);\n        animateStylesCleanupMap.delete(element);\n        if (onComplete) onComplete();\n    };\n\n    setTimeout(() => {\n        element.style.transition = `all ease-in-out ${animTime}ms`;\n        for (const style of styleNames) {\n            element.style.setProperty(style, styles[style][1]);\n        }\n\n        element.addEventListener('transitionend', cleanup);\n        animateStylesCleanupMap.set(element, cleanup);\n    }, 15);\n}\n\n/**\n * Run the active cleanup action for the given element.\n */\nfunction cleanupExistingElementAnimation(element: Element) {\n    if (animateStylesCleanupMap.has(element)) {\n        const oldCleanup = animateStylesCleanupMap.get(element);\n        oldCleanup();\n    }\n}\n\n/**\n * Fade in the given element.\n */\nexport function fadeIn(element: HTMLElement, animTime: number = 400, onComplete: Function | null = null): void {\n    cleanupExistingElementAnimation(element);\n    element.style.display = 'block';\n    animateStyles(element, {\n        'opacity': ['0', '1'],\n    }, animTime, () => {\n        if (onComplete) onComplete();\n    });\n}\n\n/**\n * Fade out the given element.\n */\nexport function fadeOut(element: HTMLElement, animTime: number = 400, onComplete: Function | null = null): void {\n    cleanupExistingElementAnimation(element);\n    animateStyles(element, {\n        'opacity': ['1', '0'],\n    }, animTime, () => {\n        element.style.display = 'none';\n        if (onComplete) onComplete();\n    });\n}\n\n/**\n * Hide the element by sliding the contents upwards.\n */\nexport function slideUp(element: HTMLElement, animTime: number = 400) {\n    cleanupExistingElementAnimation(element);\n    const currentHeight = element.getBoundingClientRect().height;\n    const computedStyles = getComputedStyle(element);\n    const currentPaddingTop = computedStyles.getPropertyValue('padding-top');\n    const currentPaddingBottom = computedStyles.getPropertyValue('padding-bottom');\n    const animStyles = {\n        'max-height': [`${currentHeight}px`, '0px'],\n        'overflow': ['hidden', 'hidden'],\n        'padding-top': [currentPaddingTop, '0px'],\n        'padding-bottom': [currentPaddingBottom, '0px'],\n    };\n\n    animateStyles(element, animStyles, animTime, () => {\n        element.style.display = 'none';\n    });\n}\n\n/**\n * Show the given element by expanding the contents.\n */\nexport function slideDown(element: HTMLElement, animTime: number = 400) {\n    cleanupExistingElementAnimation(element);\n    element.style.display = 'block';\n    const targetHeight = element.getBoundingClientRect().height;\n    const computedStyles = getComputedStyle(element);\n    const targetPaddingTop = computedStyles.getPropertyValue('padding-top');\n    const targetPaddingBottom = computedStyles.getPropertyValue('padding-bottom');\n    const animStyles = {\n        'max-height': ['0px', `${targetHeight}px`],\n        'overflow': ['hidden', 'hidden'],\n        'padding-top': ['0px', targetPaddingTop],\n        'padding-bottom': ['0px', targetPaddingBottom],\n    };\n\n    animateStyles(element, animStyles, animTime);\n}\n\n/**\n * Transition the height of the given element between two states.\n * Call with first state, and you'll receive a function in return.\n * Call the returned function in the second state to animate between those two states.\n * If animating to/from 0-height use the slide-up/slide down as easier alternatives.\n */\nexport function transitionHeight(element: HTMLElement, animTime: number = 400): () => void {\n    const startHeight = element.getBoundingClientRect().height;\n    const initialComputedStyles = getComputedStyle(element);\n    const startPaddingTop = initialComputedStyles.getPropertyValue('padding-top');\n    const startPaddingBottom = initialComputedStyles.getPropertyValue('padding-bottom');\n\n    return () => {\n        cleanupExistingElementAnimation(element);\n        const targetHeight = element.getBoundingClientRect().height;\n        const computedStyles = getComputedStyle(element);\n        const targetPaddingTop = computedStyles.getPropertyValue('padding-top');\n        const targetPaddingBottom = computedStyles.getPropertyValue('padding-bottom');\n        const animStyles = {\n            'height': [`${startHeight}px`, `${targetHeight}px`],\n            'overflow': ['hidden', 'hidden'],\n            'padding-top': [startPaddingTop, targetPaddingTop],\n            'padding-bottom': [startPaddingBottom, targetPaddingBottom],\n        };\n\n        animateStyles(element, animStyles, animTime);\n    };\n}\n", "import {slideUp, slideDown} from '../services/animations.ts';\nimport {Component} from './component';\n\nexport class ChapterContents extends Component {\n\n    setup() {\n        this.list = this.$refs.list;\n        this.toggle = this.$refs.toggle;\n\n        this.isOpen = this.toggle.classList.contains('open');\n        this.toggle.addEventListener('click', this.click.bind(this));\n    }\n\n    open() {\n        this.toggle.classList.add('open');\n        this.toggle.setAttribute('aria-expanded', 'true');\n        slideDown(this.list, 180);\n        this.isOpen = true;\n    }\n\n    close() {\n        this.toggle.classList.remove('open');\n        this.toggle.setAttribute('aria-expanded', 'false');\n        slideUp(this.list, 180);\n        this.isOpen = false;\n    }\n\n    click(event) {\n        event.preventDefault();\n        if (this.isOpen) {\n            this.close();\n        } else {\n            this.open();\n        }\n    }\n\n}\n", "import {onChildEvent, onEnterPress, onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class CodeEditor extends Component {\n\n    /**\n     * @type {null|SimpleEditorInterface}\n     */\n    editor = null;\n\n    /**\n     * @type {?Function}\n     */\n    saveCallback = null;\n\n    /**\n     * @type {?Function}\n     */\n    cancelCallback = null;\n\n    history = {};\n\n    historyKey = 'code_history';\n\n    setup() {\n        this.container = this.$refs.container;\n        this.popup = this.$el;\n        this.editorInput = this.$refs.editor;\n        this.languageButtons = this.$manyRefs.languageButton;\n        this.languageOptionsContainer = this.$refs.languageOptionsContainer;\n        this.saveButton = this.$refs.saveButton;\n        this.languageInput = this.$refs.languageInput;\n        this.historyDropDown = this.$refs.historyDropDown;\n        this.historyList = this.$refs.historyList;\n        this.favourites = new Set(this.$opts.favourites.split(','));\n\n        this.setupListeners();\n        this.setupFavourites();\n    }\n\n    setupListeners() {\n        this.container.addEventListener('keydown', event => {\n            if (event.ctrlKey && event.key === 'Enter') {\n                this.save();\n            }\n        });\n\n        onSelect(this.languageButtons, event => {\n            const language = event.target.dataset.lang;\n            this.languageInput.value = language;\n            this.languageInputChange(language);\n        });\n\n        onEnterPress(this.languageInput, () => this.save());\n        this.languageInput.addEventListener('input', () => this.languageInputChange(this.languageInput.value));\n        onSelect(this.saveButton, () => this.save());\n\n        onChildEvent(this.historyList, 'button', 'click', (event, elem) => {\n            event.preventDefault();\n            const historyTime = elem.dataset.time;\n            if (this.editor) {\n                this.editor.setContent(this.history[historyTime]);\n            }\n        });\n    }\n\n    setupFavourites() {\n        for (const button of this.languageButtons) {\n            this.setupFavouritesForButton(button);\n        }\n\n        this.sortLanguageList();\n    }\n\n    /**\n     * @param {HTMLButtonElement} button\n     */\n    setupFavouritesForButton(button) {\n        const language = button.dataset.lang;\n        let isFavorite = this.favourites.has(language);\n        button.setAttribute('data-favourite', isFavorite ? 'true' : 'false');\n\n        onChildEvent(button.parentElement, '.lang-option-favorite-toggle', 'click', () => {\n            isFavorite = !isFavorite;\n\n            if (isFavorite) {\n                this.favourites.add(language);\n            } else {\n                this.favourites.delete(language);\n            }\n\n            button.setAttribute('data-favourite', isFavorite ? 'true' : 'false');\n\n            window.$http.patch('/preferences/update-code-language-favourite', {\n                language,\n                active: isFavorite,\n            });\n\n            this.sortLanguageList();\n            if (isFavorite) {\n                button.scrollIntoView({block: 'center', behavior: 'smooth'});\n            }\n        });\n    }\n\n    sortLanguageList() {\n        const sortedParents = this.languageButtons.sort((a, b) => {\n            const aFav = a.dataset.favourite === 'true';\n            const bFav = b.dataset.favourite === 'true';\n\n            if (aFav && !bFav) {\n                return -1;\n            } if (bFav && !aFav) {\n                return 1;\n            }\n\n            return a.dataset.lang > b.dataset.lang ? 1 : -1;\n        }).map(button => button.parentElement);\n\n        for (const parent of sortedParents) {\n            this.languageOptionsContainer.append(parent);\n        }\n    }\n\n    save() {\n        if (this.saveCallback) {\n            this.saveCallback(this.editor.getContent(), this.languageInput.value);\n        }\n        this.hide();\n    }\n\n    async open(code, language, direction, saveCallback, cancelCallback) {\n        this.languageInput.value = language;\n        this.saveCallback = saveCallback;\n        this.cancelCallback = cancelCallback;\n\n        await this.show();\n        this.languageInputChange(language);\n        this.editor.setContent(code);\n        this.setDirection(direction);\n    }\n\n    async show() {\n        const Code = await window.importVersioned('code');\n        if (!this.editor) {\n            this.editor = Code.popupEditor(this.editorInput, this.languageInput.value);\n        }\n\n        this.loadHistory();\n        this.getPopup().show(() => {\n            this.editor.focus();\n        }, () => {\n            this.addHistory();\n            if (this.cancelCallback) {\n                this.cancelCallback();\n            }\n        });\n    }\n\n    setDirection(direction) {\n        const target = this.editorInput.parentElement;\n        if (direction) {\n            target.setAttribute('dir', direction);\n        } else {\n            target.removeAttribute('dir');\n        }\n    }\n\n    hide() {\n        this.getPopup().hide();\n        this.addHistory();\n    }\n\n    /**\n     * @returns {Popup}\n     */\n    getPopup() {\n        return window.$components.firstOnElement(this.popup, 'popup');\n    }\n\n    async updateEditorMode(language) {\n        this.editor.setMode(language, this.editor.getContent());\n    }\n\n    languageInputChange(language) {\n        this.updateEditorMode(language);\n        const inputLang = language.toLowerCase();\n\n        for (const link of this.languageButtons) {\n            const lang = link.dataset.lang.toLowerCase().trim();\n            const isMatch = inputLang === lang;\n            link.classList.toggle('active', isMatch);\n            if (isMatch) {\n                link.scrollIntoView({block: 'center', behavior: 'smooth'});\n            }\n        }\n    }\n\n    loadHistory() {\n        this.history = JSON.parse(window.sessionStorage.getItem(this.historyKey) || '{}');\n        const historyKeys = Object.keys(this.history).reverse();\n        this.historyDropDown.classList.toggle('hidden', historyKeys.length === 0);\n        this.historyList.innerHTML = historyKeys.map(key => {\n            const localTime = (new Date(parseInt(key, 10))).toLocaleTimeString();\n            return `<li><button type=\"button\" data-time=\"${key}\" class=\"text-item\">${localTime}</button></li>`;\n        }).join('');\n    }\n\n    addHistory() {\n        if (!this.editor) return;\n        const code = this.editor.getContent();\n        if (!code) return;\n\n        // Stop if we'd be storing the same as the last item\n        const lastHistoryKey = Object.keys(this.history).pop();\n        if (this.history[lastHistoryKey] === code) return;\n\n        this.history[String(Date.now())] = code;\n        const historyString = JSON.stringify(this.history);\n        window.sessionStorage.setItem(this.historyKey, historyString);\n    }\n\n}\n", "import {Component} from './component';\n\nexport class CodeHighlighter extends Component {\n\n    setup() {\n        const container = this.$el;\n\n        const codeBlocks = container.querySelectorAll('pre');\n        if (codeBlocks.length > 0) {\n            window.importVersioned('code').then(Code => {\n                Code.highlightWithin(container);\n            });\n        }\n    }\n\n}\n", "/**\n * A simple component to render a code editor within the textarea\n * this exists upon.\n */\nimport {Component} from './component';\n\nexport class CodeTextarea extends Component {\n\n    async setup() {\n        const {mode} = this.$opts;\n        const Code = await window.importVersioned('code');\n        Code.inlineEditor(this.$el, mode);\n    }\n\n}\n", "import {slideDown, slideUp} from '../services/animations.ts';\nimport {Component} from './component';\n\n/**\n * Collapsible\n * Provides some simple logic to allow collapsible sections.\n */\nexport class Collapsible extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.trigger = this.$refs.trigger;\n        this.content = this.$refs.content;\n\n        if (this.trigger) {\n            this.trigger.addEventListener('click', this.toggle.bind(this));\n            this.openIfContainsError();\n        }\n    }\n\n    open() {\n        this.container.classList.add('open');\n        this.trigger.setAttribute('aria-expanded', 'true');\n        slideDown(this.content, 300);\n    }\n\n    close() {\n        this.container.classList.remove('open');\n        this.trigger.setAttribute('aria-expanded', 'false');\n        slideUp(this.content, 300);\n    }\n\n    toggle() {\n        if (this.container.classList.contains('open')) {\n            this.close();\n        } else {\n            this.open();\n        }\n    }\n\n    openIfContainsError() {\n        const error = this.content.querySelector('.text-neg.text-small');\n        if (error) {\n            this.open();\n        }\n    }\n\n}\n", "import {onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\n/**\n * Custom equivalent of window.confirm() using our popup component.\n * Is promise based so can be used like so:\n * `const result = await dialog.show()`\n */\nexport class ConfirmDialog extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.confirmButton = this.$refs.confirm;\n\n        this.res = null;\n\n        onSelect(this.confirmButton, () => {\n            this.sendResult(true);\n            this.getPopup().hide();\n        });\n    }\n\n    show() {\n        this.getPopup().show(null, () => {\n            this.sendResult(false);\n        });\n\n        return new Promise(res => {\n            this.res = res;\n        });\n    }\n\n    /**\n     * @returns {Popup}\n     */\n    getPopup() {\n        return window.$components.firstOnElement(this.container, 'popup');\n    }\n\n    /**\n     * @param {Boolean} result\n     */\n    sendResult(result) {\n        if (this.res) {\n            this.res(result);\n            this.res = null;\n        }\n    }\n\n}\n", "import {Component} from './component';\n\nexport class CustomCheckbox extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.checkbox = this.container.querySelector('input[type=checkbox]');\n        this.display = this.container.querySelector('[role=\"checkbox\"]');\n\n        this.checkbox.addEventListener('change', this.stateChange.bind(this));\n        this.container.addEventListener('keydown', this.onKeyDown.bind(this));\n    }\n\n    onKeyDown(event) {\n        const isEnterOrSpace = event.key === ' ' || event.key === 'Enter';\n        if (isEnterOrSpace) {\n            event.preventDefault();\n            this.toggle();\n        }\n    }\n\n    toggle() {\n        this.checkbox.checked = !this.checkbox.checked;\n        this.checkbox.dispatchEvent(new Event('change'));\n        this.stateChange();\n    }\n\n    stateChange() {\n        const checked = this.checkbox.checked ? 'true' : 'false';\n        this.display.setAttribute('aria-checked', checked);\n    }\n\n}\n", "import {Component} from './component';\n\nexport class DetailsHighlighter extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.dealtWith = false;\n\n        this.container.addEventListener('toggle', this.onToggle.bind(this));\n    }\n\n    onToggle() {\n        if (this.dealtWith) return;\n\n        if (this.container.querySelector('pre')) {\n            window.importVersioned('code').then(Code => {\n                Code.highlightWithin(this.container);\n            });\n        }\n        this.dealtWith = true;\n    }\n\n}\n", "import {onSelect} from '../services/dom.ts';\nimport {KeyboardNavigationHandler} from '../services/keyboard-navigation.ts';\nimport {Component} from './component';\n\n/**\n * Dropdown\n * Provides some simple logic to create simple dropdown menus.\n */\nexport class Dropdown extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.menu = this.$refs.menu;\n        this.toggle = this.$refs.toggle;\n        this.moveMenu = this.$opts.moveMenu;\n        this.bubbleEscapes = this.$opts.bubbleEscapes === 'true';\n\n        this.direction = (document.dir === 'rtl') ? 'right' : 'left';\n        this.body = document.body;\n        this.showing = false;\n\n        this.hide = this.hide.bind(this);\n        this.setupListeners();\n    }\n\n    show(event = null) {\n        this.hideAll();\n\n        this.menu.style.display = 'block';\n        this.menu.classList.add('anim', 'menuIn');\n        this.toggle.setAttribute('aria-expanded', 'true');\n\n        const menuOriginalRect = this.menu.getBoundingClientRect();\n        let heightOffset = 0;\n        const toggleHeight = this.toggle.getBoundingClientRect().height;\n        const dropUpwards = menuOriginalRect.bottom > window.innerHeight;\n        const containerRect = this.container.getBoundingClientRect();\n\n        // If enabled, Move to body to prevent being trapped within scrollable sections\n        if (this.moveMenu) {\n            this.body.appendChild(this.menu);\n            this.menu.style.position = 'fixed';\n            this.menu.style.width = `${menuOriginalRect.width}px`;\n            this.menu.style.left = `${menuOriginalRect.left}px`;\n            if (dropUpwards) {\n                heightOffset = (window.innerHeight - menuOriginalRect.top - toggleHeight / 2);\n            } else {\n                heightOffset = menuOriginalRect.top;\n            }\n        }\n\n        // Adjust menu to display upwards if near the bottom of the screen\n        if (dropUpwards) {\n            this.menu.style.top = 'initial';\n            this.menu.style.bottom = `${heightOffset}px`;\n            const maxHeight = (window.innerHeight - 40) - (window.innerHeight - containerRect.bottom);\n            this.menu.style.maxHeight = `${Math.floor(maxHeight)}px`;\n        } else {\n            this.menu.style.top = `${heightOffset}px`;\n            this.menu.style.bottom = 'initial';\n            const maxHeight = (window.innerHeight - 40) - containerRect.top;\n            this.menu.style.maxHeight = `${Math.floor(maxHeight)}px`;\n        }\n\n        // Set listener to hide on mouse leave or window click\n        this.menu.addEventListener('mouseleave', this.hide);\n        window.addEventListener('click', clickEvent => {\n            if (!this.menu.contains(clickEvent.target)) {\n                this.hide();\n            }\n        });\n\n        // Focus on first input if existing\n        const input = this.menu.querySelector('input');\n        if (input !== null) input.focus();\n\n        this.showing = true;\n\n        const showEvent = new Event('show');\n        this.container.dispatchEvent(showEvent);\n\n        if (event) {\n            event.stopPropagation();\n        }\n    }\n\n    hideAll() {\n        for (const dropdown of window.$components.get('dropdown')) {\n            dropdown.hide();\n        }\n    }\n\n    hide() {\n        this.menu.style.display = 'none';\n        this.menu.classList.remove('anim', 'menuIn');\n        this.toggle.setAttribute('aria-expanded', 'false');\n        this.menu.style.top = '';\n        this.menu.style.bottom = '';\n        this.menu.style.maxHeight = '';\n\n        if (this.moveMenu) {\n            this.menu.style.position = '';\n            this.menu.style[this.direction] = '';\n            this.menu.style.width = '';\n            this.menu.style.left = '';\n            this.container.appendChild(this.menu);\n        }\n\n        this.showing = false;\n    }\n\n    setupListeners() {\n        const keyboardNavHandler = new KeyboardNavigationHandler(this.container, event => {\n            this.hide();\n            this.toggle.focus();\n            if (!this.bubbleEscapes) {\n                event.stopPropagation();\n            }\n        }, event => {\n            if (event.target.nodeName === 'INPUT') {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            this.hide();\n        });\n\n        if (this.moveMenu) {\n            keyboardNavHandler.shareHandlingToEl(this.menu);\n        }\n\n        // Hide menu on option click\n        this.container.addEventListener('click', event => {\n            const possibleChildren = Array.from(this.menu.querySelectorAll('a'));\n            if (possibleChildren.includes(event.target)) {\n                this.hide();\n            }\n        });\n\n        onSelect(this.toggle, event => {\n            event.stopPropagation();\n            event.preventDefault();\n            this.show(event);\n            if (event instanceof KeyboardEvent) {\n                keyboardNavHandler.focusNext();\n            }\n        });\n    }\n\n}\n", "import {debounce} from '../services/util.ts';\nimport {transitionHeight} from '../services/animations.ts';\nimport {Component} from './component';\n\nexport class DropdownSearch extends Component {\n\n    setup() {\n        this.elem = this.$el;\n        this.searchInput = this.$refs.searchInput;\n        this.loadingElem = this.$refs.loading;\n        this.listContainerElem = this.$refs.listContainer;\n\n        this.localSearchSelector = this.$opts.localSearchSelector;\n        this.url = this.$opts.url;\n\n        this.elem.addEventListener('show', this.onShow.bind(this));\n        this.searchInput.addEventListener('input', this.onSearch.bind(this));\n\n        this.runAjaxSearch = debounce(this.runAjaxSearch, 300, false);\n    }\n\n    onShow() {\n        this.loadList();\n    }\n\n    onSearch() {\n        const input = this.searchInput.value.toLowerCase().trim();\n        if (this.localSearchSelector) {\n            this.runLocalSearch(input);\n        } else {\n            this.toggleLoading(true);\n            this.listContainerElem.innerHTML = '';\n            this.runAjaxSearch(input);\n        }\n    }\n\n    runAjaxSearch(searchTerm) {\n        this.loadList(searchTerm);\n    }\n\n    runLocalSearch(searchTerm) {\n        const listItems = this.listContainerElem.querySelectorAll(this.localSearchSelector);\n        for (const listItem of listItems) {\n            const match = !searchTerm || listItem.textContent.toLowerCase().includes(searchTerm);\n            listItem.style.display = match ? 'flex' : 'none';\n            listItem.classList.toggle('hidden', !match);\n        }\n    }\n\n    async loadList(searchTerm = '') {\n        this.listContainerElem.innerHTML = '';\n        this.toggleLoading(true);\n\n        try {\n            const resp = await window.$http.get(this.getAjaxUrl(searchTerm));\n            const animate = transitionHeight(this.listContainerElem, 80);\n            this.listContainerElem.innerHTML = resp.data;\n            animate();\n        } catch (err) {\n            console.error(err);\n        }\n\n        this.toggleLoading(false);\n        if (this.localSearchSelector) {\n            this.onSearch();\n        }\n    }\n\n    getAjaxUrl(searchTerm = null) {\n        if (!searchTerm) {\n            return this.url;\n        }\n\n        const joiner = this.url.includes('?') ? '&' : '?';\n        return `${this.url}${joiner}search=${encodeURIComponent(searchTerm)}`;\n    }\n\n    toggleLoading(show = false) {\n        this.loadingElem.style.display = show ? 'block' : 'none';\n    }\n\n}\n", "export class Clipboard {\n\n    protected data: DataTransfer;\n\n    constructor(clipboardData: DataTransfer) {\n        this.data = clipboardData;\n    }\n\n    /**\n     * Check if the clipboard has any items.\n     */\n    hasItems(): boolean {\n        return Boolean(this.data) && Boolean(this.data.types) && this.data.types.length > 0;\n    }\n\n    /**\n     * Check if the given event has tabular-looking data in the clipboard.\n     */\n    containsTabularData(): boolean {\n        const rtfData = this.data.getData('text/rtf');\n        return !!rtfData && rtfData.includes('\\\\trowd');\n    }\n\n    /**\n     * Get the images that are in the clipboard data.\n     */\n    getImages(): File[] {\n        return this.getFiles().filter(f => f.type.includes('image'));\n    }\n\n    /**\n     * Get the files included in the clipboard data.\n     */\n    getFiles(): File[] {\n        const {files} = this.data;\n        return [...files];\n    }\n}\n\nexport async function copyTextToClipboard(text: string) {\n    if (window.isSecureContext && navigator.clipboard) {\n        await navigator.clipboard.writeText(text);\n        return;\n    }\n\n    // Backup option where we can't use the navigator.clipboard API\n    const tempInput = document.createElement('textarea');\n    tempInput.setAttribute('style', 'position: absolute; left: -1000px; top: -1000px;');\n    tempInput.value = text;\n    document.body.appendChild(tempInput);\n    tempInput.select();\n    document.execCommand('copy');\n    document.body.removeChild(tempInput);\n}\n", "import {Component} from './component';\nimport {Clipboard} from '../services/clipboard.ts';\nimport {\n    elem, getLoading, onSelect, removeLoading,\n} from '../services/dom.ts';\n\nexport class Dropzone extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.statusArea = this.$refs.statusArea;\n        this.dropTarget = this.$refs.dropTarget;\n        this.selectButtons = this.$manyRefs.selectButton || [];\n\n        this.isActive = true;\n\n        this.url = this.$opts.url;\n        this.method = (this.$opts.method || 'post').toUpperCase();\n        this.successMessage = this.$opts.successMessage;\n        this.errorMessage = this.$opts.errorMessage;\n        this.uploadLimitMb = Number(this.$opts.uploadLimit);\n        this.uploadLimitMessage = this.$opts.uploadLimitMessage;\n        this.zoneText = this.$opts.zoneText;\n        this.fileAcceptTypes = this.$opts.fileAccept;\n        this.allowMultiple = this.$opts.allowMultiple === 'true';\n\n        this.setupListeners();\n    }\n\n    /**\n     * Public method to allow external disabling/enabling of this drag+drop dropzone.\n     * @param {Boolean} active\n     */\n    toggleActive(active) {\n        this.isActive = active;\n    }\n\n    setupListeners() {\n        onSelect(this.selectButtons, this.manualSelectHandler.bind(this));\n        this.setupDropTargetHandlers();\n    }\n\n    setupDropTargetHandlers() {\n        let depth = 0;\n\n        const reset = () => {\n            this.hideOverlay();\n            depth = 0;\n        };\n\n        this.dropTarget.addEventListener('dragenter', event => {\n            event.preventDefault();\n            depth += 1;\n\n            if (depth === 1 && this.isActive) {\n                this.showOverlay();\n            }\n        });\n\n        this.dropTarget.addEventListener('dragover', event => {\n            event.preventDefault();\n        });\n\n        this.dropTarget.addEventListener('dragend', reset);\n        this.dropTarget.addEventListener('dragleave', () => {\n            depth -= 1;\n            if (depth === 0) {\n                reset();\n            }\n        });\n        this.dropTarget.addEventListener('drop', event => {\n            event.preventDefault();\n            reset();\n\n            if (!this.isActive) {\n                return;\n            }\n\n            const clipboard = new Clipboard(event.dataTransfer);\n            const files = clipboard.getFiles();\n            for (const file of files) {\n                this.createUploadFromFile(file);\n            }\n        });\n    }\n\n    manualSelectHandler() {\n        const input = elem('input', {\n            type: 'file',\n            style: 'left: -400px; visibility: hidden; position: fixed;',\n            accept: this.fileAcceptTypes,\n            multiple: this.allowMultiple ? '' : null,\n        });\n        this.container.append(input);\n        input.click();\n        input.addEventListener('change', () => {\n            for (const file of input.files) {\n                this.createUploadFromFile(file);\n            }\n            input.remove();\n        });\n    }\n\n    showOverlay() {\n        const overlay = this.dropTarget.querySelector('.dropzone-overlay');\n        if (!overlay) {\n            const zoneElem = elem('div', {class: 'dropzone-overlay'}, [this.zoneText]);\n            this.dropTarget.append(zoneElem);\n        }\n    }\n\n    hideOverlay() {\n        const overlay = this.dropTarget.querySelector('.dropzone-overlay');\n        if (overlay) {\n            overlay.remove();\n        }\n    }\n\n    /**\n     * @param {File} file\n     * @return {Upload}\n     */\n    createUploadFromFile(file) {\n        const {\n            dom, status, progress, dismiss,\n        } = this.createDomForFile(file);\n        this.statusArea.append(dom);\n        const component = this;\n\n        const upload = {\n            file,\n            dom,\n            updateProgress(percentComplete) {\n                progress.textContent = `${percentComplete}%`;\n                progress.style.width = `${percentComplete}%`;\n            },\n            markError(message) {\n                status.setAttribute('data-status', 'error');\n                status.textContent = message;\n                removeLoading(dom);\n                this.updateProgress(100);\n            },\n            markSuccess(message) {\n                status.setAttribute('data-status', 'success');\n                status.textContent = message;\n                removeLoading(dom);\n                setTimeout(dismiss, 2400);\n                component.$emit('upload-success', {\n                    name: file.name,\n                });\n            },\n        };\n\n        // Enforce early upload filesize limit\n        if (file.size > (this.uploadLimitMb * 1000000)) {\n            upload.markError(this.uploadLimitMessage);\n            return upload;\n        }\n\n        this.startXhrForUpload(upload);\n\n        return upload;\n    }\n\n    /**\n     * @param {Upload} upload\n     */\n    startXhrForUpload(upload) {\n        const formData = new FormData();\n        formData.append('file', upload.file, upload.file.name);\n        if (this.method !== 'POST') {\n            formData.append('_method', this.method);\n        }\n        const component = this;\n\n        const req = window.$http.createXMLHttpRequest('POST', this.url, {\n            error() {\n                upload.markError(component.errorMessage);\n            },\n            readystatechange() {\n                if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {\n                    upload.markSuccess(component.successMessage);\n                } else if (this.readyState === XMLHttpRequest.DONE && this.status >= 400) {\n                    upload.markError(window.$http.formatErrorResponseText(this.responseText));\n                }\n            },\n        });\n\n        req.upload.addEventListener('progress', evt => {\n            const percent = Math.min(Math.ceil((evt.loaded / evt.total) * 100), 100);\n            upload.updateProgress(percent);\n        });\n\n        req.setRequestHeader('Accept', 'application/json');\n        req.send(formData);\n    }\n\n    /**\n     * @param {File} file\n     * @return {{image: Element, dom: Element, progress: Element, status: Element, dismiss: function}}\n     */\n    createDomForFile(file) {\n        const image = elem('img', {src: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M9.224 7.373a.924.924 0 0 0-.92.925l-.006 7.404c0 .509.412.925.921.925h5.557a.928.928 0 0 0 .926-.925v-5.553l-2.777-2.776Zm3.239 3.239V8.067l2.545 2.545z' style='fill:%23000;fill-opacity:.75'/%3E%3C/svg%3E\"});\n        const status = elem('div', {class: 'dropzone-file-item-status'}, []);\n        const progress = elem('div', {class: 'dropzone-file-item-progress'});\n        const imageWrap = elem('div', {class: 'dropzone-file-item-image-wrap'}, [image]);\n\n        const dom = elem('div', {class: 'dropzone-file-item'}, [\n            imageWrap,\n            elem('div', {class: 'dropzone-file-item-text-wrap'}, [\n                elem('div', {class: 'dropzone-file-item-label'}, [file.name]),\n                getLoading(),\n                status,\n            ]),\n            progress,\n        ]);\n\n        if (file.type.startsWith('image/')) {\n            image.src = URL.createObjectURL(file);\n        }\n\n        const dismiss = () => {\n            dom.classList.add('dismiss');\n            dom.addEventListener('animationend', () => {\n                dom.remove();\n            });\n        };\n\n        dom.addEventListener('click', dismiss);\n\n        return {\n            dom, progress, status, dismiss,\n        };\n    }\n\n}\n\n/**\n * @typedef Upload\n * @property {File} file\n * @property {Element} dom\n * @property {function(Number)} updateProgress\n * @property {function(String)} markError\n * @property {function(String)} markSuccess\n */\n", "import {Component} from './component';\n\nexport class EditorToolbox extends Component {\n\n    setup() {\n        // Elements\n        this.container = this.$el;\n        this.buttons = this.$manyRefs.tabButton;\n        this.contentElements = this.$manyRefs.tabContent;\n        this.toggleButton = this.$refs.toggle;\n        this.editorWrapEl = this.container.closest('.page-editor');\n\n        this.setupListeners();\n\n        // Set the first tab as active on load\n        this.setActiveTab(this.contentElements[0].dataset.tabContent);\n    }\n\n    setupListeners() {\n        // Toolbox toggle button click\n        this.toggleButton.addEventListener('click', () => this.toggle());\n        // Tab button click\n        this.container.addEventListener('click', event => {\n            const button = event.target.closest('button');\n            if (this.buttons.includes(button)) {\n                const name = button.dataset.tab;\n                this.setActiveTab(name, true);\n            }\n        });\n    }\n\n    toggle() {\n        this.container.classList.toggle('open');\n        const isOpen = this.container.classList.contains('open');\n        this.toggleButton.setAttribute('aria-expanded', isOpen ? 'true' : 'false');\n        this.editorWrapEl.classList.toggle('toolbox-open', isOpen);\n    }\n\n    setActiveTab(tabName, openToolbox = false) {\n        // Set button visibility\n        for (const button of this.buttons) {\n            button.classList.remove('active');\n            const bName = button.dataset.tab;\n            if (bName === tabName) button.classList.add('active');\n        }\n\n        // Set content visibility\n        for (const contentEl of this.contentElements) {\n            contentEl.style.display = 'none';\n            const cName = contentEl.dataset.tabContent;\n            if (cName === tabName) contentEl.style.display = 'block';\n        }\n\n        if (openToolbox && !this.container.classList.contains('open')) {\n            this.toggle();\n        }\n    }\n\n}\n", "import {htmlToDom} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class EntityPermissions extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.entityType = this.$opts.entityType;\n\n        this.everyoneInheritToggle = this.$refs.everyoneInherit;\n        this.roleSelect = this.$refs.roleSelect;\n        this.roleContainer = this.$refs.roleContainer;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        // \"Everyone Else\" inherit toggle\n        this.everyoneInheritToggle.addEventListener('change', event => {\n            const inherit = event.target.checked;\n            const permissions = document.querySelectorAll('input[name^=\"permissions[0][\"]');\n            for (const permission of permissions) {\n                permission.disabled = inherit;\n                permission.checked = false;\n            }\n        });\n\n        // Remove role row button click\n        this.container.addEventListener('click', event => {\n            const button = event.target.closest('button');\n            if (button && button.dataset.roleId) {\n                this.removeRowOnButtonClick(button);\n            }\n        });\n\n        // Role select change\n        this.roleSelect.addEventListener('change', () => {\n            const roleId = this.roleSelect.value;\n            if (roleId) {\n                this.addRoleRow(roleId);\n            }\n        });\n    }\n\n    async addRoleRow(roleId) {\n        this.roleSelect.disabled = true;\n\n        // Remove option from select\n        const option = this.roleSelect.querySelector(`option[value=\"${roleId}\"]`);\n        if (option) {\n            option.remove();\n        }\n\n        // Get and insert new row\n        const resp = await window.$http.get(`/permissions/form-row/${this.entityType}/${roleId}`);\n        const row = htmlToDom(resp.data);\n        this.roleContainer.append(row);\n\n        this.roleSelect.disabled = false;\n    }\n\n    removeRowOnButtonClick(button) {\n        const row = button.closest('.item-list-row');\n        const {roleId} = button.dataset;\n        const {roleName} = button.dataset;\n\n        const option = document.createElement('option');\n        option.value = roleId;\n        option.textContent = roleName;\n\n        this.roleSelect.append(option);\n        row.remove();\n    }\n\n}\n", "import {onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class EntitySearch extends Component {\n\n    setup() {\n        this.entityId = this.$opts.entityId;\n        this.entityType = this.$opts.entityType;\n\n        this.contentView = this.$refs.contentView;\n        this.searchView = this.$refs.searchView;\n        this.searchResults = this.$refs.searchResults;\n        this.searchInput = this.$refs.searchInput;\n        this.searchForm = this.$refs.searchForm;\n        this.clearButton = this.$refs.clearButton;\n        this.loadingBlock = this.$refs.loadingBlock;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.searchInput.addEventListener('change', this.runSearch.bind(this));\n        this.searchForm.addEventListener('submit', e => {\n            e.preventDefault();\n            this.runSearch();\n        });\n\n        onSelect(this.clearButton, this.clearSearch.bind(this));\n    }\n\n    runSearch() {\n        const term = this.searchInput.value.trim();\n        if (term.length === 0) {\n            this.clearSearch();\n            return;\n        }\n\n        this.searchView.classList.remove('hidden');\n        this.contentView.classList.add('hidden');\n        this.loadingBlock.classList.remove('hidden');\n\n        const url = window.baseUrl(`/search/${this.entityType}/${this.entityId}`);\n        window.$http.get(url, {term}).then(resp => {\n            this.searchResults.innerHTML = resp.data;\n        }).catch(console.error).then(() => {\n            this.loadingBlock.classList.add('hidden');\n        });\n    }\n\n    clearSearch() {\n        this.searchView.classList.add('hidden');\n        this.contentView.classList.remove('hidden');\n        this.loadingBlock.classList.add('hidden');\n        this.searchInput.value = '';\n    }\n\n}\n", "import {onChildEvent} from '../services/dom.ts';\nimport {Component} from './component';\n\n/**\n * @typedef EntitySelectorSearchOptions\n * @property entityTypes string\n * @property entityPermission string\n * @property searchEndpoint string\n * @property initialValue string\n */\n\n/**\n * Entity Selector\n */\nexport class EntitySelector extends Component {\n\n    setup() {\n        this.elem = this.$el;\n\n        this.input = this.$refs.input;\n        this.searchInput = this.$refs.search;\n        this.loading = this.$refs.loading;\n        this.resultsContainer = this.$refs.results;\n\n        this.searchOptions = {\n            entityTypes: this.$opts.entityTypes || 'page,book,chapter',\n            entityPermission: this.$opts.entityPermission || 'view',\n            searchEndpoint: this.$opts.searchEndpoint || '',\n            initialValue: this.searchInput.value || '',\n        };\n\n        this.search = '';\n        this.lastClick = 0;\n\n        this.setupListeners();\n        this.showLoading();\n\n        if (this.searchOptions.searchEndpoint) {\n            this.initialLoad();\n        }\n    }\n\n    /**\n     * @param {EntitySelectorSearchOptions} options\n     */\n    configureSearchOptions(options) {\n        Object.assign(this.searchOptions, options);\n        this.reset();\n        this.searchInput.value = this.searchOptions.initialValue;\n    }\n\n    setupListeners() {\n        this.elem.addEventListener('click', this.onClick.bind(this));\n\n        let lastSearch = 0;\n        this.searchInput.addEventListener('input', () => {\n            lastSearch = Date.now();\n            this.showLoading();\n            setTimeout(() => {\n                if (Date.now() - lastSearch < 199) return;\n                this.searchEntities(this.searchInput.value);\n            }, 200);\n        });\n\n        this.searchInput.addEventListener('keydown', event => {\n            if (event.keyCode === 13) event.preventDefault();\n        });\n\n        // Keyboard navigation\n        onChildEvent(this.$el, '[data-entity-type]', 'keydown', event => {\n            if (event.ctrlKey && event.code === 'Enter') {\n                const form = this.$el.closest('form');\n                if (form) {\n                    form.submit();\n                    event.preventDefault();\n                    return;\n                }\n            }\n\n            if (event.code === 'ArrowDown') {\n                this.focusAdjacent(true);\n            }\n            if (event.code === 'ArrowUp') {\n                this.focusAdjacent(false);\n            }\n        });\n\n        this.searchInput.addEventListener('keydown', event => {\n            if (event.code === 'ArrowDown') {\n                this.focusAdjacent(true);\n            }\n        });\n    }\n\n    focusAdjacent(forward = true) {\n        const items = Array.from(this.resultsContainer.querySelectorAll('[data-entity-type]'));\n        const selectedIndex = items.indexOf(document.activeElement);\n        const newItem = items[selectedIndex + (forward ? 1 : -1)] || items[0];\n        if (newItem) {\n            newItem.focus();\n        }\n    }\n\n    reset() {\n        this.searchInput.value = '';\n        this.showLoading();\n        this.initialLoad();\n    }\n\n    focusSearch() {\n        this.searchInput.focus();\n    }\n\n    showLoading() {\n        this.loading.style.display = 'block';\n        this.resultsContainer.style.display = 'none';\n    }\n\n    hideLoading() {\n        this.loading.style.display = 'none';\n        this.resultsContainer.style.display = 'block';\n    }\n\n    initialLoad() {\n        if (!this.searchOptions.searchEndpoint) {\n            throw new Error('Search endpoint not set for entity-selector load');\n        }\n\n        if (this.searchOptions.initialValue) {\n            this.searchEntities(this.searchOptions.initialValue);\n            return;\n        }\n\n        window.$http.get(this.searchUrl()).then(resp => {\n            this.resultsContainer.innerHTML = resp.data;\n            this.hideLoading();\n        });\n    }\n\n    searchUrl() {\n        const query = `types=${encodeURIComponent(this.searchOptions.entityTypes)}&permission=${encodeURIComponent(this.searchOptions.entityPermission)}`;\n        return `${this.searchOptions.searchEndpoint}?${query}`;\n    }\n\n    searchEntities(searchTerm) {\n        if (!this.searchOptions.searchEndpoint) {\n            throw new Error('Search endpoint not set for entity-selector load');\n        }\n\n        this.input.value = '';\n        const url = `${this.searchUrl()}&term=${encodeURIComponent(searchTerm)}`;\n        window.$http.get(url).then(resp => {\n            this.resultsContainer.innerHTML = resp.data;\n            this.hideLoading();\n        });\n    }\n\n    isDoubleClick() {\n        const now = Date.now();\n        const answer = now - this.lastClick < 300;\n        this.lastClick = now;\n        return answer;\n    }\n\n    onClick(event) {\n        const listItem = event.target.closest('[data-entity-type]');\n        if (listItem) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.selectItem(listItem);\n        }\n    }\n\n    selectItem(item) {\n        const isDblClick = this.isDoubleClick();\n        const type = item.getAttribute('data-entity-type');\n        const id = item.getAttribute('data-entity-id');\n        const isSelected = (!item.classList.contains('selected') || isDblClick);\n\n        this.unselectAll();\n        this.input.value = isSelected ? `${type}:${id}` : '';\n\n        const link = item.getAttribute('href');\n        const name = item.querySelector('.entity-list-item-name').textContent;\n        const data = {id: Number(id), name, link};\n\n        if (isSelected) {\n            item.classList.add('selected');\n        } else {\n            window.$events.emit('entity-select-change', null);\n        }\n\n        if (!isDblClick && !isSelected) return;\n\n        if (isDblClick) {\n            this.confirmSelection(data);\n        }\n        if (isSelected) {\n            window.$events.emit('entity-select-change', data);\n        }\n    }\n\n    confirmSelection(data) {\n        window.$events.emit('entity-select-confirm', data);\n    }\n\n    unselectAll() {\n        const selected = this.elem.querySelectorAll('.selected');\n        for (const selectedElem of selected) {\n            selectedElem.classList.remove('selected', 'primary-background');\n        }\n    }\n\n}\n", "import {Component} from './component';\n\nexport class EntitySelectorPopup extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.selectButton = this.$refs.select;\n        this.selectorEl = this.$refs.selector;\n\n        this.callback = null;\n        this.selection = null;\n\n        this.selectButton.addEventListener('click', this.onSelectButtonClick.bind(this));\n        window.$events.listen('entity-select-change', this.onSelectionChange.bind(this));\n        window.$events.listen('entity-select-confirm', this.handleConfirmedSelection.bind(this));\n    }\n\n    /**\n     * Show the selector popup.\n     * @param {Function} callback\n     * @param {EntitySelectorSearchOptions} searchOptions\n     */\n    show(callback, searchOptions = {}) {\n        this.callback = callback;\n        this.getSelector().configureSearchOptions(searchOptions);\n        this.getPopup().show();\n\n        this.getSelector().focusSearch();\n    }\n\n    hide() {\n        this.getPopup().hide();\n    }\n\n    /**\n     * @returns {Popup}\n     */\n    getPopup() {\n        return window.$components.firstOnElement(this.container, 'popup');\n    }\n\n    /**\n     * @returns {EntitySelector}\n     */\n    getSelector() {\n        return window.$components.firstOnElement(this.selectorEl, 'entity-selector');\n    }\n\n    onSelectButtonClick() {\n        this.handleConfirmedSelection(this.selection);\n    }\n\n    onSelectionChange(entity) {\n        this.selection = entity;\n        if (entity === null) {\n            this.selectButton.setAttribute('disabled', 'true');\n        } else {\n            this.selectButton.removeAttribute('disabled');\n        }\n    }\n\n    handleConfirmedSelection(entity) {\n        this.hide();\n        this.getSelector().reset();\n        if (this.callback && entity) this.callback(entity);\n    }\n\n}\n", "import {onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\n/**\n * EventEmitSelect\n * Component will simply emit an event when selected.\n *\n * Has one required option: \"name\".\n * A name of \"hello\" will emit a component DOM event of\n * \"event-emit-select-name\"\n *\n * All options will be set as the \"detail\" of the event with\n * their values included.\n */\nexport class EventEmitSelect extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.name = this.$opts.name;\n\n        onSelect(this.$el, () => {\n            this.$emit(this.name, this.$opts);\n        });\n    }\n\n}\n", "import {slideUp, slideDown} from '../services/animations.ts';\nimport {Component} from './component';\n\nexport class ExpandToggle extends Component {\n\n    setup() {\n        this.targetSelector = this.$opts.targetSelector;\n        this.isOpen = this.$opts.isOpen === 'true';\n        this.updateEndpoint = this.$opts.updateEndpoint;\n\n        // Listener setup\n        this.$el.addEventListener('click', this.click.bind(this));\n    }\n\n    open(elemToToggle) {\n        slideDown(elemToToggle, 200);\n    }\n\n    close(elemToToggle) {\n        slideUp(elemToToggle, 200);\n    }\n\n    click(event) {\n        event.preventDefault();\n\n        const matchingElems = document.querySelectorAll(this.targetSelector);\n        for (const match of matchingElems) {\n            const action = this.isOpen ? this.close : this.open;\n            action(match);\n        }\n\n        this.isOpen = !this.isOpen;\n        this.updateSystemAjax(this.isOpen);\n    }\n\n    updateSystemAjax(isOpen) {\n        window.$http.patch(this.updateEndpoint, {\n            expand: isOpen ? 'true' : 'false',\n        });\n    }\n\n}\n", "import {htmlToDom} from '../services/dom.ts';\nimport {debounce} from '../services/util.ts';\nimport {KeyboardNavigationHandler} from '../services/keyboard-navigation.ts';\nimport {Component} from './component';\n\n/**\n * Global (header) search box handling.\n * Mainly to show live results preview.\n */\nexport class GlobalSearch extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.input = this.$refs.input;\n        this.suggestions = this.$refs.suggestions;\n        this.suggestionResultsWrap = this.$refs.suggestionResults;\n        this.loadingWrap = this.$refs.loading;\n        this.button = this.$refs.button;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        const updateSuggestionsDebounced = debounce(this.updateSuggestions.bind(this), 200, false);\n\n        // Handle search input changes\n        this.input.addEventListener('input', () => {\n            const {value} = this.input;\n            if (value.length > 0) {\n                this.loadingWrap.style.display = 'block';\n                this.suggestionResultsWrap.style.opacity = '0.5';\n                updateSuggestionsDebounced(value);\n            } else {\n                this.hideSuggestions();\n            }\n        });\n\n        // Allow double click to show auto-click suggestions\n        this.input.addEventListener('dblclick', () => {\n            this.input.setAttribute('autocomplete', 'on');\n            this.button.focus();\n            this.input.focus();\n        });\n\n        new KeyboardNavigationHandler(this.container, () => {\n            this.hideSuggestions();\n        });\n    }\n\n    /**\n     * @param {String} search\n     */\n    async updateSuggestions(search) {\n        const {data: results} = await window.$http.get('/search/suggest', {term: search});\n        if (!this.input.value) {\n            return;\n        }\n\n        const resultDom = htmlToDom(results);\n\n        this.suggestionResultsWrap.innerHTML = '';\n        this.suggestionResultsWrap.style.opacity = '1';\n        this.loadingWrap.style.display = 'none';\n        this.suggestionResultsWrap.append(resultDom);\n        if (!this.container.classList.contains('search-active')) {\n            this.showSuggestions();\n        }\n    }\n\n    showSuggestions() {\n        this.container.classList.add('search-active');\n        window.requestAnimationFrame(() => {\n            this.suggestions.classList.add('search-suggestions-animation');\n        });\n    }\n\n    hideSuggestions() {\n        this.container.classList.remove('search-active');\n        this.suggestions.classList.remove('search-suggestions-animation');\n        this.suggestionResultsWrap.innerHTML = '';\n    }\n\n}\n", "import {Component} from './component';\n\nexport class HeaderMobileToggle extends Component {\n\n    setup() {\n        this.elem = this.$el;\n        this.toggleButton = this.$refs.toggle;\n        this.menu = this.$refs.menu;\n\n        this.open = false;\n        this.toggleButton.addEventListener('click', this.onToggle.bind(this));\n        this.onWindowClick = this.onWindowClick.bind(this);\n        this.onKeyDown = this.onKeyDown.bind(this);\n    }\n\n    onToggle(event) {\n        this.open = !this.open;\n        this.menu.classList.toggle('show', this.open);\n        this.toggleButton.setAttribute('aria-expanded', this.open ? 'true' : 'false');\n        if (this.open) {\n            this.elem.addEventListener('keydown', this.onKeyDown);\n            window.addEventListener('click', this.onWindowClick);\n        } else {\n            this.elem.removeEventListener('keydown', this.onKeyDown);\n            window.removeEventListener('click', this.onWindowClick);\n        }\n        event.stopPropagation();\n    }\n\n    onKeyDown(event) {\n        if (event.code === 'Escape') {\n            this.onToggle(event);\n        }\n    }\n\n    onWindowClick(event) {\n        this.onToggle(event);\n    }\n\n}\n", "import {\n    onChildEvent, onSelect, removeLoading, showLoading,\n} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class ImageManager extends Component {\n\n    setup() {\n        // Options\n        this.uploadedTo = this.$opts.uploadedTo;\n\n        // Element References\n        this.container = this.$el;\n        this.popupEl = this.$refs.popup;\n        this.searchForm = this.$refs.searchForm;\n        this.searchInput = this.$refs.searchInput;\n        this.cancelSearch = this.$refs.cancelSearch;\n        this.listContainer = this.$refs.listContainer;\n        this.filterTabs = this.$manyRefs.filterTabs;\n        this.selectButton = this.$refs.selectButton;\n        this.uploadButton = this.$refs.uploadButton;\n        this.uploadHint = this.$refs.uploadHint;\n        this.formContainer = this.$refs.formContainer;\n        this.formContainerPlaceholder = this.$refs.formContainerPlaceholder;\n        this.dropzoneContainer = this.$refs.dropzoneContainer;\n        this.loadMore = this.$refs.loadMore;\n\n        // Instance data\n        this.type = 'gallery';\n        this.lastSelected = {};\n        this.lastSelectedTime = 0;\n        this.callback = null;\n        this.resetState = () => {\n            this.hasData = false;\n            this.page = 1;\n            this.filter = 'all';\n        };\n        this.resetState();\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        // Filter tab click\n        onSelect(this.filterTabs, e => {\n            this.resetAll();\n            this.filter = e.target.dataset.filter;\n            this.setActiveFilterTab(this.filter);\n            this.loadGallery();\n        });\n\n        // Search submit\n        this.searchForm.addEventListener('submit', event => {\n            this.resetListView();\n            this.loadGallery();\n            this.cancelSearch.toggleAttribute('hidden', !this.searchInput.value);\n            event.preventDefault();\n        });\n\n        // Cancel search button\n        onSelect(this.cancelSearch, () => {\n            this.resetListView();\n            this.resetSearchView();\n            this.loadGallery();\n        });\n\n        // Load more button click\n        onChildEvent(this.container, '.load-more button', 'click', this.runLoadMore.bind(this));\n\n        // Select image event\n        this.listContainer.addEventListener('event-emit-select-image', this.onImageSelectEvent.bind(this));\n\n        // Image load error handling\n        this.listContainer.addEventListener('error', event => {\n            event.target.src = window.baseUrl('loading_error.png');\n        }, true);\n\n        // Footer select button click\n        onSelect(this.selectButton, () => {\n            if (this.callback) {\n                this.callback(this.lastSelected);\n            }\n            this.hide();\n        });\n\n        // Delete button click\n        onChildEvent(this.formContainer, '#image-manager-delete', 'click', () => {\n            if (this.lastSelected) {\n                this.loadImageEditForm(this.lastSelected.id, true);\n            }\n        });\n\n        // Rebuild thumbs click\n        onChildEvent(this.formContainer, '#image-manager-rebuild-thumbs', 'click', async (_, button) => {\n            button.disabled = true;\n            if (this.lastSelected) {\n                await this.rebuildThumbnails(this.lastSelected.id);\n            }\n            button.disabled = false;\n        });\n\n        // Edit form submit\n        this.formContainer.addEventListener('ajax-form-success', () => {\n            this.refreshGallery();\n            this.resetEditForm();\n        });\n\n        // Image upload success\n        this.container.addEventListener('dropzone-upload-success', this.refreshGallery.bind(this));\n\n        // Auto load-more on scroll\n        const scrollZone = this.listContainer.parentElement;\n        let scrollEvents = [];\n        scrollZone.addEventListener('wheel', event => {\n            const scrollOffset = Math.ceil(scrollZone.scrollHeight - scrollZone.scrollTop);\n            const bottomedOut = scrollOffset === scrollZone.clientHeight;\n            if (!bottomedOut || event.deltaY < 1) {\n                return;\n            }\n\n            const secondAgo = Date.now() - 1000;\n            scrollEvents.push(Date.now());\n            scrollEvents = scrollEvents.filter(d => d >= secondAgo);\n            if (scrollEvents.length > 5 && this.canLoadMore()) {\n                this.runLoadMore();\n            }\n        });\n    }\n\n    show(callback, type = 'gallery') {\n        this.resetAll();\n\n        this.callback = callback;\n        this.type = type;\n        this.getPopup().show();\n\n        const hideUploads = type !== 'gallery';\n        this.dropzoneContainer.classList.toggle('hidden', hideUploads);\n        this.uploadButton.classList.toggle('hidden', hideUploads);\n        this.uploadHint.classList.toggle('hidden', hideUploads);\n\n        /** @var {Dropzone} * */\n        const dropzone = window.$components.firstOnElement(this.container, 'dropzone');\n        dropzone.toggleActive(!hideUploads);\n\n        if (!this.hasData) {\n            this.loadGallery();\n            this.hasData = true;\n        }\n    }\n\n    hide() {\n        this.getPopup().hide();\n    }\n\n    /**\n     * @returns {Popup}\n     */\n    getPopup() {\n        return window.$components.firstOnElement(this.popupEl, 'popup');\n    }\n\n    async loadGallery() {\n        const params = {\n            page: this.page,\n            search: this.searchInput.value || null,\n            uploaded_to: this.uploadedTo,\n            filter_type: this.filter === 'all' ? null : this.filter,\n        };\n\n        const {data: html} = await window.$http.get(`images/${this.type}`, params);\n        if (params.page === 1) {\n            this.listContainer.innerHTML = '';\n        }\n        this.addReturnedHtmlElementsToList(html);\n        removeLoading(this.listContainer);\n    }\n\n    addReturnedHtmlElementsToList(html) {\n        const el = document.createElement('div');\n        el.innerHTML = html;\n\n        const loadMore = el.querySelector('.load-more');\n        if (loadMore) {\n            loadMore.remove();\n            this.loadMore.innerHTML = loadMore.innerHTML;\n        }\n        this.loadMore.toggleAttribute('hidden', !loadMore);\n\n        window.$components.init(el);\n        for (const child of [...el.children]) {\n            this.listContainer.appendChild(child);\n        }\n    }\n\n    setActiveFilterTab(filterName) {\n        for (const tab of this.filterTabs) {\n            const selected = tab.dataset.filter === filterName;\n            tab.setAttribute('aria-selected', selected ? 'true' : 'false');\n        }\n    }\n\n    resetAll() {\n        this.resetState();\n        this.resetListView();\n        this.resetSearchView();\n        this.resetEditForm();\n        this.setActiveFilterTab('all');\n        this.selectButton.classList.add('hidden');\n    }\n\n    resetSearchView() {\n        this.searchInput.value = '';\n        this.cancelSearch.toggleAttribute('hidden', true);\n    }\n\n    resetEditForm() {\n        this.formContainer.innerHTML = '';\n        this.formContainerPlaceholder.removeAttribute('hidden');\n    }\n\n    resetListView() {\n        showLoading(this.listContainer);\n        this.page = 1;\n    }\n\n    refreshGallery() {\n        this.resetListView();\n        this.loadGallery();\n    }\n\n    async onImageSelectEvent(event) {\n        let image = JSON.parse(event.detail.data);\n        const isDblClick = ((image && image.id === this.lastSelected.id)\n            && Date.now() - this.lastSelectedTime < 400);\n        const alreadySelected = event.target.classList.contains('selected');\n        [...this.listContainer.querySelectorAll('.selected')].forEach(el => {\n            el.classList.remove('selected');\n        });\n\n        if (!alreadySelected && !isDblClick) {\n            event.target.classList.add('selected');\n            image = await this.loadImageEditForm(image.id);\n        } else if (!isDblClick) {\n            this.resetEditForm();\n        } else if (isDblClick) {\n            image = this.lastSelected;\n        }\n\n        this.selectButton.classList.toggle('hidden', alreadySelected);\n\n        if (isDblClick && this.callback) {\n            this.callback(image);\n            this.hide();\n        }\n\n        this.lastSelected = image;\n        this.lastSelectedTime = Date.now();\n    }\n\n    async loadImageEditForm(imageId, requestDelete = false) {\n        if (!requestDelete) {\n            this.formContainer.innerHTML = '';\n        }\n\n        const params = requestDelete ? {delete: true} : {};\n        const {data: formHtml} = await window.$http.get(`/images/edit/${imageId}`, params);\n        this.formContainer.innerHTML = formHtml;\n        this.formContainerPlaceholder.setAttribute('hidden', '');\n        window.$components.init(this.formContainer);\n\n        const imageDataEl = this.formContainer.querySelector('#image-manager-form-image-data');\n        return JSON.parse(imageDataEl.text);\n    }\n\n    runLoadMore() {\n        showLoading(this.loadMore);\n        this.page += 1;\n        this.loadGallery();\n    }\n\n    canLoadMore() {\n        return this.loadMore.querySelector('button') && !this.loadMore.hasAttribute('hidden');\n    }\n\n    async rebuildThumbnails(imageId) {\n        try {\n            const response = await window.$http.put(`/images/${imageId}/rebuild-thumbnails`);\n            window.$events.success(response.data);\n            this.refreshGallery();\n        } catch (err) {\n            window.$events.showResponseError(err);\n        }\n    }\n\n}\n", "import {Component} from './component';\n\nexport class ImagePicker extends Component {\n\n    setup() {\n        this.imageElem = this.$refs.image;\n        this.imageInput = this.$refs.imageInput;\n        this.resetInput = this.$refs.resetInput;\n        this.removeInput = this.$refs.removeInput;\n        this.resetButton = this.$refs.resetButton;\n        this.removeButton = this.$refs.removeButton || null;\n\n        this.defaultImage = this.$opts.defaultImage;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.resetButton.addEventListener('click', this.reset.bind(this));\n\n        if (this.removeButton) {\n            this.removeButton.addEventListener('click', this.removeImage.bind(this));\n        }\n\n        this.imageInput.addEventListener('change', this.fileInputChange.bind(this));\n    }\n\n    fileInputChange() {\n        this.resetInput.setAttribute('disabled', 'disabled');\n        if (this.removeInput) {\n            this.removeInput.setAttribute('disabled', 'disabled');\n        }\n\n        for (const file of this.imageInput.files) {\n            this.imageElem.src = window.URL.createObjectURL(file);\n        }\n        this.imageElem.classList.remove('none');\n    }\n\n    reset() {\n        this.imageInput.value = '';\n        this.imageElem.src = this.defaultImage;\n        this.resetInput.removeAttribute('disabled');\n        if (this.removeInput) {\n            this.removeInput.setAttribute('disabled', 'disabled');\n        }\n        this.imageElem.classList.remove('none');\n    }\n\n    removeImage() {\n        this.imageInput.value = '';\n        this.imageElem.classList.add('none');\n        this.removeInput.removeAttribute('disabled');\n        this.resetInput.setAttribute('disabled', 'disabled');\n    }\n\n}\n", "/**\n * ListSortControl\n * Manages the logic for the control which provides list sorting options.\n */\nimport {Component} from './component';\n\nexport class ListSortControl extends Component {\n\n    setup() {\n        this.elem = this.$el;\n        this.menu = this.$refs.menu;\n\n        this.sortInput = this.$refs.sort;\n        this.orderInput = this.$refs.order;\n        this.form = this.$refs.form;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.menu.addEventListener('click', event => {\n            if (event.target.closest('[data-sort-value]') !== null) {\n                this.sortOptionClick(event);\n            }\n        });\n\n        this.elem.addEventListener('click', event => {\n            if (event.target.closest('[data-sort-dir]') !== null) {\n                this.sortDirectionClick(event);\n            }\n        });\n    }\n\n    sortOptionClick(event) {\n        const sortOption = event.target.closest('[data-sort-value]');\n        this.sortInput.value = sortOption.getAttribute('data-sort-value');\n        event.preventDefault();\n        this.form.submit();\n    }\n\n    sortDirectionClick(event) {\n        const currentDir = this.orderInput.value;\n        this.orderInput.value = (currentDir === 'asc') ? 'desc' : 'asc';\n        event.preventDefault();\n        this.form.submit();\n    }\n\n}\n", "export function el(tag: string, attrs: Record<string, string | null> = {}, children: (string | HTMLElement)[] = []): HTMLElement {\n    const el = document.createElement(tag);\n    const attrKeys = Object.keys(attrs);\n    for (const attr of attrKeys) {\n        if (attrs[attr] !== null) {\n            el.setAttribute(attr, attrs[attr] as string);\n        }\n    }\n\n    for (const child of children) {\n        if (typeof child === 'string') {\n            el.append(document.createTextNode(child));\n        } else {\n            el.append(child);\n        }\n    }\n\n    return el;\n}\n\nexport function htmlToDom(html: string): Document {\n    const parser = new DOMParser();\n    return parser.parseFromString(html, 'text/html');\n}\n\nexport function formatSizeValue(size: number | string, defaultSuffix: string = 'px'): string {\n    if (typeof size === 'number' || /^-?\\d+$/.test(size)) {\n        return `${size}${defaultSuffix}`;\n    }\n\n    return size;\n}\n\nexport function sizeToPixels(size: string): number {\n    if (/^-?\\d+$/.test(size)) {\n        return Number(size);\n    }\n\n    if (/^-?\\d+\\.\\d+$/.test(size)) {\n        return Math.round(Number(size));\n    }\n\n    if (/^-?\\d+px\\s*$/.test(size)) {\n        return Number(size.trim().replace('px', ''));\n    }\n\n    return 0;\n}\n\nexport type StyleMap = Map<string, string>;\n\n/**\n * Creates a map from an element's styles.\n * Uses direct attribute value string handling since attempting to iterate\n * over .style will expand out any shorthand properties (like 'padding') making\n * rather than being representative of the actual properties set.\n */\nexport function extractStyleMapFromElement(element: HTMLElement): StyleMap {\n    const map: StyleMap = new Map();\n    const styleText= element.getAttribute('style') || '';\n\n    const rules = styleText.split(';');\n    for (const rule of rules) {\n        const [name, value] = rule.split(':');\n        if (!name || !value) {\n            continue;\n        }\n\n        map.set(name.trim().toLowerCase(), value.trim());\n    }\n\n    return map;\n}\n\nexport function setOrRemoveAttribute(element: HTMLElement, name: string, value: string|null|undefined) {\n    if (value) {\n        element.setAttribute(name, value);\n    } else {\n        element.removeAttribute(name);\n    }\n}", "import {Component} from \"./component.js\";\nimport {showLoading} from \"../services/dom\";\nimport {el} from \"../wysiwyg/utils/dom\";\n\n/**\n * Loading button.\n * Shows a loading indicator and disables the button when the button is clicked,\n * or when the form attached to the button is submitted.\n */\nexport class LoadingButton extends Component {\n\n    protected button!: HTMLButtonElement;\n    protected loadingEl: HTMLDivElement|null = null;\n\n    setup() {\n        this.button = this.$el as HTMLButtonElement;\n        const form = this.button.form;\n\n        const action = () => {\n            setTimeout(() => this.showLoadingState(), 10)\n        };\n\n        this.button.addEventListener('click', action);\n        if (form) {\n            form.addEventListener('submit', action);\n        }\n    }\n\n    showLoadingState() {\n        this.button.disabled = true;\n\n        if (!this.loadingEl) {\n            this.loadingEl = el('div', {class: 'inline block'}) as HTMLDivElement;\n            showLoading(this.loadingEl);\n            this.button.after(this.loadingEl);\n        }\n    }\n}", "import {Component} from './component';\n\nexport class MarkdownEditor extends Component {\n\n    setup() {\n        this.elem = this.$el;\n\n        this.pageId = this.$opts.pageId;\n        this.textDirection = this.$opts.textDirection;\n        this.imageUploadErrorText = this.$opts.imageUploadErrorText;\n        this.serverUploadLimitText = this.$opts.serverUploadLimitText;\n\n        this.display = this.$refs.display;\n        this.input = this.$refs.input;\n        this.divider = this.$refs.divider;\n        this.displayWrap = this.$refs.displayWrap;\n\n        const {settingContainer} = this.$refs;\n        const settingInputs = settingContainer.querySelectorAll('input[type=\"checkbox\"]');\n\n        this.editor = null;\n        window.importVersioned('markdown').then(markdown => {\n            return markdown.init({\n                pageId: this.pageId,\n                container: this.elem,\n                displayEl: this.display,\n                inputEl: this.input,\n                drawioUrl: this.getDrawioUrl(),\n                settingInputs: Array.from(settingInputs),\n                text: {\n                    serverUploadLimit: this.serverUploadLimitText,\n                    imageUploadError: this.imageUploadErrorText,\n                },\n            });\n        }).then(editor => {\n            this.editor = editor;\n            this.setupListeners();\n            this.emitEditorEvents();\n            this.scrollToTextIfNeeded();\n            this.editor.actions.updateAndRender();\n        });\n    }\n\n    emitEditorEvents() {\n        window.$events.emitPublic(this.elem, 'editor-markdown::setup', {\n            markdownIt: this.editor.markdown.getRenderer(),\n            displayEl: this.display,\n            cmEditorView: this.editor.cm,\n        });\n    }\n\n    setupListeners() {\n        // Button actions\n        this.elem.addEventListener('click', event => {\n            const button = event.target.closest('button[data-action]');\n            if (button === null) return;\n\n            const action = button.getAttribute('data-action');\n            if (action === 'insertImage') this.editor.actions.showImageInsert();\n            if (action === 'insertLink') this.editor.actions.showLinkSelector();\n            if (action === 'insertDrawing' && (event.ctrlKey || event.metaKey)) {\n                this.editor.actions.showImageManager();\n                return;\n            }\n            if (action === 'insertDrawing') this.editor.actions.startDrawing();\n            if (action === 'fullscreen') this.editor.actions.fullScreen();\n        });\n\n        // Mobile section toggling\n        this.elem.addEventListener('click', event => {\n            const toolbarLabel = event.target.closest('.editor-toolbar-label');\n            if (!toolbarLabel) return;\n\n            const currentActiveSections = this.elem.querySelectorAll('.markdown-editor-wrap');\n            for (const activeElem of currentActiveSections) {\n                activeElem.classList.remove('active');\n            }\n\n            toolbarLabel.closest('.markdown-editor-wrap').classList.add('active');\n        });\n\n        this.handleDividerDrag();\n    }\n\n    handleDividerDrag() {\n        this.divider.addEventListener('pointerdown', () => {\n            const wrapRect = this.elem.getBoundingClientRect();\n            const moveListener = event => {\n                const xRel = event.pageX - wrapRect.left;\n                const xPct = Math.min(Math.max(20, Math.floor((xRel / wrapRect.width) * 100)), 80);\n                this.displayWrap.style.flexBasis = `${100 - xPct}%`;\n                this.editor.settings.set('editorWidth', xPct);\n            };\n            const upListener = () => {\n                window.removeEventListener('pointermove', moveListener);\n                window.removeEventListener('pointerup', upListener);\n                this.display.style.pointerEvents = null;\n                document.body.style.userSelect = null;\n            };\n\n            this.display.style.pointerEvents = 'none';\n            document.body.style.userSelect = 'none';\n            window.addEventListener('pointermove', moveListener);\n            window.addEventListener('pointerup', upListener);\n        });\n        const widthSetting = this.editor.settings.get('editorWidth');\n        if (widthSetting) {\n            this.displayWrap.style.flexBasis = `${100 - widthSetting}%`;\n        }\n    }\n\n    scrollToTextIfNeeded() {\n        const queryParams = (new URL(window.location)).searchParams;\n        const scrollText = queryParams.get('content-text');\n        if (scrollText) {\n            this.editor.actions.scrollToText(scrollText);\n        }\n    }\n\n    /**\n     * Get the URL for the configured drawio instance.\n     * @returns {String}\n     */\n    getDrawioUrl() {\n        const drawioAttrEl = document.querySelector('[drawio-url]');\n        if (!drawioAttrEl) {\n            return '';\n        }\n\n        return drawioAttrEl.getAttribute('drawio-url') || '';\n    }\n\n    /**\n     * Get the content of this editor.\n     * Used by the parent page editor component.\n     * @return {Promise<{html: String, markdown: String}>}\n     */\n    async getContent() {\n        return this.editor.actions.getContent();\n    }\n\n}\n", "import {Component} from './component';\n\nexport class NewUserPassword extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.inputContainer = this.$refs.inputContainer;\n        this.inviteOption = this.container.querySelector('input[name=send_invite]');\n\n        if (this.inviteOption) {\n            this.inviteOption.addEventListener('change', this.inviteOptionChange.bind(this));\n            this.inviteOptionChange();\n        }\n    }\n\n    inviteOptionChange() {\n        const inviting = (this.inviteOption.value === 'true');\n        const passwordBoxes = this.container.querySelectorAll('input[type=password]');\n        for (const input of passwordBoxes) {\n            input.disabled = inviting;\n        }\n\n        this.inputContainer.style.display = inviting ? 'none' : 'block';\n    }\n\n}\n", "import {Component} from './component';\n\nexport class Notification extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.type = this.$opts.type;\n        this.textElem = this.container.querySelector('span');\n        this.autoHide = this.$opts.autoHide === 'true';\n        this.initialShow = this.$opts.show === 'true';\n        this.container.style.display = 'grid';\n\n        window.$events.listen(this.type, text => {\n            this.show(text);\n        });\n        this.container.addEventListener('click', this.hide.bind(this));\n\n        if (this.initialShow) {\n            setTimeout(() => this.show(this.textElem.textContent), 100);\n        }\n\n        this.hideCleanup = this.hideCleanup.bind(this);\n    }\n\n    show(textToShow = '') {\n        this.container.removeEventListener('transitionend', this.hideCleanup);\n        this.textElem.textContent = textToShow;\n        this.container.style.display = 'grid';\n        setTimeout(() => {\n            this.container.classList.add('showing');\n        }, 1);\n\n        if (this.autoHide) {\n            const words = textToShow.split(' ').length;\n            const timeToShow = Math.max(2000, 1000 + (250 * words));\n            setTimeout(this.hide.bind(this), timeToShow);\n        }\n    }\n\n    hide() {\n        this.container.classList.remove('showing');\n        this.container.addEventListener('transitionend', this.hideCleanup);\n    }\n\n    hideCleanup() {\n        this.container.style.display = 'none';\n        this.container.removeEventListener('transitionend', this.hideCleanup);\n    }\n\n}\n", "import {onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class OptionalInput extends Component {\n\n    setup() {\n        this.removeButton = this.$refs.remove;\n        this.showButton = this.$refs.show;\n        this.input = this.$refs.input;\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        onSelect(this.removeButton, () => {\n            this.input.value = '';\n            this.input.classList.add('hidden');\n            this.removeButton.classList.add('hidden');\n            this.showButton.classList.remove('hidden');\n        });\n\n        onSelect(this.showButton, () => {\n            this.input.classList.remove('hidden');\n            this.removeButton.classList.remove('hidden');\n            this.showButton.classList.add('hidden');\n        });\n    }\n\n}\n", "/**\n * @param {Editor} editor\n */\nexport function register(editor) {\n    // Headers\n    for (let i = 1; i < 5; i++) {\n        editor.shortcuts.add(`meta+${i}`, '', ['FormatBlock', false, `h${i + 1}`]);\n    }\n\n    // Other block shortcuts\n    editor.shortcuts.add('meta+5', '', ['FormatBlock', false, 'p']);\n    editor.shortcuts.add('meta+d', '', ['FormatBlock', false, 'p']);\n    editor.shortcuts.add('meta+6', '', ['FormatBlock', false, 'blockquote']);\n    editor.shortcuts.add('meta+q', '', ['FormatBlock', false, 'blockquote']);\n    editor.shortcuts.add('meta+7', '', ['codeeditor', false, 'pre']);\n    editor.shortcuts.add('meta+e', '', ['codeeditor', false, 'pre']);\n    editor.shortcuts.add('meta+8', '', ['FormatBlock', false, 'code']);\n    editor.shortcuts.add('meta+shift+E', '', ['FormatBlock', false, 'code']);\n    editor.shortcuts.add('meta+o', '', 'InsertOrderedList');\n    editor.shortcuts.add('meta+p', '', 'InsertUnorderedList');\n\n    // Save draft shortcut\n    editor.shortcuts.add('meta+S', '', () => {\n        window.$events.emit('editor-save-draft');\n    });\n\n    // Save page shortcut\n    editor.shortcuts.add('meta+13', '', () => {\n        window.$events.emit('editor-save-page');\n    });\n\n    // Loop through callout styles\n    editor.shortcuts.add('meta+9', '', () => {\n        const selectedNode = editor.selection.getNode();\n        const callout = selectedNode ? selectedNode.closest('.callout') : null;\n\n        const formats = ['info', 'success', 'warning', 'danger'];\n        const currentFormatIndex = formats.findIndex(format => {\n            return callout && callout.classList.contains(format);\n        });\n        const newFormatIndex = (currentFormatIndex + 1) % formats.length;\n        const newFormat = formats[newFormatIndex];\n\n        editor.formatter.apply(`callout${newFormat}`);\n    });\n\n    // Link selector shortcut\n    editor.shortcuts.add('meta+shift+K', '', () => {\n        /** @var {EntitySelectorPopup} * */\n        const selectorPopup = window.$components.first('entity-selector-popup');\n        const selectionText = editor.selection.getContent({format: 'text'}).trim();\n        selectorPopup.show(entity => {\n            if (editor.selection.isCollapsed()) {\n                editor.insertContent(editor.dom.createHTML('a', {href: entity.link}, editor.dom.encode(entity.name)));\n            } else {\n                editor.formatter.apply('link', {href: entity.link});\n            }\n\n            editor.selection.collapse(false);\n            editor.focus();\n        }, {\n            initialValue: selectionText,\n            searchEndpoint: '/search/entity-selector',\n            entityTypes: 'page,book,chapter,bookshelf',\n            entityPermission: 'view',\n        });\n    });\n}\n", "/**\n * @param {Editor} editor\n */\nexport function listen(editor) {\n    // Replace editor content\n    window.$events.listen('editor::replace', ({html}) => {\n        editor.setContent(html);\n    });\n\n    // Append editor content\n    window.$events.listen('editor::append', ({html}) => {\n        const content = editor.getContent() + html;\n        editor.setContent(content);\n    });\n\n    // Prepend editor content\n    window.$events.listen('editor::prepend', ({html}) => {\n        const content = html + editor.getContent();\n        editor.setContent(content);\n    });\n\n    // Insert editor content at the current location\n    window.$events.listen('editor::insert', ({html}) => {\n        editor.insertContent(html);\n    });\n\n    // Focus on the editor\n    window.$events.listen('editor::focus', () => {\n        if (editor.initialized) {\n            editor.focus();\n        }\n    });\n}\n", "/**\n * @param {Editor} editor\n * @param {String} scrollId\n */\nfunction scrollToText(editor, scrollId) {\n    const element = editor.dom.get(encodeURIComponent(scrollId).replace(/!/g, '%21'));\n    if (!element) {\n        return;\n    }\n\n    // scroll the element into the view and put the cursor at the end.\n    element.scrollIntoView();\n    editor.selection.select(element, true);\n    editor.selection.collapse(false);\n    editor.focus();\n}\n\n/**\n * Scroll to a section dictated by the current URL query string, if present.\n * Used when directly editing a specific section of the page.\n * @param {Editor} editor\n */\nexport function scrollToQueryString(editor) {\n    const queryParams = (new URL(window.location)).searchParams;\n    const scrollId = queryParams.get('content-id');\n    if (scrollId) {\n        scrollToText(editor, scrollId);\n    }\n}\n", "import {Clipboard} from '../services/clipboard.ts';\n\nlet wrap;\nlet draggedContentEditable;\n\nfunction hasTextContent(node) {\n    return node && !!(node.textContent || node.innerText);\n}\n\n/**\n * Upload an image file to the server\n * @param {File} file\n * @param {int} pageId\n */\nasync function uploadImageFile(file, pageId) {\n    if (file === null || file.type.indexOf('image') !== 0) {\n        throw new Error('Not an image file');\n    }\n\n    const remoteFilename = file.name || `image-${Date.now()}.png`;\n    const formData = new FormData();\n    formData.append('file', file, remoteFilename);\n    formData.append('uploaded_to', pageId);\n\n    const resp = await window.$http.post(window.baseUrl('/images/gallery'), formData);\n    return resp.data;\n}\n\n/**\n * Handle pasting images from clipboard.\n * @param {Editor} editor\n * @param {WysiwygConfigOptions} options\n * @param {ClipboardEvent|DragEvent} event\n */\nfunction paste(editor, options, event) {\n    const clipboard = new Clipboard(event.clipboardData || event.dataTransfer);\n\n    // Don't handle the event ourselves if no items exist of contains table-looking data\n    if (!clipboard.hasItems() || clipboard.containsTabularData()) {\n        return;\n    }\n\n    const images = clipboard.getImages();\n    for (const imageFile of images) {\n        const id = `image-${Math.random().toString(16).slice(2)}`;\n        const loadingImage = window.baseUrl('/loading.gif');\n        event.preventDefault();\n\n        setTimeout(() => {\n            editor.insertContent(`<p><img src=\"${loadingImage}\" id=\"${id}\"></p>`);\n\n            uploadImageFile(imageFile, options.pageId).then(resp => {\n                const safeName = resp.name.replace(/\"/g, '');\n                const newImageHtml = `<img src=\"${resp.thumbs.display}\" alt=\"${safeName}\" />`;\n\n                const newEl = editor.dom.create('a', {\n                    target: '_blank',\n                    href: resp.url,\n                }, newImageHtml);\n\n                editor.dom.replace(newEl, id);\n            }).catch(err => {\n                editor.dom.remove(id);\n                window.$events.error(err?.data?.message || options.translations.imageUploadErrorText);\n                console.error(err);\n            });\n        }, 10);\n    }\n}\n\n/**\n * @param {Editor} editor\n */\nfunction dragStart(editor) {\n    const node = editor.selection.getNode();\n\n    if (node.nodeName === 'IMG') {\n        wrap = editor.dom.getParent(node, '.mceTemp');\n\n        if (!wrap && node.parentNode.nodeName === 'A' && !hasTextContent(node.parentNode)) {\n            wrap = node.parentNode;\n        }\n    }\n\n    // Track dragged contenteditable blocks\n    if (node.hasAttribute('contenteditable') && node.getAttribute('contenteditable') === 'false') {\n        draggedContentEditable = node;\n    }\n}\n\n/**\n * @param {Editor} editor\n * @param {WysiwygConfigOptions} options\n * @param {DragEvent} event\n */\nfunction drop(editor, options, event) {\n    const {dom} = editor;\n    const rng = window.tinymce.dom.RangeUtils.getCaretRangeFromPoint(\n        event.clientX,\n        event.clientY,\n        editor.getDoc(),\n    );\n\n    // Template insertion\n    const templateId = event.dataTransfer && event.dataTransfer.getData('bookstack/template');\n    if (templateId) {\n        event.preventDefault();\n        window.$http.get(`/templates/${templateId}`).then(resp => {\n            editor.selection.setRng(rng);\n            editor.undoManager.transact(() => {\n                editor.execCommand('mceInsertContent', false, resp.data.html);\n            });\n        });\n    }\n\n    // Don't allow anything to be dropped in a captioned image.\n    if (dom.getParent(rng.startContainer, '.mceTemp')) {\n        event.preventDefault();\n    } else if (wrap) {\n        event.preventDefault();\n\n        editor.undoManager.transact(() => {\n            editor.selection.setRng(rng);\n            editor.selection.setNode(wrap);\n            dom.remove(wrap);\n        });\n    }\n\n    // Handle contenteditable section drop\n    if (!event.isDefaultPrevented() && draggedContentEditable) {\n        event.preventDefault();\n        editor.undoManager.transact(() => {\n            const selectedNode = editor.selection.getNode();\n            const range = editor.selection.getRng();\n            const selectedNodeRoot = selectedNode.closest('body > *');\n            if (range.startOffset > (range.startContainer.length / 2)) {\n                selectedNodeRoot.after(draggedContentEditable);\n            } else {\n                selectedNodeRoot.before(draggedContentEditable);\n            }\n        });\n    }\n\n    // Handle image insert\n    if (!event.isDefaultPrevented()) {\n        paste(editor, options, event);\n    }\n\n    wrap = null;\n}\n\n/**\n * @param {Editor} editor\n * @param {DragEvent} event\n */\nfunction dragOver(editor, event) {\n    // This custom handling essentially emulates the default TinyMCE behaviour while allowing us\n    // to specifically call preventDefault on the event to allow the drop of custom elements.\n    event.preventDefault();\n    editor.focus();\n    const rangeUtils = window.tinymce.dom.RangeUtils;\n    const range = rangeUtils.getCaretRangeFromPoint(event.clientX ?? 0, event.clientY ?? 0, editor.getDoc());\n    editor.selection.setRng(range);\n}\n\n/**\n * @param {Editor} editor\n * @param {WysiwygConfigOptions} options\n */\nexport function listenForDragAndPaste(editor, options) {\n    editor.on('dragover', event => dragOver(editor, event));\n    editor.on('dragstart', () => dragStart(editor));\n    editor.on('drop', event => drop(editor, options, event));\n    editor.on('paste', event => paste(editor, options, event));\n}\n", "/**\n * @param {WysiwygConfigOptions} options\n * @return {String}\n */\nexport function getPrimaryToolbar(options) {\n    const textDirPlugins = options.textDirection === 'rtl' ? 'ltr rtl' : '';\n\n    const toolbar = [\n        'undo redo',\n        'styles',\n        'bold italic underline forecolor backcolor formatoverflow',\n        'alignleft aligncenter alignright alignjustify',\n        'bullist numlist listoverflow',\n        textDirPlugins,\n        'link customtable imagemanager-insert insertoverflow',\n        'code about fullscreen',\n    ];\n\n    return toolbar.filter(row => Boolean(row)).join(' | ');\n}\n\n/**\n * @param {Editor} editor\n */\nfunction registerPrimaryToolbarGroups(editor) {\n    editor.ui.registry.addGroupToolbarButton('formatoverflow', {\n        icon: 'more-drawer',\n        tooltip: 'More',\n        items: 'strikethrough superscript subscript inlinecode removeformat',\n    });\n    editor.ui.registry.addGroupToolbarButton('listoverflow', {\n        icon: 'more-drawer',\n        tooltip: 'More',\n        items: 'tasklist outdent indent',\n    });\n    editor.ui.registry.addGroupToolbarButton('insertoverflow', {\n        icon: 'more-drawer',\n        tooltip: 'More',\n        items: 'customhr codeeditor drawio media details',\n    });\n}\n\n/**\n * @param {Editor} editor\n */\nfunction registerLinkContextToolbar(editor) {\n    editor.ui.registry.addContextToolbar('linkcontexttoolbar', {\n        predicate(node) {\n            return node.closest('a') !== null;\n        },\n        position: 'node',\n        scope: 'node',\n        items: 'link unlink openlink',\n    });\n}\n\n/**\n * @param {Editor} editor\n */\nfunction registerImageContextToolbar(editor) {\n    editor.ui.registry.addContextToolbar('imagecontexttoolbar', {\n        predicate(node) {\n            return node.closest('img') !== null && !node.hasAttribute('data-mce-object');\n        },\n        position: 'node',\n        scope: 'node',\n        items: 'image',\n    });\n}\n\n/**\n * @param {Editor} editor\n */\nfunction registerObjectContextToolbar(editor) {\n    editor.ui.registry.addContextToolbar('objectcontexttoolbar', {\n        predicate(node) {\n            return node.closest('img') !== null && node.hasAttribute('data-mce-object');\n        },\n        position: 'node',\n        scope: 'node',\n        items: 'media',\n    });\n}\n\n/**\n * @param {Editor} editor\n */\nexport function registerAdditionalToolbars(editor) {\n    registerPrimaryToolbarGroups(editor);\n    registerLinkContextToolbar(editor);\n    registerImageContextToolbar(editor);\n    registerObjectContextToolbar(editor);\n}\n", "const icons = {\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path d=\"M21 19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14c1.1 0 2 .9 2 2zm-2 0V5h-4v2.2h-2V5h-2v2.2H9V5H5v14h4v-2.1h2V19h2v-2.1h2V19Z\"/><path d=\"M14.829 10.585 13.415 12l1.414 1.414c.943.943-.472 2.357-1.414 1.414L12 13.414l-1.414 1.414c-.944.944-2.358-.47-1.414-1.414L10.586 12l-1.414-1.415c-.943-.942.471-2.357 1.414-1.414L12 10.585l1.344-1.343c1.111-1.112 2.2.627 1.485 1.343z\" style=\"fill-rule:nonzero\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path d=\"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14c0 1.1-.9 2-2 2zm0-2h14v-4h-2.2v-2H19v-2h-2.2V9H19V5H5v4h2.1v2H5v2h2.1v2H5Z\"/><path d=\"M13.415 14.829 12 13.415l-1.414 1.414c-.943.943-2.357-.472-1.414-1.414L10.586 12l-1.414-1.414c-.944-.944.47-2.358 1.414-1.414L12 10.586l1.415-1.414c.942-.943 2.357.471 1.414 1.414L13.415 12l1.343 1.344c1.112 1.111-.627 2.2-1.343 1.485z\" style=\"fill-rule:nonzero\"/></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path d=\"M16 5h-5v14h5c1.235 0 1.234 2 0 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11c1.229 0 1.236 2 0 2zm-7 6V5H5v6zm0 8v-6H5v6zm11.076-6h-2v2c0 1.333-2 1.333-2 0v-2h-2c-1.335 0-1.335-2 0-2h2V9c0-1.333 2-1.333 2 0v2h1.9c1.572 0 1.113 2 .1 2z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path d=\"M8 19h5V5H8C6.764 5 6.766 3 8 3h11a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H8c-1.229 0-1.236-2 0-2zm7-6v6h4v-6zm0-8v6h4V5ZM3.924 11h2V9c0-1.333 2-1.333 2 0v2h2c1.335 0 1.335 2 0 2h-2v2c0 1.333-2 1.333-2 0v-2h-1.9c-1.572 0-1.113-2-.1-2z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path d=\"M5 8v5h14V8c0-1.235 2-1.234 2 0v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8C3 6.77 5 6.764 5 8zm6 7H5v4h6zm8 0h-6v4h6zM13 3.924v2h2c1.333 0 1.333 2 0 2h-2v2c0 1.335-2 1.335-2 0v-2H9c-1.333 0-1.333-2 0-2h2v-1.9c0-1.572 2-1.113 2-.1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path d=\"M19 16v-5H5v5c0 1.235-2 1.234-2 0V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v11c0 1.229-2 1.236-2 0zm-6-7h6V5h-6zM5 9h6V5H5Zm6 11.076v-2H9c-1.333 0-1.333-2 0-2h2v-2c0-1.335 2-1.335 2 0v2h2c1.333 0 1.333 2 0 2h-2v1.9c0 1.572-2 1.113-2 .1z\"/></svg>',\n    table: '<svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2ZM5 14v5h6v-5zm14 0h-6v5h6zm0-7h-6v5h6zM5 12h6V7H5Z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><path d=\"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14c0 1.1-.9 2-2 2zm0-2h14V5H5v14z\"/><path d=\"m13.711 15.423-1.71-1.712-1.712 1.712c-1.14 1.14-2.852-.57-1.71-1.712l1.71-1.71-1.71-1.712c-1.143-1.142.568-2.853 1.71-1.71L12 10.288l1.711-1.71c1.141-1.142 2.852.57 1.712 1.71L13.71 12l1.626 1.626c1.345 1.345-.76 2.663-1.626 1.797z\" style=\"fill-rule:nonzero;stroke-width:1.20992\"/></svg>',\n};\n\n/**\n * @param {Editor} editor\n */\nexport function registerCustomIcons(editor) {\n    for (const [name, svg] of Object.entries(icons)) {\n        editor.ui.registry.addIcon(name, svg);\n    }\n}\n", "/**\n * Setup a serializer filter for <br> tags to ensure they're not rendered\n * within code blocks and that we use newlines there instead.\n * @param {Editor} editor\n */\nfunction setupBrFilter(editor) {\n    editor.serializer.addNodeFilter('br', nodes => {\n        for (const node of nodes) {\n            if (node.parent && node.parent.name === 'code') {\n                const newline = window.tinymce.html.Node.create('#text');\n                newline.value = '\\n';\n                node.replace(newline);\n            }\n        }\n    });\n}\n\n/**\n * Remove accidentally added pointer elements that are within the content.\n * These could have accidentally been added via getting caught in range\n * selection within page content.\n * @param {Editor} editor\n */\nfunction setupPointerFilter(editor) {\n    editor.parser.addNodeFilter('div', nodes => {\n        for (const node of nodes) {\n            const id = node.attr('id') || '';\n            const nodeClass = node.attr('class') || '';\n            if (id === 'pointer' || nodeClass.includes('pointer')) {\n                node.remove();\n            }\n        }\n    });\n}\n\n/**\n * Setup global default filters for the given editor instance.\n * @param {Editor} editor\n */\nexport function setupFilters(editor) {\n    setupBrFilter(editor);\n    setupPointerFilter(editor);\n}\n", "function elemIsCodeBlock(elem) {\n    return elem.tagName.toLowerCase() === 'code-block';\n}\n\n/**\n * @param {Editor} editor\n * @param {String} code\n * @param {String} language\n * @param {String} direction\n * @param {function(string, string)} callback (Receives (code: string,language: string)\n */\nfunction showPopup(editor, code, language, direction, callback) {\n    /** @var {CodeEditor} codeEditor * */\n    const codeEditor = window.$components.first('code-editor');\n    const bookMark = editor.selection.getBookmark();\n    codeEditor.open(code, language, direction, (newCode, newLang) => {\n        callback(newCode, newLang);\n        editor.focus();\n        editor.selection.moveToBookmark(bookMark);\n    }, () => {\n        editor.focus();\n        editor.selection.moveToBookmark(bookMark);\n    });\n}\n\n/**\n * @param {Editor} editor\n * @param {CodeBlockElement} codeBlock\n */\nfunction showPopupForCodeBlock(editor, codeBlock) {\n    const direction = codeBlock.getAttribute('dir') || '';\n    showPopup(editor, codeBlock.getContent(), codeBlock.getLanguage(), direction, (newCode, newLang) => {\n        codeBlock.setContent(newCode, newLang);\n    });\n}\n\n/**\n * Define our custom code-block HTML element that we use.\n * Needs to be delayed since it needs to be defined within the context of the\n * child editor window and document, hence its definition within a callback.\n * @param {Editor} editor\n */\nfunction defineCodeBlockCustomElement(editor) {\n    const doc = editor.getDoc();\n    const win = doc.defaultView;\n\n    class CodeBlockElement extends win.HTMLElement {\n\n        /**\n         * @type {?SimpleEditorInterface}\n         */\n        editor = null;\n\n        constructor() {\n            super();\n            this.attachShadow({mode: 'open'});\n\n            const stylesToCopy = document.head.querySelectorAll('link[rel=\"stylesheet\"]:not([media=\"print\"]),style');\n            const copiedStyles = Array.from(stylesToCopy).map(styleEl => styleEl.cloneNode(true));\n\n            const cmContainer = document.createElement('div');\n            cmContainer.style.pointerEvents = 'none';\n            cmContainer.contentEditable = 'false';\n            cmContainer.classList.add('CodeMirrorContainer');\n            cmContainer.classList.toggle('dark-mode', document.documentElement.classList.contains('dark-mode'));\n\n            this.shadowRoot.append(...copiedStyles, cmContainer);\n        }\n\n        getLanguage() {\n            const getLanguageFromClassList = classes => {\n                const langClasses = classes.split(' ').filter(cssClass => cssClass.startsWith('language-'));\n                return (langClasses[0] || '').replace('language-', '');\n            };\n\n            const code = this.querySelector('code');\n            const pre = this.querySelector('pre');\n            return getLanguageFromClassList(pre.className) || (code && getLanguageFromClassList(code.className)) || '';\n        }\n\n        setContent(content, language) {\n            if (this.editor) {\n                this.editor.setContent(content);\n                this.editor.setMode(language, content);\n            }\n\n            let pre = this.querySelector('pre');\n            if (!pre) {\n                pre = doc.createElement('pre');\n                this.append(pre);\n            }\n            pre.innerHTML = '';\n\n            const code = doc.createElement('code');\n            pre.append(code);\n            code.innerText = content;\n            code.className = `language-${language}`;\n        }\n\n        getContent() {\n            const code = this.querySelector('code') || this.querySelector('pre');\n            const tempEl = document.createElement('pre');\n            tempEl.innerHTML = code.innerHTML.replace(/\\ufeff/g, '');\n\n            const brs = tempEl.querySelectorAll('br');\n            for (const br of brs) {\n                br.replaceWith('\\n');\n            }\n\n            return tempEl.textContent;\n        }\n\n        connectedCallback() {\n            const connectedTime = Date.now();\n            if (this.editor) {\n                return;\n            }\n\n            this.cleanChildContent();\n            const content = this.getContent();\n            const lines = content.split('\\n').length;\n            const height = (lines * 19.2) + 18 + 24;\n            this.style.height = `${height}px`;\n\n            const container = this.shadowRoot.querySelector('.CodeMirrorContainer');\n            const renderEditor = Code => {\n                this.editor = Code.wysiwygView(container, this.shadowRoot, content, this.getLanguage());\n                setTimeout(() => {\n                    this.style.height = null;\n                }, 12);\n            };\n\n            window.importVersioned('code').then(Code => {\n                const timeout = (Date.now() - connectedTime < 20) ? 20 : 0;\n                setTimeout(() => renderEditor(Code), timeout);\n            });\n        }\n\n        cleanChildContent() {\n            const pre = this.querySelector('pre');\n            if (!pre) return;\n\n            for (const preChild of pre.childNodes) {\n                if (preChild.nodeName === '#text' && preChild.textContent === '\uFEFF') {\n                    preChild.remove();\n                }\n            }\n        }\n\n    }\n\n    win.customElements.define('code-block', CodeBlockElement);\n}\n\n/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    editor.ui.registry.addIcon('codeblock', '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5Z\"/><path d=\"M11.103 15.423c.277.277.277.738 0 .922a.692.692 0 0 1-1.106 0l-4.057-3.78a.738.738 0 0 1 0-1.107l4.057-3.872c.276-.277.83-.277 1.106 0a.724.724 0 0 1 0 1.014L7.6 12.012ZM12.897 8.577c-.245-.312-.2-.675.08-.955.28-.281.727-.27 1.027.033l4.057 3.78a.738.738 0 0 1 0 1.107l-4.057 3.872c-.277.277-.83.277-1.107 0a.724.724 0 0 1 0-1.014l3.504-3.412z\"/></svg>');\n\n    editor.ui.registry.addButton('codeeditor', {\n        tooltip: 'Insert code block',\n        icon: 'codeblock',\n        onAction() {\n            editor.execCommand('codeeditor');\n        },\n    });\n\n    editor.ui.registry.addButton('editcodeeditor', {\n        tooltip: 'Edit code block',\n        icon: 'edit-block',\n        onAction() {\n            editor.execCommand('codeeditor');\n        },\n    });\n\n    editor.addCommand('codeeditor', () => {\n        const selectedNode = editor.selection.getNode();\n        const doc = selectedNode.ownerDocument;\n        if (elemIsCodeBlock(selectedNode)) {\n            showPopupForCodeBlock(editor, selectedNode);\n        } else {\n            const textContent = editor.selection.getContent({format: 'text'});\n            const direction = document.dir === 'rtl' ? 'ltr' : '';\n            showPopup(editor, textContent, '', direction, (newCode, newLang) => {\n                const pre = doc.createElement('pre');\n                const code = doc.createElement('code');\n                code.classList.add(`language-${newLang}`);\n                code.innerText = newCode;\n                if (direction) {\n                    pre.setAttribute('dir', direction);\n                }\n\n                pre.append(code);\n                editor.insertContent(pre.outerHTML);\n            });\n        }\n    });\n\n    editor.on('dblclick', () => {\n        const selectedNode = editor.selection.getNode();\n        if (elemIsCodeBlock(selectedNode)) {\n            showPopupForCodeBlock(editor, selectedNode);\n        }\n    });\n\n    editor.on('PreInit', () => {\n        editor.parser.addNodeFilter('pre', elms => {\n            for (const el of elms) {\n                const wrapper = window.tinymce.html.Node.create('code-block', {\n                    contenteditable: 'false',\n                });\n\n                const childCodeBlock = el.children().filter(child => child.name === 'code')[0] || null;\n                const direction = el.attr('dir') || (childCodeBlock && childCodeBlock.attr('dir')) || '';\n                if (direction) {\n                    wrapper.attr('dir', direction);\n                }\n\n                const spans = el.getAll('span');\n                for (const span of spans) {\n                    span.unwrap();\n                }\n                el.attr('style', null);\n                el.wrap(wrapper);\n            }\n        });\n\n        editor.parser.addNodeFilter('code-block', elms => {\n            for (const el of elms) {\n                el.attr('contenteditable', 'false');\n            }\n        });\n\n        editor.serializer.addNodeFilter('code-block', elms => {\n            for (const el of elms) {\n                const direction = el.attr('dir');\n                if (direction && el.firstChild) {\n                    el.firstChild.attr('dir', direction);\n                } else if (el.firstChild) {\n                    el.firstChild.attr('dir', null);\n                }\n\n                el.unwrap();\n            }\n        });\n    });\n\n    editor.ui.registry.addContextToolbar('codeeditor', {\n        predicate(node) {\n            return node.nodeName.toLowerCase() === 'code-block';\n        },\n        items: 'editcodeeditor',\n        position: 'node',\n        scope: 'node',\n    });\n\n    editor.on('PreInit', () => {\n        defineCodeBlockCustomElement(editor);\n    });\n}\n\n/**\n * @return {register}\n */\nexport function getPlugin() {\n    return register;\n}\n", "function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic \u2013 if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n", "// Docs: https://www.diagrams.net/doc/faq/embed-mode\nimport * as store from './store';\nimport {ConfirmDialog} from \"../components\";\nimport {HttpError} from \"./http\";\n\ntype DrawioExportEventResponse = {\n    action: 'export',\n    format: string,\n    message: string,\n    data: string,\n    xml: string,\n};\n\ntype DrawioSaveEventResponse = {\n    action: 'save',\n    xml: string,\n};\n\nlet iFrame: HTMLIFrameElement|null = null;\nlet lastApprovedOrigin: string;\nlet onInit: () => Promise<string>;\nlet onSave: (data: string) => Promise<any>;\nconst saveBackupKey = 'last-drawing-save';\n\nfunction drawPostMessage(data: Record<any, any>): void {\n    iFrame?.contentWindow?.postMessage(JSON.stringify(data), lastApprovedOrigin);\n}\n\nfunction drawEventExport(message: DrawioExportEventResponse) {\n    store.set(saveBackupKey, message.data);\n    if (onSave) {\n        onSave(message.data).then(() => {\n            store.del(saveBackupKey);\n        });\n    }\n}\n\nfunction drawEventSave(message: DrawioSaveEventResponse) {\n    drawPostMessage({\n        action: 'export', format: 'xmlpng', xml: message.xml, spin: 'Updating drawing',\n    });\n}\n\nfunction drawEventInit() {\n    if (!onInit) return;\n    onInit().then(xml => {\n        drawPostMessage({action: 'load', autosave: 1, xml});\n    });\n}\n\nfunction drawEventConfigure() {\n    const config = {};\n    if (iFrame) {\n        window.$events.emitPublic(iFrame, 'editor-drawio::configure', {config});\n        drawPostMessage({action: 'configure', config});\n    }\n}\n\nfunction drawEventClose() {\n    // eslint-disable-next-line no-use-before-define\n    window.removeEventListener('message', drawReceive);\n    if (iFrame) document.body.removeChild(iFrame);\n}\n\n/**\n * Receive and handle a message event from the draw.io window.\n */\nfunction drawReceive(event: MessageEvent) {\n    if (!event.data || event.data.length < 1) return;\n    if (event.origin !== lastApprovedOrigin) return;\n\n    const message = JSON.parse(event.data);\n    if (message.event === 'init') {\n        drawEventInit();\n    } else if (message.event === 'exit') {\n        drawEventClose();\n    } else if (message.event === 'save') {\n        drawEventSave(message as DrawioSaveEventResponse);\n    } else if (message.event === 'export') {\n        drawEventExport(message as DrawioExportEventResponse);\n    } else if (message.event === 'configure') {\n        drawEventConfigure();\n    }\n}\n\n/**\n * Attempt to prompt and restore unsaved drawing content if existing.\n * @returns {Promise<void>}\n */\nasync function attemptRestoreIfExists() {\n    const backupVal = await store.get(saveBackupKey);\n    const dialogEl = document.getElementById('unsaved-drawing-dialog');\n\n    if (!dialogEl) {\n        console.error('Missing expected unsaved-drawing dialog');\n    }\n\n    if (backupVal && dialogEl) {\n        const dialog = window.$components.firstOnElement(dialogEl, 'confirm-dialog') as ConfirmDialog;\n        const restore = await dialog.show();\n        if (restore) {\n            onInit = async () => backupVal;\n        }\n    }\n}\n\n/**\n * Show the draw.io editor.\n * onSaveCallback must return a promise that resolves on successful save and errors on failure.\n * onInitCallback must return a promise with the xml to load for the editor.\n * Will attempt to provide an option to restore unsaved changes if found to exist.\n * onSaveCallback Is called with the drawing data on save.\n */\nexport async function show(drawioUrl: string, onInitCallback: () => Promise<string>, onSaveCallback: (data: string) => Promise<void>): Promise<void> {\n    onInit = onInitCallback;\n    onSave = onSaveCallback;\n\n    await attemptRestoreIfExists();\n\n    iFrame = document.createElement('iframe');\n    iFrame.setAttribute('frameborder', '0');\n    window.addEventListener('message', drawReceive);\n    iFrame.setAttribute('src', drawioUrl);\n    iFrame.setAttribute('class', 'fullscreen');\n    iFrame.style.backgroundColor = '#FFFFFF';\n    document.body.appendChild(iFrame);\n    lastApprovedOrigin = (new URL(drawioUrl)).origin;\n}\n\nexport async function upload(imageData: string, pageUploadedToId: string): Promise<{id: number, url: string}> {\n    const data = {\n        image: imageData,\n        uploaded_to: pageUploadedToId,\n    };\n    const resp = await window.$http.post(window.baseUrl('/images/drawio'), data);\n    return resp.data as {id: number, url: string};\n}\n\nexport function close() {\n    drawEventClose();\n}\n\n/**\n * Load an existing image, by fetching it as Base64 from the system.\n */\nexport async function load(drawingId: string): Promise<string> {\n    try {\n        const resp = await window.$http.get(window.baseUrl(`/images/drawio/base64/${drawingId}`));\n        const data = resp.data as {content: string};\n        return `data:image/png;base64,${data.content}`;\n    } catch (error) {\n        if (error instanceof HttpError) {\n            window.$events.showResponseError(error);\n        }\n        close();\n        throw error;\n    }\n}\n", "import * as DrawIO from '../services/drawio.ts';\nimport {wait} from '../services/util.ts';\n\nlet pageEditor = null;\nlet currentNode = null;\n\n/**\n * @type {WysiwygConfigOptions}\n */\nlet options = {};\n\nfunction isDrawing(node) {\n    return node.hasAttribute('drawio-diagram');\n}\n\nfunction showDrawingManager(mceEditor, selectedNode = null) {\n    pageEditor = mceEditor;\n    currentNode = selectedNode;\n\n    /** @type {ImageManager} * */\n    const imageManager = window.$components.first('image-manager');\n    imageManager.show(image => {\n        if (selectedNode) {\n            const imgElem = selectedNode.querySelector('img');\n            pageEditor.undoManager.transact(() => {\n                pageEditor.dom.setAttrib(imgElem, 'src', image.url);\n                pageEditor.dom.setAttrib(selectedNode, 'drawio-diagram', image.id);\n            });\n        } else {\n            const imgHTML = `<div drawio-diagram=\"${image.id}\" contenteditable=\"false\"><img src=\"${image.url}\"></div>`;\n            pageEditor.insertContent(imgHTML);\n        }\n    }, 'drawio');\n}\n\nasync function updateContent(pngData) {\n    const loadingImage = window.baseUrl('/loading.gif');\n\n    const handleUploadError = error => {\n        if (error.status === 413) {\n            window.$events.emit('error', options.translations.serverUploadLimitText);\n        } else {\n            window.$events.emit('error', options.translations.imageUploadErrorText);\n        }\n        console.error(error);\n    };\n\n    // Handle updating an existing image\n    if (currentNode) {\n        DrawIO.close();\n        const imgElem = currentNode.querySelector('img');\n        try {\n            const img = await DrawIO.upload(pngData, options.pageId);\n            pageEditor.undoManager.transact(() => {\n                pageEditor.dom.setAttrib(imgElem, 'src', img.url);\n                pageEditor.dom.setAttrib(currentNode, 'drawio-diagram', img.id);\n            });\n        } catch (err) {\n            handleUploadError(err);\n            throw new Error(`Failed to save image with error: ${err}`);\n        }\n        return;\n    }\n\n    await wait(5);\n\n    const id = `drawing-${Math.random().toString(16).slice(2)}`;\n    const wrapId = `drawing-wrap-${Math.random().toString(16).slice(2)}`;\n    pageEditor.insertContent(`<div drawio-diagram contenteditable=\"false\" id=\"${wrapId}\"><img src=\"${loadingImage}\" id=\"${id}\"></div>`);\n    DrawIO.close();\n\n    try {\n        const img = await DrawIO.upload(pngData, options.pageId);\n        pageEditor.undoManager.transact(() => {\n            pageEditor.dom.setAttrib(id, 'src', img.url);\n            pageEditor.dom.setAttrib(wrapId, 'drawio-diagram', img.id);\n        });\n    } catch (err) {\n        pageEditor.dom.remove(wrapId);\n        handleUploadError(err);\n        throw new Error(`Failed to save image with error: ${err}`);\n    }\n}\n\nfunction drawingInit() {\n    if (!currentNode) {\n        return Promise.resolve('');\n    }\n\n    const drawingId = currentNode.getAttribute('drawio-diagram');\n    return DrawIO.load(drawingId);\n}\n\nfunction showDrawingEditor(mceEditor, selectedNode = null) {\n    pageEditor = mceEditor;\n    currentNode = selectedNode;\n    DrawIO.show(options.drawioUrl, drawingInit, updateContent);\n}\n\n/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    editor.addCommand('drawio', () => {\n        const selectedNode = editor.selection.getNode();\n        showDrawingEditor(editor, isDrawing(selectedNode) ? selectedNode : null);\n    });\n\n    editor.ui.registry.addIcon('diagram', `<svg width=\"24\" height=\"24\" fill=\"${options.darkMode ? '#BBB' : '#000000'}\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20.716 7.639V2.845h-4.794v1.598h-7.99V2.845H3.138v4.794h1.598v7.99H3.138v4.794h4.794v-1.598h7.99v1.598h4.794v-4.794h-1.598v-7.99zM4.736 4.443h1.598V6.04H4.736zm1.598 14.382H4.736v-1.598h1.598zm9.588-1.598h-7.99v-1.598H6.334v-7.99h1.598V6.04h7.99v1.598h1.598v7.99h-1.598zm3.196 1.598H17.52v-1.598h1.598zM17.52 6.04V4.443h1.598V6.04zm-4.21 7.19h-2.79l-.582 1.599H8.643l2.717-7.191h1.119l2.724 7.19h-1.302zm-2.43-1.006h2.086l-1.039-3.06z\"/></svg>`);\n\n    editor.ui.registry.addSplitButton('drawio', {\n        tooltip: 'Insert/edit drawing',\n        icon: 'diagram',\n        onAction() {\n            editor.execCommand('drawio');\n            // Hack to de-focus the tinymce editor toolbar\n            window.document.body.dispatchEvent(new Event('mousedown', {bubbles: true}));\n        },\n        fetch(callback) {\n            callback([\n                {\n                    type: 'choiceitem',\n                    text: 'Drawing manager',\n                    value: 'drawing-manager',\n                },\n            ]);\n        },\n        onItemAction(api, value) {\n            if (value === 'drawing-manager') {\n                const selectedNode = editor.selection.getNode();\n                showDrawingManager(editor, isDrawing(selectedNode) ? selectedNode : null);\n            }\n        },\n    });\n\n    editor.on('dblclick', () => {\n        const selectedNode = editor.selection.getNode();\n        if (!isDrawing(selectedNode)) return;\n        showDrawingEditor(editor, selectedNode);\n    });\n\n    editor.on('SetContent', () => {\n        const drawings = editor.dom.select('body > div[drawio-diagram]');\n        if (!drawings.length) return;\n\n        editor.undoManager.transact(() => {\n            for (const drawing of drawings) {\n                drawing.setAttribute('contenteditable', 'false');\n            }\n        });\n    });\n}\n\n/**\n *\n * @param {WysiwygConfigOptions} providedOptions\n * @return {function(Editor, string)}\n */\nexport function getPlugin(providedOptions) {\n    options = providedOptions;\n    return register;\n}\n", "/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    editor.addCommand('InsertHorizontalRule', () => {\n        const hrElem = document.createElement('hr');\n        const cNode = editor.selection.getNode();\n        const {parentNode} = cNode;\n        parentNode.insertBefore(hrElem, cNode);\n    });\n\n    editor.ui.registry.addButton('customhr', {\n        icon: 'horizontal-rule',\n        tooltip: 'Insert horizontal line',\n        onAction() {\n            editor.execCommand('InsertHorizontalRule');\n        },\n    });\n}\n\n/**\n * @return {register}\n */\nexport function getPlugin() {\n    return register;\n}\n", "/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    // Custom Image picker button\n    editor.ui.registry.addButton('imagemanager-insert', {\n        title: 'Insert image',\n        icon: 'image',\n        tooltip: 'Insert image',\n        onAction() {\n            /** @type {ImageManager} * */\n            const imageManager = window.$components.first('image-manager');\n            imageManager.show(image => {\n                const imageUrl = image.thumbs?.display || image.url;\n                let html = `<a href=\"${image.url}\" target=\"_blank\">`;\n                html += `<img src=\"${imageUrl}\" alt=\"${image.name}\">`;\n                html += '</a>';\n                editor.execCommand('mceInsertContent', false, html);\n            }, 'gallery');\n        },\n    });\n}\n\n/**\n * @return {register}\n */\nexport function getPlugin() {\n    return register;\n}\n", "/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    const aboutDialog = {\n        title: 'About the WYSIWYG Editor',\n        url: window.baseUrl('/help/wysiwyg'),\n    };\n\n    editor.ui.registry.addButton('about', {\n        icon: 'help',\n        tooltip: 'About the editor',\n        onAction() {\n            window.tinymce.activeEditor.windowManager.openUrl(aboutDialog);\n        },\n    });\n}\n\n/**\n * @return {register}\n */\nexport function getPlugin() {\n    return register;\n}\n", "export const blockElementTypes = [\n    'p',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'div',\n    'blockquote',\n    'pre',\n    'code-block',\n    'details',\n    'ul',\n    'ol',\n    'table',\n    'hr',\n];\n", "import {blockElementTypes} from './util';\n\n/**\n * @param {Editor} editor\n */\nfunction getSelectedDetailsBlock(editor) {\n    return editor.selection.getNode().closest('details');\n}\n\nfunction setSummary(editor, summaryContent) {\n    const details = getSelectedDetailsBlock(editor);\n    if (!details) return;\n\n    editor.undoManager.transact(() => {\n        let summary = details.querySelector('summary');\n        if (!summary) {\n            summary = document.createElement('summary');\n            details.prepend(summary);\n        }\n        summary.textContent = summaryContent;\n    });\n}\n\n/**\n * @param {Editor} editor\n */\nfunction detailsDialog(editor) {\n    return {\n        title: 'Edit collapsible block',\n        body: {\n            type: 'panel',\n            items: [\n                {\n                    type: 'input',\n                    name: 'summary',\n                    label: 'Toggle label',\n                },\n            ],\n        },\n        buttons: [\n            {\n                type: 'cancel',\n                text: 'Cancel',\n            },\n            {\n                type: 'submit',\n                text: 'Save',\n                primary: true,\n            },\n        ],\n        onSubmit(api) {\n            const {summary} = api.getData();\n            setSummary(editor, summary);\n            api.close();\n        },\n    };\n}\n\n/**\n * @param {Element} element\n */\nfunction getSummaryTextFromDetails(element) {\n    const summary = element.querySelector('summary');\n    if (!summary) {\n        return '';\n    }\n    return summary.textContent;\n}\n\n/**\n * @param {Editor} editor\n */\nfunction showDetailLabelEditWindow(editor) {\n    const details = getSelectedDetailsBlock(editor);\n    const dialog = editor.windowManager.open(detailsDialog(editor));\n    dialog.setData({summary: getSummaryTextFromDetails(details)});\n}\n\n/**\n * @param {Editor} editor\n */\nfunction unwrapDetailsInSelection(editor) {\n    const details = editor.selection.getNode().closest('details');\n    const selectionBm = editor.selection.getBookmark();\n\n    if (details) {\n        const elements = details.querySelectorAll('details > *:not(summary, doc-root), doc-root > *');\n\n        editor.undoManager.transact(() => {\n            for (const element of elements) {\n                details.parentNode.insertBefore(element, details);\n            }\n            details.remove();\n        });\n    }\n\n    editor.focus();\n    editor.selection.moveToBookmark(selectionBm);\n}\n\n/**\n * @param {tinymce.html.Node} detailsEl\n */\nfunction unwrapDetailsEditable(detailsEl) {\n    detailsEl.attr('contenteditable', null);\n    let madeUnwrap = false;\n    for (const child of detailsEl.children()) {\n        if (child.name === 'doc-root') {\n            child.unwrap();\n            madeUnwrap = true;\n        }\n    }\n\n    if (madeUnwrap) {\n        unwrapDetailsEditable(detailsEl);\n    }\n}\n\n/**\n * @param {tinymce.html.Node} detailsEl\n */\nfunction ensureDetailsWrappedInEditable(detailsEl) {\n    unwrapDetailsEditable(detailsEl);\n\n    detailsEl.attr('contenteditable', 'false');\n    const rootWrap = window.tinymce.html.Node.create('doc-root', {contenteditable: 'true'});\n    let previousBlockWrap = null;\n\n    for (const child of detailsEl.children()) {\n        if (child.name === 'summary') continue;\n        const isBlock = blockElementTypes.includes(child.name);\n\n        if (!isBlock) {\n            if (!previousBlockWrap) {\n                previousBlockWrap = window.tinymce.html.Node.create('p');\n                rootWrap.append(previousBlockWrap);\n            }\n            previousBlockWrap.append(child);\n        } else {\n            rootWrap.append(child);\n            previousBlockWrap = null;\n        }\n    }\n\n    detailsEl.append(rootWrap);\n}\n\n/**\n * @param {Editor} editor\n */\nfunction setupElementFilters(editor) {\n    editor.parser.addNodeFilter('details', elms => {\n        for (const el of elms) {\n            ensureDetailsWrappedInEditable(el);\n        }\n    });\n\n    editor.serializer.addNodeFilter('details', elms => {\n        for (const el of elms) {\n            unwrapDetailsEditable(el);\n            el.attr('open', null);\n        }\n    });\n\n    editor.serializer.addNodeFilter('doc-root', elms => {\n        for (const el of elms) {\n            el.unwrap();\n        }\n    });\n}\n\n/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    editor.ui.registry.addIcon('details', '<svg width=\"24\" height=\"24\"><path d=\"M8.2 9a.5.5 0 0 0-.4.8l4 5.6a.5.5 0 0 0 .8 0l4-5.6a.5.5 0 0 0-.4-.8ZM20.122 18.151h-16c-.964 0-.934 2.7 0 2.7h16c1.139 0 1.173-2.7 0-2.7zM20.122 3.042h-16c-.964 0-.934 2.7 0 2.7h16c1.139 0 1.173-2.7 0-2.7z\"/></svg>');\n    editor.ui.registry.addIcon('togglefold', '<svg height=\"24\"  width=\"24\"><path d=\"M8.12 19.3c.39.39 1.02.39 1.41 0L12 16.83l2.47 2.47c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-3.17-3.17c-.39-.39-1.02-.39-1.41 0l-3.17 3.17c-.4.38-.4 1.02-.01 1.41zm7.76-14.6c-.39-.39-1.02-.39-1.41 0L12 7.17 9.53 4.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.03 0 1.42l3.17 3.17c.39.39 1.02.39 1.41 0l3.17-3.17c.4-.39.4-1.03.01-1.42z\"/></svg>');\n    editor.ui.registry.addIcon('togglelabel', '<svg height=\"18\" width=\"18\" viewBox=\"0 0 24 24\"><path d=\"M21.41,11.41l-8.83-8.83C12.21,2.21,11.7,2,11.17,2H4C2.9,2,2,2.9,2,4v7.17c0,0.53,0.21,1.04,0.59,1.41l8.83,8.83 c0.78,0.78,2.05,0.78,2.83,0l7.17-7.17C22.2,13.46,22.2,12.2,21.41,11.41z M6.5,8C5.67,8,5,7.33,5,6.5S5.67,5,6.5,5S8,5.67,8,6.5 S7.33,8,6.5,8z\"/></svg>');\n\n    editor.ui.registry.addButton('details', {\n        icon: 'details',\n        tooltip: 'Insert collapsible block',\n        onAction() {\n            editor.execCommand('InsertDetailsBlock');\n        },\n    });\n\n    editor.ui.registry.addButton('removedetails', {\n        icon: 'table-delete-table',\n        tooltip: 'Unwrap',\n        onAction() {\n            unwrapDetailsInSelection(editor);\n        },\n    });\n\n    editor.ui.registry.addButton('editdetials', {\n        icon: 'togglelabel',\n        tooltip: 'Edit label',\n        onAction() {\n            showDetailLabelEditWindow(editor);\n        },\n    });\n\n    editor.on('dblclick', event => {\n        if (!getSelectedDetailsBlock(editor) || event.target.closest('doc-root')) return;\n        showDetailLabelEditWindow(editor);\n    });\n\n    editor.ui.registry.addButton('toggledetails', {\n        icon: 'togglefold',\n        tooltip: 'Toggle open/closed',\n        onAction() {\n            const details = getSelectedDetailsBlock(editor);\n            details.toggleAttribute('open');\n            editor.focus();\n        },\n    });\n\n    editor.addCommand('InsertDetailsBlock', () => {\n        let content = editor.selection.getContent({format: 'html'});\n        const details = document.createElement('details');\n        const summary = document.createElement('summary');\n        const id = `details-${Date.now()}`;\n        details.setAttribute('data-id', id);\n        details.appendChild(summary);\n\n        if (!content) {\n            content = '<p><br></p>';\n        }\n\n        details.innerHTML += content;\n        editor.insertContent(details.outerHTML);\n        editor.focus();\n\n        const domDetails = editor.dom.select(`[data-id=\"${id}\"]`)[0] || null;\n        if (domDetails) {\n            const firstChild = domDetails.querySelector('doc-root > *');\n            if (firstChild) {\n                firstChild.focus();\n            }\n            domDetails.removeAttribute('data-id');\n        }\n    });\n\n    editor.ui.registry.addContextToolbar('details', {\n        predicate(node) {\n            return node.nodeName.toLowerCase() === 'details';\n        },\n        items: 'editdetials toggledetails removedetails',\n        position: 'node',\n        scope: 'node',\n    });\n\n    editor.on('PreInit', () => {\n        setupElementFilters(editor);\n    });\n}\n\n/**\n * @return {register}\n */\nexport function getPlugin() {\n    return register;\n}\n", "/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    editor.ui.registry.addIcon('tableclearformatting', '<svg xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" viewBox=\"0 0 24 24\"><path d=\"M15.53088 4.64727v-.82364c0-.453-.37063-.82363-.82363-.82363H4.82363C4.37063 3 4 3.37064 4 3.82363v3.29454c0 .453.37064.82364.82363.82364h9.88362c.453 0 .82363-.37064.82363-.82364v-.82363h.82364v3.29454H8.11817v7.4127c0 .453.37064.82364.82364.82364h1.64727c.453 0 .82363-.37064.82363-.82364v-5.76544h6.58907V4.64727Z\"/><path d=\"m18.42672 19.51563-1.54687-1.54688-1.54688 1.54688c-.26751.2675-.70124.2675-.96875 0-.26751-.26752-.26751-.70124 0-.96876L15.9111 17l-1.54688-1.54688c-.26751-.2675-.26751-.70123 0-.96875.26751-.2675.70124-.2675.96875 0l1.54688 1.54688 1.54687-1.54688c.26751-.2675.70124-.2675.96875 0 .26751.26752.26751.70124 0 .96875L17.8486 17l1.54687 1.54688c.26751.2675.26751.70123 0 .96874-.26751.26752-.70124.26752-.96875 0z\"/></svg>');\n\n    const tableFirstRowContextSpec = {\n        items: ' | tablerowheader',\n        predicate(elem) {\n            const isTable = elem.nodeName.toLowerCase() === 'table';\n            const selectionNode = editor.selection.getNode();\n            const parentTable = selectionNode.closest('table');\n            if (!isTable || !parentTable) {\n                return false;\n            }\n\n            const firstRow = parentTable.querySelector('tr');\n            return firstRow.contains(selectionNode);\n        },\n        position: 'node',\n        scope: 'node',\n    };\n    editor.ui.registry.addContextToolbar('customtabletoolbarfirstrow', tableFirstRowContextSpec);\n\n    editor.addCommand('tableclearformatting', () => {\n        const table = editor.dom.getParent(editor.selection.getStart(), 'table');\n        if (!table) {\n            return;\n        }\n\n        const attrsToRemove = ['class', 'style', 'width', 'height'];\n        const styled = [table, ...table.querySelectorAll(attrsToRemove.map(a => `[${a}]`).join(','))];\n        for (const elem of styled) {\n            for (const attr of attrsToRemove) {\n                elem.removeAttribute(attr);\n            }\n        }\n    });\n\n    editor.addCommand('tableclearsizes', () => {\n        const table = editor.dom.getParent(editor.selection.getStart(), 'table');\n        if (!table) {\n            return;\n        }\n\n        const targets = [table, ...table.querySelectorAll('tr,td,th,tbody,thead,tfoot,th>*,td>*')];\n        for (const elem of targets) {\n            elem.removeAttribute('width');\n            elem.removeAttribute('height');\n            elem.style.height = null;\n            elem.style.width = null;\n        }\n    });\n\n    const onPreInit = () => {\n        const exitingButtons = editor.ui.registry.getAll().buttons;\n\n        editor.ui.registry.addMenuButton('customtable', {\n            ...exitingButtons.table,\n            fetch: callback => callback('inserttable | cell row column | advtablesort | tableprops tableclearformatting tableclearsizes deletetable'),\n        });\n\n        editor.ui.registry.addMenuItem('tableclearformatting', {\n            icon: 'tableclearformatting',\n            text: 'Clear table formatting',\n            onSetup: exitingButtons.tableprops.onSetup,\n            onAction() {\n                editor.execCommand('tableclearformatting');\n            },\n        });\n\n        editor.ui.registry.addMenuItem('tableclearsizes', {\n            icon: 'resize',\n            text: 'Resize to contents',\n            onSetup: exitingButtons.tableprops.onSetup,\n            onAction() {\n                editor.execCommand('tableclearsizes');\n            },\n        });\n\n        editor.off('PreInit', onPreInit);\n    };\n\n    editor.on('PreInit', onPreInit);\n}\n\n/**\n * @return {register}\n */\nexport function getPlugin() {\n    return register;\n}\n", "/**\n * @param {Element} element\n * @return {boolean}\n */\nfunction elementWithinTaskList(element) {\n    const listEl = element.closest('li');\n    return listEl && listEl.parentNode.nodeName === 'UL' && listEl.classList.contains('task-list-item');\n}\n\n/**\n * @param {MouseEvent} event\n * @param {Element} clickedEl\n * @param {Editor} editor\n */\nfunction handleTaskListItemClick(event, clickedEl, editor) {\n    const bounds = clickedEl.getBoundingClientRect();\n    const withinBounds = event.clientX <= bounds.right\n        && event.clientX >= bounds.left\n        && event.clientY >= bounds.top\n        && event.clientY <= bounds.bottom;\n\n    // Outside of the task list item bounds mean we're probably clicking the pseudo-element.\n    if (!withinBounds) {\n        editor.undoManager.transact(() => {\n            if (clickedEl.hasAttribute('checked')) {\n                clickedEl.removeAttribute('checked');\n            } else {\n                clickedEl.setAttribute('checked', 'checked');\n            }\n        });\n    }\n}\n\n/**\n * @param {AstNode} node\n */\nfunction parseTaskListNode(node) {\n    // Force task list item class\n    node.attr('class', 'task-list-item');\n\n    // Copy checkbox status and remove checkbox within editor\n    for (const child of node.children()) {\n        if (child.name === 'input') {\n            if (child.attr('checked') === 'checked') {\n                node.attr('checked', 'checked');\n            }\n            child.remove();\n        }\n    }\n}\n\n/**\n * @param {AstNode} node\n */\nfunction serializeTaskListNode(node) {\n    // Get checked status and clean it from list node\n    const isChecked = node.attr('checked') === 'checked';\n    node.attr('checked', null);\n\n    const inputAttrs = {type: 'checkbox', disabled: 'disabled'};\n    if (isChecked) {\n        inputAttrs.checked = 'checked';\n    }\n\n    // Create & insert checkbox input element\n    const checkbox = window.tinymce.html.Node.create('input', inputAttrs);\n    checkbox.shortEnded = true;\n\n    if (node.firstChild) {\n        node.insert(checkbox, node.firstChild, true);\n    } else {\n        node.append(checkbox);\n    }\n}\n\n/**\n * @param {Editor} editor\n */\nfunction register(editor) {\n    // Tasklist UI buttons\n    editor.ui.registry.addIcon('tasklist', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22,8c0-0.55-0.45-1-1-1h-7c-0.55,0-1,0.45-1,1s0.45,1,1,1h7C21.55,9,22,8.55,22,8z M13,16c0,0.55,0.45,1,1,1h7 c0.55,0,1-0.45,1-1c0-0.55-0.45-1-1-1h-7C13.45,15,13,15.45,13,16z M10.47,4.63c0.39,0.39,0.39,1.02,0,1.41l-4.23,4.25 c-0.39,0.39-1.02,0.39-1.42,0L2.7,8.16c-0.39-0.39-0.39-1.02,0-1.41c0.39-0.39,1.02-0.39,1.41,0l1.42,1.42l3.54-3.54 C9.45,4.25,10.09,4.25,10.47,4.63z M10.48,12.64c0.39,0.39,0.39,1.02,0,1.41l-4.23,4.25c-0.39,0.39-1.02,0.39-1.42,0L2.7,16.16 c-0.39-0.39-0.39-1.02,0-1.41s1.02-0.39,1.41,0l1.42,1.42l3.54-3.54C9.45,12.25,10.09,12.25,10.48,12.64L10.48,12.64z\"/></svg>');\n    editor.ui.registry.addToggleButton('tasklist', {\n        tooltip: 'Task list',\n        icon: 'tasklist',\n        active: false,\n        onAction(api) {\n            if (api.isActive()) {\n                editor.execCommand('RemoveList');\n            } else {\n                editor.execCommand('InsertUnorderedList', null, {\n                    'list-item-attributes': {\n                        class: 'task-list-item',\n                    },\n                    'list-style-type': 'tasklist',\n                });\n            }\n        },\n        onSetup(api) {\n            editor.on('NodeChange', event => {\n                const parentListEl = event.parents.find(el => el.nodeName === 'LI');\n                const inList = parentListEl && parentListEl.classList.contains('task-list-item');\n                api.setActive(Boolean(inList));\n            });\n        },\n    });\n\n    // Tweak existing bullet list button active state to not be active\n    // when we're in a task list.\n    const existingBullListButton = editor.ui.registry.getAll().buttons.bullist;\n    existingBullListButton.onSetup = function customBullListOnSetup(api) {\n        editor.on('NodeChange', event => {\n            const parentList = event.parents.find(el => el.nodeName === 'LI');\n            const inTaskList = parentList && parentList.classList.contains('task-list-item');\n            const inUlList = parentList && parentList.parentNode.nodeName === 'UL';\n            api.setActive(Boolean(inUlList && !inTaskList));\n        });\n    };\n    existingBullListButton.onAction = function customBullListOnAction() {\n        // Cheeky hack to prevent list toggle action treating tasklists as normal\n        // unordered lists which would unwrap the list on toggle from tasklist to bullet list.\n        // Instead we quickly jump through an ordered list first if we're within a tasklist.\n        if (elementWithinTaskList(editor.selection.getNode())) {\n            editor.execCommand('InsertOrderedList', null, {\n                'list-item-attributes': {class: null},\n            });\n        }\n\n        editor.execCommand('InsertUnorderedList', null, {\n            'list-item-attributes': {class: null},\n        });\n    };\n    // Tweak existing number list to not allow classes on child items\n    const existingNumListButton = editor.ui.registry.getAll().buttons.numlist;\n    existingNumListButton.onAction = function customNumListButtonOnAction() {\n        editor.execCommand('InsertOrderedList', null, {\n            'list-item-attributes': {class: null},\n        });\n    };\n\n    // Setup filters on pre-init\n    editor.on('PreInit', () => {\n        editor.parser.addNodeFilter('li', nodes => {\n            for (const node of nodes) {\n                if (node.attributes.map.class === 'task-list-item') {\n                    parseTaskListNode(node);\n                }\n            }\n        });\n        editor.serializer.addNodeFilter('li', nodes => {\n            for (const node of nodes) {\n                if (node.attributes.map.class === 'task-list-item') {\n                    serializeTaskListNode(node);\n                }\n            }\n        });\n    });\n\n    // Handle checkbox click in editor\n    editor.on('click', event => {\n        const clickedEl = event.target;\n        if (clickedEl.nodeName === 'LI' && clickedEl.classList.contains('task-list-item')) {\n            handleTaskListItemClick(event, clickedEl, editor);\n            event.preventDefault();\n        }\n    });\n}\n\n/**\n * @return {register}\n */\nexport function getPlugin() {\n    return register;\n}\n", "/**\n * Handle alignment for embed (iframe/video) content.\n * TinyMCE built-in handling doesn't work well for these when classes are used for\n * alignment, since the editor wraps these elements in a non-editable preview span\n * which looses tracking and setting of alignment options.\n * Here we manually manage these properties and formatting events, by effectively\n * syncing the alignment classes to the parent preview span.\n * @param {Editor} editor\n */\nexport function handleEmbedAlignmentChanges(editor) {\n    function updateClassesForPreview(previewElem) {\n        const mediaTarget = previewElem.querySelector('iframe, video');\n        if (!mediaTarget) {\n            return;\n        }\n\n        const alignmentClasses = [...mediaTarget.classList.values()].filter(c => c.startsWith('align-'));\n        const previewAlignClasses = [...previewElem.classList.values()].filter(c => c.startsWith('align-'));\n        previewElem.classList.remove(...previewAlignClasses);\n        previewElem.classList.add(...alignmentClasses);\n    }\n\n    editor.on('SetContent', () => {\n        const previewElems = editor.dom.select('span.mce-preview-object');\n        for (const previewElem of previewElems) {\n            updateClassesForPreview(previewElem);\n        }\n    });\n\n    editor.on('FormatApply', event => {\n        const isAlignment = event.format.startsWith('align');\n        const isElement = event.node instanceof editor.dom.doc.defaultView.HTMLElement;\n        if (!isElement || !isAlignment || !event.node.matches('.mce-preview-object')) {\n            return;\n        }\n\n        const realTarget = event.node.querySelector('iframe, video');\n        if (realTarget) {\n            const className = (editor.formatter.get(event.format)[0]?.classes || [])[0];\n            const toAdd = !realTarget.classList.contains(className);\n\n            const wrapperClasses = (event.node.getAttribute('data-mce-p-class') || '').split(' ');\n            const wrapperClassesFiltered = wrapperClasses.filter(c => !c.startsWith('align-'));\n            if (toAdd) {\n                wrapperClassesFiltered.push(className);\n            }\n\n            const classesToApply = wrapperClassesFiltered.join(' ');\n            event.node.setAttribute('data-mce-p-class', classesToApply);\n\n            realTarget.setAttribute('class', classesToApply);\n            editor.formatter.apply(event.format, {}, realTarget);\n            updateClassesForPreview(event.node);\n        }\n    });\n}\n\n/**\n * Cleans up and removes text-alignment specific properties on all child elements.\n * @param {HTMLElement} element\n */\nfunction cleanChildAlignment(element) {\n    const alignedChildren = element.querySelectorAll('[align],[style*=\"text-align\"],.align-center,.align-left,.align-right');\n    for (const child of alignedChildren) {\n        child.removeAttribute('align');\n        child.style.textAlign = null;\n        child.classList.remove('align-center', 'align-right', 'align-left');\n    }\n}\n\n/**\n * Cleans up the direction property for an element.\n * Removes all inline direction control from child elements.\n * Removes non \"dir\" attribute direction control from provided element.\n * @param {HTMLElement} element\n */\nfunction cleanElementDirection(element) {\n    const directionChildren = element.querySelectorAll('[dir],[style*=\"direction\"]');\n    for (const child of directionChildren) {\n        child.removeAttribute('dir');\n        child.style.direction = null;\n    }\n\n    cleanChildAlignment(element);\n    element.style.direction = null;\n    element.style.textAlign = null;\n    element.removeAttribute('align');\n}\n\n/**\n * @typedef {Function} TableCellHandler\n * @param {HTMLTableCellElement} cell\n */\n\n/**\n * This tracks table cell range selection, so we can apply custom handling where\n * required to actions applied to such selections.\n * The events used don't seem to be advertised by TinyMCE.\n * Found at https://github.com/tinymce/tinymce/blob/6.8.3/modules/tinymce/src/models/dom/main/ts/table/api/Events.ts\n * @param {Editor} editor\n */\nexport function handleTableCellRangeEvents(editor) {\n    /** @var {HTMLTableCellElement[]} * */\n    let selectedCells = [];\n\n    editor.on('TableSelectionChange', event => {\n        selectedCells = (event.cells || []).map(cell => cell.dom);\n    });\n    editor.on('TableSelectionClear', () => {\n        selectedCells = [];\n    });\n\n    /**\n     * @type {Object<String, TableCellHandler>}\n     */\n    const actionByCommand = {\n        // TinyMCE does not seem to do a great job on clearing styles in complex\n        // scenarios (like copied word content) when a range of table cells\n        // are selected. Here we watch for clear formatting events, so some manual\n        // cleanup can be performed.\n        RemoveFormat: cell => {\n            const attrsToRemove = ['class', 'style', 'width', 'height', 'align'];\n            for (const attr of attrsToRemove) {\n                cell.removeAttribute(attr);\n            }\n        },\n\n        // TinyMCE does not apply direction events to table cell range selections\n        // so here we hastily patch in that ability by setting the direction ourselves\n        // when a direction event is fired.\n        mceDirectionLTR: cell => {\n            cell.setAttribute('dir', 'ltr');\n            cleanElementDirection(cell);\n        },\n        mceDirectionRTL: cell => {\n            cell.setAttribute('dir', 'rtl');\n            cleanElementDirection(cell);\n        },\n\n        // The \"align\" attribute can exist on table elements so this clears\n        // the attribute, and also clears common child alignment properties,\n        // when a text direction action is made for a table cell range.\n        JustifyLeft: cell => {\n            cell.removeAttribute('align');\n            cleanChildAlignment(cell);\n        },\n    };\n\n    // Copy justify left action to other alignment actions\n    actionByCommand.JustifyRight = actionByCommand.JustifyLeft;\n    actionByCommand.JustifyCenter = actionByCommand.JustifyLeft;\n    actionByCommand.JustifyFull = actionByCommand.JustifyLeft;\n\n    editor.on('ExecCommand', event => {\n        const action = actionByCommand[event.command];\n        if (action) {\n            for (const cell of selectedCells) {\n                action(cell);\n            }\n        }\n    });\n}\n\n/**\n * Direction control might not work if there are other unexpected direction-handling styles\n * or attributes involved nearby. This watches for direction change events to clean\n * up direction controls, removing non-dir-attr direction controls, while removing\n * directions from child elements that may be involved.\n * @param {Editor} editor\n */\nexport function handleTextDirectionCleaning(editor) {\n    editor.on('ExecCommand', event => {\n        const command = event.command;\n        if (command !== 'mceDirectionLTR' && command !== 'mceDirectionRTL') {\n            return;\n        }\n\n        const blocks = editor.selection.getSelectedBlocks();\n        for (const block of blocks) {\n            cleanElementDirection(block);\n        }\n    });\n}\n", "import {register as registerShortcuts} from './shortcuts';\nimport {listen as listenForCommonEvents} from './common-events';\nimport {scrollToQueryString} from './scrolling';\nimport {listenForDragAndPaste} from './drop-paste-handling';\nimport {getPrimaryToolbar, registerAdditionalToolbars} from './toolbars';\nimport {registerCustomIcons} from './icons';\nimport {setupFilters} from './filters';\n\nimport {getPlugin as getCodeeditorPlugin} from './plugin-codeeditor';\nimport {getPlugin as getDrawioPlugin} from './plugin-drawio';\nimport {getPlugin as getCustomhrPlugin} from './plugins-customhr';\nimport {getPlugin as getImagemanagerPlugin} from './plugins-imagemanager';\nimport {getPlugin as getAboutPlugin} from './plugins-about';\nimport {getPlugin as getDetailsPlugin} from './plugins-details';\nimport {getPlugin as getTableAdditionsPlugin} from './plugins-table-additions';\nimport {getPlugin as getTasklistPlugin} from './plugins-tasklist';\nimport {\n    handleTableCellRangeEvents,\n    handleEmbedAlignmentChanges,\n    handleTextDirectionCleaning,\n} from './fixes';\n\nconst styleFormats = [\n    {title: 'Large Header', format: 'h2', preview: 'color: blue;'},\n    {title: 'Medium Header', format: 'h3'},\n    {title: 'Small Header', format: 'h4'},\n    {title: 'Tiny Header', format: 'h5'},\n    {\n        title: 'Paragraph', format: 'p', exact: true, classes: '',\n    },\n    {title: 'Blockquote', format: 'blockquote'},\n    {\n        title: 'Callouts',\n        items: [\n            {title: 'Information', format: 'calloutinfo'},\n            {title: 'Success', format: 'calloutsuccess'},\n            {title: 'Warning', format: 'calloutwarning'},\n            {title: 'Danger', format: 'calloutdanger'},\n        ],\n    },\n];\n\nconst formats = {\n    alignleft: {selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img,iframe,video', classes: 'align-left'},\n    aligncenter: {selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img,iframe,video', classes: 'align-center'},\n    alignright: {selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img,iframe,video', classes: 'align-right'},\n    calloutsuccess: {block: 'p', exact: true, attributes: {class: 'callout success'}},\n    calloutinfo: {block: 'p', exact: true, attributes: {class: 'callout info'}},\n    calloutwarning: {block: 'p', exact: true, attributes: {class: 'callout warning'}},\n    calloutdanger: {block: 'p', exact: true, attributes: {class: 'callout danger'}},\n};\n\nconst colorMap = [\n    '#BFEDD2', '',\n    '#FBEEB8', '',\n    '#F8CAC6', '',\n    '#ECCAFA', '',\n    '#C2E0F4', '',\n\n    '#2DC26B', '',\n    '#F1C40F', '',\n    '#E03E2D', '',\n    '#B96AD9', '',\n    '#3598DB', '',\n\n    '#169179', '',\n    '#E67E23', '',\n    '#BA372A', '',\n    '#843FA1', '',\n    '#236FA1', '',\n\n    '#ECF0F1', '',\n    '#CED4D9', '',\n    '#95A5A6', '',\n    '#7E8C8D', '',\n    '#34495E', '',\n\n    '#000000', '',\n    '#ffffff', '',\n];\n\nfunction filePickerCallback(callback, value, meta) {\n    // field_name, url, type, win\n    if (meta.filetype === 'file') {\n        /** @type {EntitySelectorPopup} * */\n        const selector = window.$components.first('entity-selector-popup');\n        const selectionText = this.selection.getContent({format: 'text'}).trim();\n        selector.show(entity => {\n            callback(entity.link, {\n                text: entity.name,\n                title: entity.name,\n            });\n        }, {\n            initialValue: selectionText,\n            searchEndpoint: '/search/entity-selector',\n            entityTypes: 'page,book,chapter,bookshelf',\n            entityPermission: 'view',\n        });\n    }\n\n    if (meta.filetype === 'image') {\n        // Show image manager\n        /** @type {ImageManager} * */\n        const imageManager = window.$components.first('image-manager');\n        imageManager.show(image => {\n            callback(image.url, {alt: image.name});\n        }, 'gallery');\n    }\n}\n\n/**\n * @param {WysiwygConfigOptions} options\n * @return {string[]}\n */\nfunction gatherPlugins(options) {\n    const plugins = [\n        'image',\n        'table',\n        'link',\n        'autolink',\n        'fullscreen',\n        'code',\n        'customhr',\n        'autosave',\n        'lists',\n        'codeeditor',\n        'media',\n        'imagemanager',\n        'about',\n        'details',\n        'tasklist',\n        'tableadditions',\n        options.textDirection === 'rtl' ? 'directionality' : '',\n    ];\n\n    window.tinymce.PluginManager.add('codeeditor', getCodeeditorPlugin());\n    window.tinymce.PluginManager.add('customhr', getCustomhrPlugin());\n    window.tinymce.PluginManager.add('imagemanager', getImagemanagerPlugin());\n    window.tinymce.PluginManager.add('about', getAboutPlugin());\n    window.tinymce.PluginManager.add('details', getDetailsPlugin());\n    window.tinymce.PluginManager.add('tasklist', getTasklistPlugin());\n    window.tinymce.PluginManager.add('tableadditions', getTableAdditionsPlugin());\n\n    if (options.drawioUrl) {\n        window.tinymce.PluginManager.add('drawio', getDrawioPlugin(options));\n        plugins.push('drawio');\n    }\n\n    return plugins.filter(plugin => Boolean(plugin));\n}\n\n/**\n * Fetch custom HTML head content nodes from the outer page head\n * and add them to the given editor document.\n * @param {Document} editorDoc\n */\nfunction addCustomHeadContent(editorDoc) {\n    const headContentLines = document.head.innerHTML.split('\\n');\n    const startLineIndex = headContentLines.findIndex(line => line.trim() === '<!-- Start: custom user content -->');\n    const endLineIndex = headContentLines.findIndex(line => line.trim() === '<!-- End: custom user content -->');\n    if (startLineIndex === -1 || endLineIndex === -1) {\n        return;\n    }\n\n    const customHeadHtml = headContentLines.slice(startLineIndex + 1, endLineIndex).join('\\n');\n    const el = editorDoc.createElement('div');\n    el.innerHTML = customHeadHtml;\n\n    editorDoc.head.append(...el.children);\n}\n\n/**\n * @param {WysiwygConfigOptions} options\n * @return {function(Editor)}\n */\nfunction getSetupCallback(options) {\n    return function setupCallback(editor) {\n        function editorChange() {\n            if (options.darkMode) {\n                editor.contentDocument.documentElement.classList.add('dark-mode');\n            }\n            window.$events.emit('editor-html-change', '');\n        }\n\n        editor.on('ExecCommand change input NodeChange ObjectResized', editorChange);\n        listenForCommonEvents(editor);\n        listenForDragAndPaste(editor, options);\n\n        editor.on('init', () => {\n            editorChange();\n            scrollToQueryString(editor);\n            window.editor = editor;\n            registerShortcuts(editor);\n        });\n\n        editor.on('PreInit', () => {\n            setupFilters(editor);\n        });\n\n        handleEmbedAlignmentChanges(editor);\n        handleTableCellRangeEvents(editor);\n        handleTextDirectionCleaning(editor);\n\n        // Custom handler hook\n        window.$events.emitPublic(options.containerElement, 'editor-tinymce::setup', {editor});\n\n        // Inline code format button\n        editor.ui.registry.addButton('inlinecode', {\n            tooltip: 'Inline code',\n            icon: 'sourcecode',\n            onAction() {\n                editor.execCommand('mceToggleFormat', false, 'code');\n            },\n        });\n    };\n}\n\n/**\n * @param {WysiwygConfigOptions} options\n */\nfunction getContentStyle(options) {\n    return `\nhtml, body, html.dark-mode {\n    background: ${options.darkMode ? '#222' : '#fff'};\n} \nbody {\n    padding-left: 15px !important;\n    padding-right: 15px !important; \n    height: initial !important;\n    margin:0!important; \n    margin-left: auto! important;\n    margin-right: auto !important;\n    overflow-y: hidden !important;\n}`.trim().replace('\\n', '');\n}\n\n/**\n * @param {WysiwygConfigOptions} options\n * @return {Object}\n */\nexport function buildForEditor(options) {\n    // Set language\n    window.tinymce.addI18n(options.language, options.translationMap);\n\n    // BookStack Version\n    const version = document.querySelector('script[src*=\"/dist/app.js\"]').getAttribute('src').split('?version=')[1];\n\n    // Return config object\n    return {\n        width: '100%',\n        height: '100%',\n        selector: '#html-editor',\n        cache_suffix: `?version=${version}`,\n        content_css: [\n            window.baseUrl('/dist/styles.css'),\n        ],\n        branding: false,\n        skin: options.darkMode ? 'tinymce-5-dark' : 'tinymce-5',\n        body_class: 'page-content',\n        browser_spellcheck: true,\n        relative_urls: false,\n        language: options.language,\n        directionality: options.textDirection,\n        remove_script_host: false,\n        document_base_url: window.baseUrl('/'),\n        end_container_on_empty_block: true,\n        remove_trailing_brs: false,\n        statusbar: false,\n        menubar: false,\n        paste_data_images: false,\n        extended_valid_elements: 'pre[*],svg[*],div[drawio-diagram],details[*],summary[*],div[*],li[class|checked|style]',\n        automatic_uploads: false,\n        custom_elements: 'doc-root,code-block',\n        valid_children: [\n            '-div[p|h1|h2|h3|h4|h5|h6|blockquote|code-block]',\n            '+div[pre|img]',\n            '-doc-root[doc-root|#text]',\n            '-li[details]',\n            '+code-block[pre]',\n            '+doc-root[p|h1|h2|h3|h4|h5|h6|blockquote|code-block|div|hr]',\n        ].join(','),\n        plugins: gatherPlugins(options),\n        contextmenu: false,\n        toolbar: getPrimaryToolbar(options),\n        content_style: getContentStyle(options),\n        style_formats: styleFormats,\n        style_formats_merge: false,\n        media_alt_source: false,\n        media_poster: false,\n        formats,\n        table_style_by_css: true,\n        table_use_colgroups: true,\n        file_picker_types: 'file image',\n        color_map: colorMap,\n        file_picker_callback: filePickerCallback,\n        paste_preprocess(plugin, args) {\n            const {content} = args;\n            if (content.indexOf('<img src=\"file://') !== -1) {\n                args.content = '';\n            }\n        },\n        init_instance_callback(editor) {\n            addCustomHeadContent(editor.getDoc());\n        },\n        setup(editor) {\n            registerCustomIcons(editor);\n            registerAdditionalToolbars(editor);\n            getSetupCallback(options)(editor);\n        },\n    };\n}\n\n/**\n * @param {WysiwygConfigOptions} options\n * @return {RawEditorOptions}\n */\nexport function buildForInput(options) {\n    // Set language\n    window.tinymce.addI18n(options.language, options.translationMap);\n\n    // BookStack Version\n    const version = document.querySelector('script[src*=\"/dist/app.js\"]').getAttribute('src').split('?version=')[1];\n\n    // Return config object\n    return {\n        width: '100%',\n        height: '185px',\n        target: options.containerElement,\n        cache_suffix: `?version=${version}`,\n        content_css: [\n            window.baseUrl('/dist/styles.css'),\n        ],\n        branding: false,\n        skin: options.darkMode ? 'tinymce-5-dark' : 'tinymce-5',\n        body_class: 'wysiwyg-input',\n        browser_spellcheck: true,\n        relative_urls: false,\n        language: options.language,\n        directionality: options.textDirection,\n        remove_script_host: false,\n        document_base_url: window.baseUrl('/'),\n        end_container_on_empty_block: true,\n        remove_trailing_brs: false,\n        statusbar: false,\n        menubar: false,\n        plugins: 'link autolink lists',\n        contextmenu: false,\n        toolbar: 'bold italic link bullist numlist',\n        content_style: getContentStyle(options),\n        file_picker_types: 'file',\n        valid_elements: 'p,a[href|title|target],ol,ul,li,strong,em,br',\n        file_picker_callback: filePickerCallback,\n        init_instance_callback(editor) {\n            addCustomHeadContent(editor.getDoc());\n\n            editor.contentDocument.documentElement.classList.toggle('dark-mode', options.darkMode);\n        },\n    };\n}\n\n/**\n * @typedef {Object} WysiwygConfigOptions\n * @property {Element} containerElement\n * @property {string} language\n * @property {boolean} darkMode\n * @property {string} textDirection\n * @property {string} drawioUrl\n * @property {int} pageId\n * @property {Object} translations\n * @property {Object} translationMap\n */\n", "import {Component} from './component';\nimport {getLoading, htmlToDom} from '../services/dom.ts';\nimport {buildForInput} from '../wysiwyg-tinymce/config';\n\nexport class PageComment extends Component {\n\n    setup() {\n        // Options\n        this.commentId = this.$opts.commentId;\n        this.commentLocalId = this.$opts.commentLocalId;\n        this.commentParentId = this.$opts.commentParentId;\n        this.deletedText = this.$opts.deletedText;\n        this.updatedText = this.$opts.updatedText;\n\n        // Editor reference and text options\n        this.wysiwygEditor = null;\n        this.wysiwygLanguage = this.$opts.wysiwygLanguage;\n        this.wysiwygTextDirection = this.$opts.wysiwygTextDirection;\n\n        // Element references\n        this.container = this.$el;\n        this.contentContainer = this.$refs.contentContainer;\n        this.form = this.$refs.form;\n        this.formCancel = this.$refs.formCancel;\n        this.editButton = this.$refs.editButton;\n        this.deleteButton = this.$refs.deleteButton;\n        this.replyButton = this.$refs.replyButton;\n        this.input = this.$refs.input;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        if (this.replyButton) {\n            this.replyButton.addEventListener('click', () => this.$emit('reply', {\n                id: this.commentLocalId,\n                element: this.container,\n            }));\n        }\n\n        if (this.editButton) {\n            this.editButton.addEventListener('click', this.startEdit.bind(this));\n            this.form.addEventListener('submit', this.update.bind(this));\n            this.formCancel.addEventListener('click', () => this.toggleEditMode(false));\n        }\n\n        if (this.deleteButton) {\n            this.deleteButton.addEventListener('click', this.delete.bind(this));\n        }\n    }\n\n    toggleEditMode(show) {\n        this.contentContainer.toggleAttribute('hidden', show);\n        this.form.toggleAttribute('hidden', !show);\n    }\n\n    startEdit() {\n        this.toggleEditMode(true);\n\n        if (this.wysiwygEditor) {\n            this.wysiwygEditor.focus();\n            return;\n        }\n\n        const config = buildForInput({\n            language: this.wysiwygLanguage,\n            containerElement: this.input,\n            darkMode: document.documentElement.classList.contains('dark-mode'),\n            textDirection: this.wysiwygTextDirection,\n            translations: {},\n            translationMap: window.editor_translations,\n        });\n\n        window.tinymce.init(config).then(editors => {\n            this.wysiwygEditor = editors[0];\n            setTimeout(() => this.wysiwygEditor.focus(), 50);\n        });\n    }\n\n    async update(event) {\n        event.preventDefault();\n        const loading = this.showLoading();\n        this.form.toggleAttribute('hidden', true);\n\n        const reqData = {\n            html: this.wysiwygEditor.getContent(),\n            parent_id: this.parentId || null,\n        };\n\n        try {\n            const resp = await window.$http.put(`/comment/${this.commentId}`, reqData);\n            const newComment = htmlToDom(resp.data);\n            this.container.replaceWith(newComment);\n            window.$events.success(this.updatedText);\n        } catch (err) {\n            console.error(err);\n            window.$events.showValidationErrors(err);\n            this.form.toggleAttribute('hidden', false);\n            loading.remove();\n        }\n    }\n\n    async delete() {\n        this.showLoading();\n\n        await window.$http.delete(`/comment/${this.commentId}`);\n        this.$emit('delete');\n        this.container.closest('.comment-branch').remove();\n        window.$events.success(this.deletedText);\n    }\n\n    showLoading() {\n        const loading = getLoading();\n        loading.classList.add('px-l');\n        this.container.append(loading);\n        return loading;\n    }\n\n}\n", "import {Component} from './component';\nimport {getLoading, htmlToDom} from '../services/dom.ts';\nimport {buildForInput} from '../wysiwyg-tinymce/config';\n\nexport class PageComments extends Component {\n\n    setup() {\n        this.elem = this.$el;\n        this.pageId = Number(this.$opts.pageId);\n\n        // Element references\n        this.container = this.$refs.commentContainer;\n        this.commentCountBar = this.$refs.commentCountBar;\n        this.commentsTitle = this.$refs.commentsTitle;\n        this.addButtonContainer = this.$refs.addButtonContainer;\n        this.replyToRow = this.$refs.replyToRow;\n        this.formContainer = this.$refs.formContainer;\n        this.form = this.$refs.form;\n        this.formInput = this.$refs.formInput;\n        this.formReplyLink = this.$refs.formReplyLink;\n        this.addCommentButton = this.$refs.addCommentButton;\n        this.hideFormButton = this.$refs.hideFormButton;\n        this.removeReplyToButton = this.$refs.removeReplyToButton;\n\n        // WYSIWYG options\n        this.wysiwygLanguage = this.$opts.wysiwygLanguage;\n        this.wysiwygTextDirection = this.$opts.wysiwygTextDirection;\n        this.wysiwygEditor = null;\n\n        // Translations\n        this.createdText = this.$opts.createdText;\n        this.countText = this.$opts.countText;\n\n        // Internal State\n        this.parentId = null;\n        this.formReplyText = this.formReplyLink?.textContent || '';\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.elem.addEventListener('page-comment-delete', () => {\n            setTimeout(() => this.updateCount(), 1);\n            this.hideForm();\n        });\n\n        this.elem.addEventListener('page-comment-reply', event => {\n            this.setReply(event.detail.id, event.detail.element);\n        });\n\n        if (this.form) {\n            this.removeReplyToButton.addEventListener('click', this.removeReplyTo.bind(this));\n            this.hideFormButton.addEventListener('click', this.hideForm.bind(this));\n            this.addCommentButton.addEventListener('click', this.showForm.bind(this));\n            this.form.addEventListener('submit', this.saveComment.bind(this));\n        }\n    }\n\n    saveComment(event) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const loading = getLoading();\n        loading.classList.add('px-l');\n        this.form.after(loading);\n        this.form.toggleAttribute('hidden', true);\n\n        const reqData = {\n            html: this.wysiwygEditor.getContent(),\n            parent_id: this.parentId || null,\n        };\n\n        window.$http.post(`/comment/${this.pageId}`, reqData).then(resp => {\n            const newElem = htmlToDom(resp.data);\n\n            if (reqData.parent_id) {\n                this.formContainer.after(newElem);\n            } else {\n                this.container.append(newElem);\n            }\n\n            window.$events.success(this.createdText);\n            this.hideForm();\n            this.updateCount();\n        }).catch(err => {\n            this.form.toggleAttribute('hidden', false);\n            window.$events.showValidationErrors(err);\n        });\n\n        this.form.toggleAttribute('hidden', false);\n        loading.remove();\n    }\n\n    updateCount() {\n        const count = this.getCommentCount();\n        this.commentsTitle.textContent = window.$trans.choice(this.countText, count, {count});\n    }\n\n    resetForm() {\n        this.removeEditor();\n        this.formInput.value = '';\n        this.parentId = null;\n        this.replyToRow.toggleAttribute('hidden', true);\n        this.container.append(this.formContainer);\n    }\n\n    showForm() {\n        this.removeEditor();\n        this.formContainer.toggleAttribute('hidden', false);\n        this.addButtonContainer.toggleAttribute('hidden', true);\n        this.formContainer.scrollIntoView({behavior: 'smooth', block: 'nearest'});\n        this.loadEditor();\n    }\n\n    hideForm() {\n        this.resetForm();\n        this.formContainer.toggleAttribute('hidden', true);\n        if (this.getCommentCount() > 0) {\n            this.elem.append(this.addButtonContainer);\n        } else {\n            this.commentCountBar.append(this.addButtonContainer);\n        }\n        this.addButtonContainer.toggleAttribute('hidden', false);\n    }\n\n    loadEditor() {\n        if (this.wysiwygEditor) {\n            this.wysiwygEditor.focus();\n            return;\n        }\n\n        const config = buildForInput({\n            language: this.wysiwygLanguage,\n            containerElement: this.formInput,\n            darkMode: document.documentElement.classList.contains('dark-mode'),\n            textDirection: this.wysiwygTextDirection,\n            translations: {},\n            translationMap: window.editor_translations,\n        });\n\n        window.tinymce.init(config).then(editors => {\n            this.wysiwygEditor = editors[0];\n            setTimeout(() => this.wysiwygEditor.focus(), 50);\n        });\n    }\n\n    removeEditor() {\n        if (this.wysiwygEditor) {\n            this.wysiwygEditor.remove();\n            this.wysiwygEditor = null;\n        }\n    }\n\n    getCommentCount() {\n        return this.container.querySelectorAll('[component=\"page-comment\"]').length;\n    }\n\n    setReply(commentLocalId, commentElement) {\n        const targetFormLocation = commentElement.closest('.comment-branch').querySelector('.comment-branch-children');\n        targetFormLocation.append(this.formContainer);\n        this.showForm();\n        this.parentId = commentLocalId;\n        this.replyToRow.toggleAttribute('hidden', false);\n        this.formReplyLink.textContent = this.formReplyText.replace('1234', this.parentId);\n        this.formReplyLink.href = `#comment${this.parentId}`;\n    }\n\n    removeReplyTo() {\n        this.parentId = null;\n        this.replyToRow.toggleAttribute('hidden', true);\n        this.container.append(this.formContainer);\n        this.showForm();\n    }\n\n}\n", "import * as DOM from '../services/dom.ts';\nimport {scrollAndHighlightElement} from '../services/util.ts';\nimport {Component} from './component';\n\nfunction toggleAnchorHighlighting(elementId, shouldHighlight) {\n    DOM.forEach(`#page-navigation a[href=\"#${elementId}\"]`, anchor => {\n        anchor.closest('li').classList.toggle('current-heading', shouldHighlight);\n    });\n}\n\nfunction headingVisibilityChange(entries) {\n    for (const entry of entries) {\n        const isVisible = (entry.intersectionRatio === 1);\n        toggleAnchorHighlighting(entry.target.id, isVisible);\n    }\n}\n\nfunction addNavObserver(headings) {\n    // Setup the intersection observer.\n    const intersectOpts = {\n        rootMargin: '0px 0px 0px 0px',\n        threshold: 1.0,\n    };\n    const pageNavObserver = new IntersectionObserver(headingVisibilityChange, intersectOpts);\n\n    // observe each heading\n    for (const heading of headings) {\n        pageNavObserver.observe(heading);\n    }\n}\n\nexport class PageDisplay extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.pageId = this.$opts.pageId;\n\n        window.importVersioned('code').then(Code => Code.highlight());\n        this.setupNavHighlighting();\n\n        // Check the hash on load\n        if (window.location.hash) {\n            const text = window.location.hash.replace(/%20/g, ' ').substring(1);\n            this.goToText(text);\n        }\n\n        // Sidebar page nav click event\n        const sidebarPageNav = document.querySelector('.sidebar-page-nav');\n        if (sidebarPageNav) {\n            DOM.onChildEvent(sidebarPageNav, 'a', 'click', (event, child) => {\n                event.preventDefault();\n                window.$components.first('tri-layout').showContent();\n                const contentId = child.getAttribute('href').substr(1);\n                this.goToText(contentId);\n                window.history.pushState(null, null, `#${contentId}`);\n            });\n        }\n    }\n\n    goToText(text) {\n        const idElem = document.getElementById(text);\n\n        DOM.forEach('.page-content [data-highlighted]', elem => {\n            elem.removeAttribute('data-highlighted');\n            elem.style.backgroundColor = null;\n        });\n\n        if (idElem !== null) {\n            scrollAndHighlightElement(idElem);\n        } else {\n            const textElem = DOM.findText('.page-content > div > *', text);\n            if (textElem) {\n                scrollAndHighlightElement(textElem);\n            }\n        }\n    }\n\n    setupNavHighlighting() {\n        const pageNav = document.querySelector('.sidebar-page-nav');\n\n        // fetch all the headings.\n        const headings = document.querySelector('.page-content').querySelectorAll('h1, h2, h3, h4, h5, h6');\n        // if headings are present, add observers.\n        if (headings.length > 0 && pageNav !== null) {\n            addNavObserver(headings);\n        }\n    }\n\n}\n", "export function getCurrentDay(): string {\n    const date = new Date();\n    const month = date.getMonth() + 1;\n    const day = date.getDate();\n\n    return `${date.getFullYear()}-${(month > 9 ? '' : '0') + month}-${(day > 9 ? '' : '0') + day}`;\n}\n\nexport function utcTimeStampToLocalTime(timestamp: number): string {\n    const date = new Date(timestamp * 1000);\n    const hours = date.getHours();\n    const mins = date.getMinutes();\n    return `${(hours > 9 ? '' : '0') + hours}:${(mins > 9 ? '' : '0') + mins}`;\n}\n", "import {onSelect} from '../services/dom.ts';\nimport {debounce} from '../services/util.ts';\nimport {Component} from './component';\nimport {utcTimeStampToLocalTime} from '../services/dates.ts';\n\nexport class PageEditor extends Component {\n\n    setup() {\n        // Options\n        this.draftsEnabled = this.$opts.draftsEnabled === 'true';\n        this.editorType = this.$opts.editorType;\n        this.pageId = Number(this.$opts.pageId);\n        this.isNewDraft = this.$opts.pageNewDraft === 'true';\n        this.hasDefaultTitle = this.$opts.hasDefaultTitle || false;\n\n        // Elements\n        this.container = this.$el;\n        this.titleElem = this.$refs.titleContainer.querySelector('input');\n        this.saveDraftButton = this.$refs.saveDraft;\n        this.discardDraftButton = this.$refs.discardDraft;\n        this.discardDraftWrap = this.$refs.discardDraftWrap;\n        this.deleteDraftButton = this.$refs.deleteDraft;\n        this.deleteDraftWrap = this.$refs.deleteDraftWrap;\n        this.draftDisplay = this.$refs.draftDisplay;\n        this.draftDisplayIcon = this.$refs.draftDisplayIcon;\n        this.changelogInput = this.$refs.changelogInput;\n        this.changelogDisplay = this.$refs.changelogDisplay;\n        this.changeEditorButtons = this.$manyRefs.changeEditor || [];\n        this.switchDialogContainer = this.$refs.switchDialog;\n        this.deleteDraftDialogContainer = this.$refs.deleteDraftDialog;\n\n        // Translations\n        this.draftText = this.$opts.draftText;\n        this.autosaveFailText = this.$opts.autosaveFailText;\n        this.editingPageText = this.$opts.editingPageText;\n        this.draftDiscardedText = this.$opts.draftDiscardedText;\n        this.draftDeleteText = this.$opts.draftDeleteText;\n        this.draftDeleteFailText = this.$opts.draftDeleteFailText;\n        this.setChangelogText = this.$opts.setChangelogText;\n\n        // State data\n        this.autoSave = {\n            interval: null,\n            frequency: 30000,\n            last: 0,\n            pendingChange: false,\n        };\n        this.shownWarningsCache = new Set();\n\n        if (this.pageId !== 0 && this.draftsEnabled) {\n            window.setTimeout(() => {\n                this.startAutoSave();\n            }, 1000);\n        }\n        this.draftDisplay.innerHTML = this.draftText;\n\n        this.setupListeners();\n        this.setInitialFocus();\n    }\n\n    setupListeners() {\n        // Listen to save events from editor\n        window.$events.listen('editor-save-draft', this.saveDraft.bind(this));\n        window.$events.listen('editor-save-page', this.savePage.bind(this));\n\n        // Listen to content changes from the editor\n        const onContentChange = () => {\n            this.autoSave.pendingChange = true;\n        };\n        window.$events.listen('editor-html-change', onContentChange);\n        window.$events.listen('editor-markdown-change', onContentChange);\n\n        // Listen to changes on the title input\n        this.titleElem.addEventListener('input', onContentChange);\n\n        // Changelog controls\n        const updateChangelogDebounced = debounce(this.updateChangelogDisplay.bind(this), 300, false);\n        this.changelogInput.addEventListener('input', updateChangelogDebounced);\n\n        // Draft Controls\n        onSelect(this.saveDraftButton, this.saveDraft.bind(this));\n        onSelect(this.discardDraftButton, this.discardDraft.bind(this));\n        onSelect(this.deleteDraftButton, this.deleteDraft.bind(this));\n\n        // Change editor controls\n        onSelect(this.changeEditorButtons, this.changeEditor.bind(this));\n    }\n\n    setInitialFocus() {\n        if (this.hasDefaultTitle) {\n            this.titleElem.select();\n            return;\n        }\n\n        window.setTimeout(() => {\n            window.$events.emit('editor::focus', '');\n        }, 500);\n    }\n\n    startAutoSave() {\n        this.autoSave.interval = window.setInterval(this.runAutoSave.bind(this), this.autoSave.frequency);\n    }\n\n    runAutoSave() {\n        // Stop if manually saved recently to prevent bombarding the server\n        const savedRecently = (Date.now() - this.autoSave.last < (this.autoSave.frequency) / 2);\n        if (savedRecently || !this.autoSave.pendingChange) {\n            return;\n        }\n\n        this.saveDraft();\n    }\n\n    savePage() {\n        this.container.closest('form').submit();\n    }\n\n    async saveDraft() {\n        const data = {name: this.titleElem.value.trim()};\n\n        const editorContent = await this.getEditorComponent().getContent();\n        Object.assign(data, editorContent);\n\n        let didSave = false;\n        try {\n            const resp = await window.$http.put(`/ajax/page/${this.pageId}/save-draft`, data);\n            if (!this.isNewDraft) {\n                this.discardDraftWrap.toggleAttribute('hidden', false);\n                this.deleteDraftWrap.toggleAttribute('hidden', false);\n            }\n\n            this.draftNotifyChange(`${resp.data.message} ${utcTimeStampToLocalTime(resp.data.timestamp)}`);\n            this.autoSave.last = Date.now();\n            if (resp.data.warning && !this.shownWarningsCache.has(resp.data.warning)) {\n                window.$events.emit('warning', resp.data.warning);\n                this.shownWarningsCache.add(resp.data.warning);\n            }\n\n            didSave = true;\n            this.autoSave.pendingChange = false;\n        } catch (err) {\n            // Save the editor content in LocalStorage as a last resort, just in case.\n            try {\n                const saveKey = `draft-save-fail-${(new Date()).toISOString()}`;\n                window.localStorage.setItem(saveKey, JSON.stringify(data));\n            } catch (lsErr) {\n                console.error(lsErr);\n            }\n\n            window.$events.emit('error', this.autosaveFailText);\n        }\n\n        return didSave;\n    }\n\n    draftNotifyChange(text) {\n        this.draftDisplay.innerText = text;\n        this.draftDisplayIcon.classList.add('visible');\n        window.setTimeout(() => {\n            this.draftDisplayIcon.classList.remove('visible');\n        }, 2000);\n    }\n\n    async discardDraft(notify = true) {\n        let response;\n        try {\n            response = await window.$http.get(`/ajax/page/${this.pageId}`);\n        } catch (e) {\n            console.error(e);\n            return;\n        }\n\n        if (this.autoSave.interval) {\n            window.clearInterval(this.autoSave.interval);\n        }\n\n        this.draftDisplay.innerText = this.editingPageText;\n        this.discardDraftWrap.toggleAttribute('hidden', true);\n        window.$events.emit('editor::replace', {\n            html: response.data.html,\n            markdown: response.data.markdown,\n        });\n\n        this.titleElem.value = response.data.name;\n        window.setTimeout(() => {\n            this.startAutoSave();\n        }, 1000);\n\n        if (notify) {\n            window.$events.success(this.draftDiscardedText);\n        }\n    }\n\n    async deleteDraft() {\n        /** @var {ConfirmDialog} * */\n        const dialog = window.$components.firstOnElement(this.deleteDraftDialogContainer, 'confirm-dialog');\n        const confirmed = await dialog.show();\n        if (!confirmed) {\n            return;\n        }\n\n        try {\n            const discard = this.discardDraft(false);\n            const draftDelete = window.$http.delete(`/page-revisions/user-drafts/${this.pageId}`);\n            await Promise.all([discard, draftDelete]);\n            window.$events.success(this.draftDeleteText);\n            this.deleteDraftWrap.toggleAttribute('hidden', true);\n        } catch (err) {\n            console.error(err);\n            window.$events.error(this.draftDeleteFailText);\n        }\n    }\n\n    updateChangelogDisplay() {\n        let summary = this.changelogInput.value.trim();\n        if (summary.length === 0) {\n            summary = this.setChangelogText;\n        } else if (summary.length > 16) {\n            summary = `${summary.slice(0, 16)}...`;\n        }\n        this.changelogDisplay.innerText = summary;\n    }\n\n    async changeEditor(event) {\n        event.preventDefault();\n\n        const link = event.target.closest('a').href;\n        /** @var {ConfirmDialog} * */\n        const dialog = window.$components.firstOnElement(this.switchDialogContainer, 'confirm-dialog');\n        const [saved, confirmed] = await Promise.all([this.saveDraft(), dialog.show()]);\n\n        if (saved && confirmed) {\n            window.location = link;\n        }\n    }\n\n    /**\n     * @return {MarkdownEditor|WysiwygEditor|WysiwygEditorTinymce}\n     */\n    getEditorComponent() {\n        return window.$components.first('markdown-editor')\n            || window.$components.first('wysiwyg-editor')\n            || window.$components.first('wysiwyg-editor-tinymce');\n    }\n\n}\n", "import {Component} from './component';\n\nfunction toggleElem(elem, show) {\n    elem.toggleAttribute('hidden', !show);\n}\n\nexport class PagePicker extends Component {\n\n    setup() {\n        this.input = this.$refs.input;\n        this.resetButton = this.$refs.resetButton;\n        this.selectButton = this.$refs.selectButton;\n        this.display = this.$refs.display;\n        this.defaultDisplay = this.$refs.defaultDisplay;\n        this.buttonSep = this.$refs.buttonSeperator;\n\n        this.selectorEndpoint = this.$opts.selectorEndpoint;\n\n        this.value = this.input.value;\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.selectButton.addEventListener('click', this.showPopup.bind(this));\n        this.display.parentElement.addEventListener('click', this.showPopup.bind(this));\n        this.display.addEventListener('click', e => e.stopPropagation());\n\n        this.resetButton.addEventListener('click', () => {\n            this.setValue('', '');\n        });\n    }\n\n    showPopup() {\n        /** @type {EntitySelectorPopup} * */\n        const selectorPopup = window.$components.first('entity-selector-popup');\n        selectorPopup.show(entity => {\n            this.setValue(entity.id, entity.name);\n        }, {\n            initialValue: '',\n            searchEndpoint: this.selectorEndpoint,\n            entityTypes: 'page',\n            entityPermission: 'view',\n        });\n    }\n\n    setValue(value, name) {\n        this.value = value;\n        this.input.value = value;\n        this.controlView(name);\n    }\n\n    controlView(name) {\n        const hasValue = this.value && this.value !== 0;\n        toggleElem(this.resetButton, hasValue);\n        toggleElem(this.buttonSep, hasValue);\n        toggleElem(this.defaultDisplay, !hasValue);\n        toggleElem(this.display, hasValue);\n        if (hasValue) {\n            const id = this.getAssetIdFromVal();\n            this.display.textContent = `#${id}, ${name}`;\n            this.display.href = window.baseUrl(`/link/${id}`);\n        }\n    }\n\n    getAssetIdFromVal() {\n        return Number(this.value);\n    }\n\n}\n", "import {Component} from './component';\n\nexport class PermissionsTable extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.cellSelector = this.$opts.cellSelector || 'td,th';\n        this.rowSelector = this.$opts.rowSelector || 'tr';\n\n        // Handle toggle all event\n        for (const toggleAllElem of (this.$manyRefs.toggleAll || [])) {\n            toggleAllElem.addEventListener('click', this.toggleAllClick.bind(this));\n        }\n\n        // Handle toggle row event\n        for (const toggleRowElem of (this.$manyRefs.toggleRow || [])) {\n            toggleRowElem.addEventListener('click', this.toggleRowClick.bind(this));\n        }\n\n        // Handle toggle column event\n        for (const toggleColElem of (this.$manyRefs.toggleColumn || [])) {\n            toggleColElem.addEventListener('click', this.toggleColumnClick.bind(this));\n        }\n    }\n\n    toggleAllClick(event) {\n        event.preventDefault();\n        this.toggleAllInElement(this.container);\n    }\n\n    toggleRowClick(event) {\n        event.preventDefault();\n        this.toggleAllInElement(event.target.closest(this.rowSelector));\n    }\n\n    toggleColumnClick(event) {\n        event.preventDefault();\n\n        const tableCell = event.target.closest(this.cellSelector);\n        const colIndex = Array.from(tableCell.parentElement.children).indexOf(tableCell);\n        const tableRows = this.container.querySelectorAll(this.rowSelector);\n        const inputsToToggle = [];\n\n        for (const row of tableRows) {\n            const targetCell = row.children[colIndex];\n            if (targetCell) {\n                inputsToToggle.push(...targetCell.querySelectorAll('input[type=checkbox]'));\n            }\n        }\n        this.toggleAllInputs(inputsToToggle);\n    }\n\n    toggleAllInElement(domElem) {\n        const inputsToToggle = domElem.querySelectorAll('input[type=checkbox]');\n        this.toggleAllInputs(inputsToToggle);\n    }\n\n    toggleAllInputs(inputsToToggle) {\n        const currentState = inputsToToggle.length > 0 ? inputsToToggle[0].checked : false;\n        for (const checkbox of inputsToToggle) {\n            checkbox.checked = !currentState;\n            checkbox.dispatchEvent(new Event('change'));\n        }\n    }\n\n}\n", "import * as DOM from '../services/dom.ts';\nimport {Component} from './component';\nimport {copyTextToClipboard} from '../services/clipboard.ts';\n\nexport class Pointer extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.pointer = this.$refs.pointer;\n        this.linkInput = this.$refs.linkInput;\n        this.linkButton = this.$refs.linkButton;\n        this.includeInput = this.$refs.includeInput;\n        this.includeButton = this.$refs.includeButton;\n        this.sectionModeButton = this.$refs.sectionModeButton;\n        this.modeToggles = this.$manyRefs.modeToggle;\n        this.modeSections = this.$manyRefs.modeSection;\n        this.pageId = this.$opts.pageId;\n\n        // Instance variables\n        this.showing = false;\n        this.isSelection = false;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        // Copy on copy button click\n        this.includeButton.addEventListener('click', () => copyTextToClipboard(this.includeInput.value));\n        this.linkButton.addEventListener('click', () => copyTextToClipboard(this.linkInput.value));\n\n        // Select all contents on input click\n        DOM.onSelect([this.includeInput, this.linkInput], event => {\n            event.target.select();\n            event.stopPropagation();\n        });\n\n        // Prevent closing pointer when clicked or focused\n        DOM.onEvents(this.pointer, ['click', 'focus'], event => {\n            event.stopPropagation();\n        });\n\n        // Hide pointer when clicking away\n        DOM.onEvents(document.body, ['click', 'focus'], () => {\n            if (!this.showing || this.isSelection) return;\n            this.hidePointer();\n        });\n\n        // Hide pointer on escape press\n        DOM.onEscapePress(this.pointer, this.hidePointer.bind(this));\n\n        // Show pointer when selecting a single block of tagged content\n        const pageContent = document.querySelector('.page-content');\n        DOM.onEvents(pageContent, ['mouseup', 'keyup'], event => {\n            event.stopPropagation();\n            const targetEl = event.target.closest('[id^=\"bkmrk\"]');\n            if (targetEl && window.getSelection().toString().length > 0) {\n                this.showPointerAtTarget(targetEl, event.pageX, false);\n            }\n        });\n\n        // Start section selection mode on button press\n        DOM.onSelect(this.sectionModeButton, this.enterSectionSelectMode.bind(this));\n\n        // Toggle between pointer modes\n        DOM.onSelect(this.modeToggles, event => {\n            for (const section of this.modeSections) {\n                const show = !section.contains(event.target);\n                section.toggleAttribute('hidden', !show);\n            }\n\n            this.modeToggles.find(b => b !== event.target).focus();\n        });\n    }\n\n    hidePointer() {\n        this.pointer.style.display = null;\n        this.showing = false;\n    }\n\n    /**\n     * Move and display the pointer at the given element, targeting the given screen x-position if possible.\n     * @param {Element} element\n     * @param {Number} xPosition\n     * @param {Boolean} keyboardMode\n     */\n    showPointerAtTarget(element, xPosition, keyboardMode) {\n        this.updateForTarget(element);\n\n        this.pointer.style.display = 'block';\n        const targetBounds = element.getBoundingClientRect();\n        const pointerBounds = this.pointer.getBoundingClientRect();\n\n        const xTarget = Math.min(Math.max(xPosition, targetBounds.left), targetBounds.right);\n        const xOffset = xTarget - (pointerBounds.width / 2);\n        const yOffset = (targetBounds.top - pointerBounds.height) - 16;\n\n        this.pointer.style.left = `${xOffset}px`;\n        this.pointer.style.top = `${yOffset}px`;\n\n        this.showing = true;\n        this.isSelection = true;\n\n        setTimeout(() => {\n            this.isSelection = false;\n        }, 100);\n\n        const scrollListener = () => {\n            this.hidePointer();\n            window.removeEventListener('scroll', scrollListener, {passive: true});\n        };\n\n        element.parentElement.insertBefore(this.pointer, element);\n        if (!keyboardMode) {\n            window.addEventListener('scroll', scrollListener, {passive: true});\n        }\n    }\n\n    /**\n     * Update the pointer inputs/content for the given target element.\n     * @param {?Element} element\n     */\n    updateForTarget(element) {\n        const permaLink = window.baseUrl(`/link/${this.pageId}#${element.id}`);\n        const includeTag = `{{@${this.pageId}#${element.id}}}`;\n\n        this.linkInput.value = permaLink;\n        this.includeInput.value = includeTag;\n\n        // Update anchor if present\n        const editAnchor = this.pointer.querySelector('#pointer-edit');\n        if (editAnchor && element) {\n            const {editHref} = editAnchor.dataset;\n            const elementId = element.id;\n\n            // Get the first 50 characters.\n            const queryContent = element.textContent && element.textContent.substring(0, 50);\n            editAnchor.href = `${editHref}?content-id=${elementId}&content-text=${encodeURIComponent(queryContent)}`;\n        }\n    }\n\n    enterSectionSelectMode() {\n        const sections = Array.from(document.querySelectorAll('.page-content [id^=\"bkmrk\"]'));\n        for (const section of sections) {\n            section.setAttribute('tabindex', '0');\n        }\n\n        sections[0].focus();\n\n        DOM.onEnterPress(sections, event => {\n            this.showPointerAtTarget(event.target, 0, true);\n            this.pointer.focus();\n        });\n    }\n\n}\n", "import {fadeIn, fadeOut} from '../services/animations.ts';\nimport {onSelect} from '../services/dom.ts';\nimport {Component} from './component';\n\n/**\n * Popup window that will contain other content.\n * This component provides the show/hide functionality\n * with the ability for popup@hide child references to close this.\n */\nexport class Popup extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.hideButtons = this.$manyRefs.hide || [];\n\n        this.onkeyup = null;\n        this.onHide = null;\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        let lastMouseDownTarget = null;\n        this.container.addEventListener('mousedown', event => {\n            lastMouseDownTarget = event.target;\n        });\n\n        this.container.addEventListener('click', event => {\n            if (event.target === this.container && lastMouseDownTarget === this.container) {\n                this.hide();\n            }\n        });\n\n        onSelect(this.hideButtons, () => this.hide());\n    }\n\n    hide(onComplete = null) {\n        fadeOut(this.container, 120, onComplete);\n        if (this.onkeyup) {\n            window.removeEventListener('keyup', this.onkeyup);\n            this.onkeyup = null;\n        }\n        if (this.onHide) {\n            this.onHide();\n        }\n    }\n\n    show(onComplete = null, onHide = null) {\n        fadeIn(this.container, 120, onComplete);\n\n        this.onkeyup = event => {\n            if (event.key === 'Escape') {\n                this.hide();\n            }\n        };\n        window.addEventListener('keyup', this.onkeyup);\n        this.onHide = onHide;\n    }\n\n}\n", "import {Component} from './component';\n\nexport class SettingAppColorScheme extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.mode = this.$opts.mode;\n        this.lightContainer = this.$refs.lightContainer;\n        this.darkContainer = this.$refs.darkContainer;\n\n        this.container.addEventListener('tabs-change', event => {\n            const panel = event.detail.showing;\n            const newMode = (panel === 'color-scheme-panel-light') ? 'light' : 'dark';\n            this.handleModeChange(newMode);\n        });\n\n        const onInputChange = event => {\n            this.updateAppColorsFromInputs();\n\n            if (event.target.name.startsWith('setting-app-color')) {\n                this.updateLightForInput(event.target);\n            }\n        };\n        this.container.addEventListener('change', onInputChange);\n        this.container.addEventListener('input', onInputChange);\n    }\n\n    handleModeChange(newMode) {\n        this.mode = newMode;\n        const isDark = (newMode === 'dark');\n\n        document.documentElement.classList.toggle('dark-mode', isDark);\n        this.updateAppColorsFromInputs();\n    }\n\n    updateAppColorsFromInputs() {\n        const inputContainer = this.mode === 'dark' ? this.darkContainer : this.lightContainer;\n        const inputs = inputContainer.querySelectorAll('input[type=\"color\"]');\n        for (const input of inputs) {\n            const splitName = input.name.split('-');\n            const colorPos = splitName.indexOf('color');\n            let cssId = splitName.slice(1, colorPos).join('-');\n            if (cssId === 'app') {\n                cssId = 'primary';\n            }\n\n            const varName = `--color-${cssId}`;\n            document.body.style.setProperty(varName, input.value);\n        }\n    }\n\n    /**\n     * Update the 'light' app color variant for the given input.\n     * @param {HTMLInputElement} input\n     */\n    updateLightForInput(input) {\n        const lightName = input.name.replace('-color', '-color-light');\n        const hexVal = input.value;\n        const rgb = this.hexToRgb(hexVal);\n        const rgbLightVal = `rgba(${[rgb.r, rgb.g, rgb.b, '0.15'].join(',')})`;\n\n        const lightColorInput = this.container.querySelector(`input[name=\"${lightName}\"][type=\"hidden\"]`);\n        lightColorInput.value = rgbLightVal;\n    }\n\n    /**\n     * Covert a hex color code to rgb components.\n     * @attribution https://stackoverflow.com/a/5624139\n     * @param {String} hex\n     * @returns {{r: Number, g: Number, b: Number}}\n     */\n    hexToRgb(hex) {\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return {\n            r: result ? parseInt(result[1], 16) : 0,\n            g: result ? parseInt(result[2], 16) : 0,\n            b: result ? parseInt(result[3], 16) : 0,\n        };\n    }\n\n}\n", "import {Component} from './component';\n\nexport class SettingColorPicker extends Component {\n\n    setup() {\n        this.colorInput = this.$refs.input;\n        this.resetButton = this.$refs.resetButton;\n        this.defaultButton = this.$refs.defaultButton;\n        this.currentColor = this.$opts.current;\n        this.defaultColor = this.$opts.default;\n\n        this.resetButton.addEventListener('click', () => this.setValue(this.currentColor));\n        this.defaultButton.addEventListener('click', () => this.setValue(this.defaultColor));\n    }\n\n    setValue(value) {\n        this.colorInput.value = value;\n        this.colorInput.dispatchEvent(new Event('change', {bubbles: true}));\n    }\n\n}\n", "import {Component} from './component';\n\nexport class SettingHomepageControl extends Component {\n\n    setup() {\n        this.typeControl = this.$refs.typeControl;\n        this.pagePickerContainer = this.$refs.pagePickerContainer;\n\n        this.typeControl.addEventListener('change', this.controlPagePickerVisibility.bind(this));\n        this.controlPagePickerVisibility();\n    }\n\n    controlPagePickerVisibility() {\n        const showPagePicker = this.typeControl.value === 'page';\n        this.pagePickerContainer.style.display = (showPagePicker ? 'block' : 'none');\n    }\n\n}\n", "import Sortable from 'sortablejs';\nimport {Component} from './component';\n\n/**\n * @type {Object<string, function(HTMLElement, HTMLElement, HTMLElement)>}\n */\nconst itemActions = {\n    move_up(item) {\n        const list = item.parentNode;\n        const index = Array.from(list.children).indexOf(item);\n        const newIndex = Math.max(index - 1, 0);\n        list.insertBefore(item, list.children[newIndex] || null);\n    },\n    move_down(item) {\n        const list = item.parentNode;\n        const index = Array.from(list.children).indexOf(item);\n        const newIndex = Math.min(index + 2, list.children.length);\n        list.insertBefore(item, list.children[newIndex] || null);\n    },\n    remove(item, shelfBooksList, allBooksList) {\n        allBooksList.appendChild(item);\n    },\n    add(item, shelfBooksList) {\n        shelfBooksList.appendChild(item);\n    },\n};\n\nexport class ShelfSort extends Component {\n\n    setup() {\n        this.elem = this.$el;\n        this.input = this.$refs.input;\n        this.shelfBookList = this.$refs.shelfBookList;\n        this.allBookList = this.$refs.allBookList;\n        this.bookSearchInput = this.$refs.bookSearch;\n        this.sortButtonContainer = this.$refs.sortButtonContainer;\n\n        this.lastSort = null;\n\n        this.initSortable();\n        this.setupListeners();\n    }\n\n    initSortable() {\n        const scrollBoxes = this.elem.querySelectorAll('.scroll-box');\n        for (const scrollBox of scrollBoxes) {\n            new Sortable(scrollBox, {\n                group: 'shelf-books',\n                ghostClass: 'primary-background-light',\n                handle: '.handle',\n                animation: 150,\n                onSort: this.onChange.bind(this),\n            });\n        }\n    }\n\n    setupListeners() {\n        this.elem.addEventListener('click', event => {\n            const sortItemAction = event.target.closest('.scroll-box-item button[data-action]');\n            if (sortItemAction) {\n                this.sortItemActionClick(sortItemAction);\n            }\n        });\n\n        this.bookSearchInput.addEventListener('input', () => {\n            this.filterBooksByName(this.bookSearchInput.value);\n        });\n\n        this.sortButtonContainer.addEventListener('click', event => {\n            const button = event.target.closest('button[data-sort]');\n            if (button) {\n                this.sortShelfBooks(button.dataset.sort);\n            }\n        });\n    }\n\n    /**\n     * @param {String} filterVal\n     */\n    filterBooksByName(filterVal) {\n        // Set height on first search, if not already set, to prevent the distraction\n        // of the list height jumping around\n        if (!this.allBookList.style.height) {\n            this.allBookList.style.height = `${this.allBookList.getBoundingClientRect().height}px`;\n        }\n\n        const books = this.allBookList.children;\n        const lowerFilter = filterVal.trim().toLowerCase();\n\n        for (const bookEl of books) {\n            const show = !filterVal || bookEl.textContent.toLowerCase().includes(lowerFilter);\n            bookEl.style.display = show ? null : 'none';\n        }\n    }\n\n    /**\n     * Called when a sort item action button is clicked.\n     * @param {HTMLElement} sortItemAction\n     */\n    sortItemActionClick(sortItemAction) {\n        const sortItem = sortItemAction.closest('.scroll-box-item');\n        const {action} = sortItemAction.dataset;\n\n        const actionFunction = itemActions[action];\n        actionFunction(sortItem, this.shelfBookList, this.allBookList);\n\n        this.onChange();\n    }\n\n    onChange() {\n        const shelfBookElems = Array.from(this.shelfBookList.querySelectorAll('[data-id]'));\n        this.input.value = shelfBookElems.map(elem => elem.getAttribute('data-id')).join(',');\n    }\n\n    sortShelfBooks(sortProperty) {\n        const books = Array.from(this.shelfBookList.children);\n        const reverse = sortProperty === this.lastSort;\n\n        books.sort((bookA, bookB) => {\n            const aProp = bookA.dataset[sortProperty].toLowerCase();\n            const bProp = bookB.dataset[sortProperty].toLowerCase();\n\n            if (reverse) {\n                return bProp.localeCompare(aProp);\n            }\n\n            return aProp.localeCompare(bProp);\n        });\n\n        for (const book of books) {\n            this.shelfBookList.append(book);\n        }\n\n        this.lastSort = (this.lastSort === sortProperty) ? null : sortProperty;\n        this.onChange();\n    }\n\n}\n", "import {Component} from './component';\n\nfunction reverseMap(map) {\n    const reversed = {};\n    for (const [key, value] of Object.entries(map)) {\n        reversed[value] = key;\n    }\n    return reversed;\n}\n\nexport class Shortcuts extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.mapById = JSON.parse(this.$opts.keyMap);\n        this.mapByShortcut = reverseMap(this.mapById);\n\n        this.hintsShowing = false;\n\n        this.hideHints = this.hideHints.bind(this);\n        this.hintAbortController = null;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        window.addEventListener('keydown', event => {\n            if (event.target.closest('input, select, textarea, .cm-editor, .editor-container')) {\n                return;\n            }\n\n            if (event.key === '?') {\n                if (this.hintsShowing) {\n                    this.hideHints();\n                } else {\n                    this.showHints();\n                }\n                return;\n            }\n\n            this.handleShortcutPress(event);\n        });\n    }\n\n    /**\n     * @param {KeyboardEvent} event\n     */\n    handleShortcutPress(event) {\n        const keys = [\n            event.ctrlKey ? 'Ctrl' : '',\n            event.metaKey ? 'Cmd' : '',\n            event.key,\n        ];\n\n        const combo = keys.filter(s => Boolean(s)).join(' + ');\n\n        const shortcutId = this.mapByShortcut[combo];\n        if (shortcutId) {\n            const wasHandled = this.runShortcut(shortcutId);\n            if (wasHandled) {\n                event.preventDefault();\n            }\n        }\n    }\n\n    /**\n     * Run the given shortcut, and return a boolean to indicate if the event\n     * was successfully handled by a shortcut action.\n     * @param {String} id\n     * @return {boolean}\n     */\n    runShortcut(id) {\n        const el = this.container.querySelector(`[data-shortcut=\"${id}\"]`);\n        if (!el) {\n            return false;\n        }\n\n        if (el.matches('input, textarea, select')) {\n            el.focus();\n            return true;\n        }\n\n        if (el.matches('a, button')) {\n            el.click();\n            return true;\n        }\n\n        if (el.matches('div[tabindex]')) {\n            el.click();\n            el.focus();\n            return true;\n        }\n\n        console.error('Shortcut attempted to be ran for element type that does not have handling setup', el);\n\n        return false;\n    }\n\n    showHints() {\n        const wrapper = document.createElement('div');\n        wrapper.classList.add('shortcut-container');\n        this.container.append(wrapper);\n\n        const shortcutEls = this.container.querySelectorAll('[data-shortcut]');\n        const displayedIds = new Set();\n        for (const shortcutEl of shortcutEls) {\n            const id = shortcutEl.getAttribute('data-shortcut');\n            if (displayedIds.has(id)) {\n                continue;\n            }\n\n            const key = this.mapById[id];\n            this.showHintLabel(shortcutEl, key, wrapper);\n            displayedIds.add(id);\n        }\n\n        this.hintAbortController = new AbortController();\n        const signal = this.hintAbortController.signal;\n        window.addEventListener('scroll', this.hideHints, {signal});\n        window.addEventListener('focus', this.hideHints, {signal});\n        window.addEventListener('blur', this.hideHints, {signal});\n        window.addEventListener('click', this.hideHints, {signal});\n\n        this.hintsShowing = true;\n    }\n\n    /**\n     * @param {Element} targetEl\n     * @param {String} key\n     * @param {Element} wrapper\n     */\n    showHintLabel(targetEl, key, wrapper) {\n        const targetBounds = targetEl.getBoundingClientRect();\n\n        const label = document.createElement('div');\n        label.classList.add('shortcut-hint');\n        label.textContent = key;\n\n        const linkage = document.createElement('div');\n        linkage.classList.add('shortcut-linkage');\n        linkage.style.left = `${targetBounds.x}px`;\n        linkage.style.top = `${targetBounds.y}px`;\n        linkage.style.width = `${targetBounds.width}px`;\n        linkage.style.height = `${targetBounds.height}px`;\n\n        wrapper.append(label, linkage);\n\n        const labelBounds = label.getBoundingClientRect();\n\n        label.style.insetInlineStart = `${((targetBounds.x + targetBounds.width) - (labelBounds.width + 6))}px`;\n        label.style.insetBlockStart = `${(targetBounds.y + (targetBounds.height - labelBounds.height) / 2)}px`;\n    }\n\n    hideHints() {\n        const wrapper = this.container.querySelector('.shortcut-container');\n        wrapper.remove();\n        this.hintAbortController?.abort();\n        this.hintsShowing = false;\n    }\n\n}\n", "import {Component} from './component';\n\n/**\n * Keys to ignore when recording shortcuts.\n * @type {string[]}\n */\nconst ignoreKeys = ['Control', 'Alt', 'Shift', 'Meta', 'Super', ' ', '+', 'Tab', 'Escape'];\n\nexport class ShortcutInput extends Component {\n\n    setup() {\n        this.input = this.$el;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.listenerRecordKey = this.listenerRecordKey.bind(this);\n\n        this.input.addEventListener('focus', () => {\n            this.startListeningForInput();\n        });\n\n        this.input.addEventListener('blur', () => {\n            this.stopListeningForInput();\n        });\n    }\n\n    startListeningForInput() {\n        this.input.addEventListener('keydown', this.listenerRecordKey);\n    }\n\n    /**\n     * @param {KeyboardEvent} event\n     */\n    listenerRecordKey(event) {\n        if (ignoreKeys.includes(event.key)) {\n            return;\n        }\n\n        const keys = [\n            event.ctrlKey ? 'Ctrl' : '',\n            event.metaKey ? 'Cmd' : '',\n            event.key,\n        ];\n\n        this.input.value = keys.filter(s => Boolean(s)).join(' + ');\n    }\n\n    stopListeningForInput() {\n        this.input.removeEventListener('keydown', this.listenerRecordKey);\n    }\n\n}\n", "import Sortable from 'sortablejs';\nimport {Component} from './component';\n\n/**\n * SortableList\n *\n * Can have data set on the dragged items by setting a 'data-drag-content' attribute.\n * This attribute must contain JSON where the keys are content types and the values are\n * the data to set on the data-transfer.\n */\nexport class SortableList extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.handleSelector = this.$opts.handleSelector;\n\n        const sortable = new Sortable(this.container, {\n            handle: this.handleSelector,\n            animation: 150,\n            onSort: () => {\n                this.$emit('sort', {ids: sortable.toArray()});\n            },\n            setData(dataTransferItem, dragEl) {\n                const jsonContent = dragEl.getAttribute('data-drag-content');\n                if (jsonContent) {\n                    const contentByType = JSON.parse(jsonContent);\n                    for (const [type, content] of Object.entries(contentByType)) {\n                        dataTransferItem.setData(type, content);\n                    }\n                }\n            },\n            revertOnSpill: true,\n            dropBubble: true,\n            dragoverBubble: false,\n        });\n    }\n\n}\n", "import {Component} from './component';\n\n/**\n * Submit on change\n * Simply submits a parent form when this input is changed.\n */\nexport class SubmitOnChange extends Component {\n\n    setup() {\n        this.filter = this.$opts.filter;\n\n        this.$el.addEventListener('change', event => {\n            if (this.filter && !event.target.matches(this.filter)) {\n                return;\n            }\n\n            const form = this.$el.closest('form');\n            if (form) {\n                form.submit();\n            }\n        });\n    }\n\n}\n", "import {Component} from './component';\n\n/**\n * Tabs\n * Uses accessible attributes to drive its functionality.\n * On tab wrapping element:\n * - role=tablist\n * On tabs (Should be a button):\n * - id\n * - role=tab\n * - aria-selected=true/false\n * - aria-controls=<id-of-panel-section>\n * On panels:\n * - id\n * - tabindex=0\n * - role=tabpanel\n * - aria-labelledby=<id-of-tab-for-panel>\n * - hidden (If not shown by default).\n */\nexport class Tabs extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.tabList = this.container.querySelector('[role=\"tablist\"]');\n        this.tabs = Array.from(this.tabList.querySelectorAll('[role=\"tab\"]'));\n        this.panels = Array.from(this.container.querySelectorAll(':scope > [role=\"tabpanel\"], :scope > * > [role=\"tabpanel\"]'));\n        this.activeUnder = this.$opts.activeUnder ? Number(this.$opts.activeUnder) : 10000;\n        this.active = null;\n\n        this.container.addEventListener('click', event => {\n            const tab = event.target.closest('[role=\"tab\"]');\n            if (tab && this.tabs.includes(tab)) {\n                this.show(tab.getAttribute('aria-controls'));\n            }\n        });\n\n        window.addEventListener('resize', this.updateActiveState.bind(this), {\n            passive: true,\n        });\n        this.updateActiveState();\n    }\n\n    show(sectionId) {\n        for (const panel of this.panels) {\n            panel.toggleAttribute('hidden', panel.id !== sectionId);\n        }\n\n        for (const tab of this.tabs) {\n            const tabSection = tab.getAttribute('aria-controls');\n            const selected = tabSection === sectionId;\n            tab.setAttribute('aria-selected', selected ? 'true' : 'false');\n        }\n\n        this.$emit('change', {showing: sectionId});\n    }\n\n    updateActiveState() {\n        const active = window.innerWidth < this.activeUnder;\n        if (active === this.active) {\n            return;\n        }\n\n        if (active) {\n            this.activate();\n        } else {\n            this.deactivate();\n        }\n\n        this.active = active;\n    }\n\n    activate() {\n        const panelToShow = this.panels.find(p => !p.hasAttribute('hidden')) || this.panels[0];\n        this.show(panelToShow.id);\n        this.tabList.toggleAttribute('hidden', false);\n    }\n\n    deactivate() {\n        for (const panel of this.panels) {\n            panel.removeAttribute('hidden');\n        }\n        for (const tab of this.tabs) {\n            tab.setAttribute('aria-selected', 'false');\n        }\n        this.tabList.toggleAttribute('hidden', true);\n    }\n\n}\n", "import {Component} from './component';\n\nexport class TagManager extends Component {\n\n    setup() {\n        this.addRemoveComponentEl = this.$refs.addRemove;\n        this.container = this.$el;\n        this.rowSelector = this.$opts.rowSelector;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        this.container.addEventListener('input', event => {\n            /** @var {AddRemoveRows} * */\n            const addRemoveComponent = window.$components.firstOnElement(this.addRemoveComponentEl, 'add-remove-rows');\n            if (!this.hasEmptyRows() && event.target.value) {\n                addRemoveComponent.add();\n            }\n        });\n    }\n\n    hasEmptyRows() {\n        const rows = this.container.querySelectorAll(this.rowSelector);\n        const firstEmpty = [...rows].find(row => [...row.querySelectorAll('input')].filter(input => input.value).length === 0);\n        return firstEmpty !== undefined;\n    }\n\n}\n", "import * as DOM from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class TemplateManager extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.list = this.$refs.list;\n\n        this.searchInput = this.$refs.searchInput;\n        this.searchButton = this.$refs.searchButton;\n        this.searchCancel = this.$refs.searchCancel;\n\n        this.setupListeners();\n    }\n\n    setupListeners() {\n        // Template insert action buttons\n        DOM.onChildEvent(this.container, '[template-action]', 'click', this.handleTemplateActionClick.bind(this));\n\n        // Template list pagination click\n        DOM.onChildEvent(this.container, '.pagination a', 'click', this.handlePaginationClick.bind(this));\n\n        // Template list item content click\n        DOM.onChildEvent(this.container, '.template-item-content', 'click', this.handleTemplateItemClick.bind(this));\n\n        // Template list item drag start\n        DOM.onChildEvent(this.container, '.template-item', 'dragstart', this.handleTemplateItemDragStart.bind(this));\n\n        // Search box enter press\n        this.searchInput.addEventListener('keypress', event => {\n            if (event.key === 'Enter') {\n                event.preventDefault();\n                this.performSearch();\n            }\n        });\n\n        // Search submit button press\n        this.searchButton.addEventListener('click', () => this.performSearch());\n\n        // Search cancel button press\n        this.searchCancel.addEventListener('click', () => {\n            this.searchInput.value = '';\n            this.performSearch();\n        });\n    }\n\n    handleTemplateItemClick(event, templateItem) {\n        const templateId = templateItem.closest('[template-id]').getAttribute('template-id');\n        this.insertTemplate(templateId, 'replace');\n    }\n\n    handleTemplateItemDragStart(event, templateItem) {\n        const templateId = templateItem.closest('[template-id]').getAttribute('template-id');\n        event.dataTransfer.setData('bookstack/template', templateId);\n        event.dataTransfer.setData('text/plain', templateId);\n    }\n\n    handleTemplateActionClick(event, actionButton) {\n        event.stopPropagation();\n\n        const action = actionButton.getAttribute('template-action');\n        const templateId = actionButton.closest('[template-id]').getAttribute('template-id');\n        this.insertTemplate(templateId, action);\n    }\n\n    async insertTemplate(templateId, action = 'replace') {\n        const resp = await window.$http.get(`/templates/${templateId}`);\n        const eventName = `editor::${action}`;\n        window.$events.emit(eventName, resp.data);\n    }\n\n    async handlePaginationClick(event, paginationLink) {\n        event.preventDefault();\n        const paginationUrl = paginationLink.getAttribute('href');\n        const resp = await window.$http.get(paginationUrl);\n        this.list.innerHTML = resp.data;\n    }\n\n    async performSearch() {\n        const searchTerm = this.searchInput.value;\n        const resp = await window.$http.get('/templates', {\n            search: searchTerm,\n        });\n        this.searchCancel.style.display = searchTerm ? 'block' : 'none';\n        this.list.innerHTML = resp.data;\n    }\n\n}\n", "import {Component} from './component';\n\nexport class ToggleSwitch extends Component {\n\n    setup() {\n        this.input = this.$el.querySelector('input[type=hidden]');\n        this.checkbox = this.$el.querySelector('input[type=checkbox]');\n\n        this.checkbox.addEventListener('change', this.stateChange.bind(this));\n    }\n\n    stateChange() {\n        this.input.value = (this.checkbox.checked ? 'true' : 'false');\n\n        // Dispatch change event from hidden input so they can be listened to\n        // like a normal checkbox.\n        const changeEvent = new Event('change');\n        this.input.dispatchEvent(changeEvent);\n    }\n\n}\n", "import {Component} from './component';\n\nexport class TriLayout extends Component {\n\n    setup() {\n        this.container = this.$refs.container;\n        this.tabs = this.$manyRefs.tab;\n\n        this.lastLayoutType = 'none';\n        this.onDestroy = null;\n        this.scrollCache = {\n            content: 0,\n            info: 0,\n        };\n        this.lastTabShown = 'content';\n\n        // Bind any listeners\n        this.mobileTabClick = this.mobileTabClick.bind(this);\n\n        // Watch layout changes\n        this.updateLayout();\n        window.addEventListener('resize', () => {\n            this.updateLayout();\n        }, {passive: true});\n    }\n\n    updateLayout() {\n        let newLayout = 'tablet';\n        if (window.innerWidth <= 1000) newLayout = 'mobile';\n        if (window.innerWidth >= 1400) newLayout = 'desktop';\n        if (newLayout === this.lastLayoutType) return;\n\n        if (this.onDestroy) {\n            this.onDestroy();\n            this.onDestroy = null;\n        }\n\n        if (newLayout === 'desktop') {\n            this.setupDesktop();\n        } else if (newLayout === 'mobile') {\n            this.setupMobile();\n        }\n\n        this.lastLayoutType = newLayout;\n    }\n\n    setupMobile() {\n        for (const tab of this.tabs) {\n            tab.addEventListener('click', this.mobileTabClick);\n        }\n\n        this.onDestroy = () => {\n            for (const tab of this.tabs) {\n                tab.removeEventListener('click', this.mobileTabClick);\n            }\n        };\n    }\n\n    setupDesktop() {\n        //\n    }\n\n    /**\n     * Action to run when the mobile info toggle bar is clicked/tapped\n     * @param event\n     */\n    mobileTabClick(event) {\n        const {tab} = event.target.dataset;\n        this.showTab(tab);\n    }\n\n    /**\n     * Show the content tab.\n     * Used by the page-display component.\n     */\n    showContent() {\n        this.showTab('content', false);\n    }\n\n    /**\n     * Show the given tab\n     * @param {String} tabName\n     * @param {Boolean }scroll\n     */\n    showTab(tabName, scroll = true) {\n        this.scrollCache[this.lastTabShown] = document.documentElement.scrollTop;\n\n        // Set tab status\n        for (const tab of this.tabs) {\n            const isActive = (tab.dataset.tab === tabName);\n            tab.setAttribute('aria-selected', isActive ? 'true' : 'false');\n        }\n\n        // Toggle section\n        const showInfo = (tabName === 'info');\n        this.container.classList.toggle('show-info', showInfo);\n\n        // Set the scroll position from cache\n        if (scroll) {\n            const pageHeader = document.querySelector('header');\n            const defaultScrollTop = pageHeader.getBoundingClientRect().bottom;\n            document.documentElement.scrollTop = this.scrollCache[tabName] || defaultScrollTop;\n            setTimeout(() => {\n                document.documentElement.scrollTop = this.scrollCache[tabName] || defaultScrollTop;\n            }, 50);\n        }\n\n        this.lastTabShown = tabName;\n    }\n\n}\n", "import {onChildEvent} from '../services/dom.ts';\nimport {Component} from './component';\n\nexport class UserSelect extends Component {\n\n    setup() {\n        this.container = this.$el;\n        this.input = this.$refs.input;\n        this.userInfoContainer = this.$refs.userInfo;\n\n        onChildEvent(this.container, 'a.dropdown-search-item', 'click', this.selectUser.bind(this));\n    }\n\n    selectUser(event, userEl) {\n        event.preventDefault();\n        this.input.value = userEl.getAttribute('data-id');\n        this.userInfoContainer.innerHTML = userEl.innerHTML;\n        this.input.dispatchEvent(new Event('change', {bubbles: true}));\n        this.hide();\n    }\n\n    hide() {\n        /** @var {Dropdown} * */\n        const dropdown = window.$components.firstOnElement(this.container, 'dropdown');\n        dropdown.hide();\n    }\n\n}\n", "/**\n * Webhook Events\n * Manages dynamic selection control in the webhook form interface.\n */\nimport {Component} from './component';\n\nexport class WebhookEvents extends Component {\n\n    setup() {\n        this.checkboxes = this.$el.querySelectorAll('input[type=\"checkbox\"]');\n        this.allCheckbox = this.$el.querySelector('input[type=\"checkbox\"][value=\"all\"]');\n\n        this.$el.addEventListener('change', event => {\n            if (event.target.checked && event.target === this.allCheckbox) {\n                this.deselectIndividualEvents();\n            } else if (event.target.checked) {\n                this.allCheckbox.checked = false;\n            }\n        });\n    }\n\n    deselectIndividualEvents() {\n        for (const checkbox of this.checkboxes) {\n            if (checkbox !== this.allCheckbox) {\n                checkbox.checked = false;\n            }\n        }\n    }\n\n}\n", "import {Component} from './component';\n\nexport class WysiwygEditor extends Component {\n\n    setup() {\n        this.elem = this.$el;\n        this.editContainer = this.$refs.editContainer;\n        this.input = this.$refs.input;\n\n        /** @var {SimpleWysiwygEditorInterface|null} */\n        this.editor = null;\n\n        const translations = {\n            ...window.editor_translations,\n            imageUploadErrorText: this.$opts.imageUploadErrorText,\n            serverUploadLimitText: this.$opts.serverUploadLimitText,\n        };\n\n        window.importVersioned('wysiwyg').then(wysiwyg => {\n            const editorContent = this.input.value;\n            this.editor = wysiwyg.createPageEditorInstance(this.editContainer, editorContent, {\n                drawioUrl: this.getDrawIoUrl(),\n                pageId: Number(this.$opts.pageId),\n                darkMode: document.documentElement.classList.contains('dark-mode'),\n                textDirection: this.$opts.textDirection,\n                translations,\n            });\n        });\n\n        let handlingFormSubmit = false;\n        this.input.form.addEventListener('submit', event => {\n            if (!this.editor) {\n                return;\n            }\n\n            if (!handlingFormSubmit) {\n                event.preventDefault();\n                handlingFormSubmit = true;\n                this.editor.getContentAsHtml().then(html => {\n                    this.input.value = html;\n                    this.input.form.submit();\n                });\n            } else {\n                handlingFormSubmit = false;\n            }\n        });\n    }\n\n    getDrawIoUrl() {\n        const drawioUrlElem = document.querySelector('[drawio-url]');\n        if (drawioUrlElem) {\n            return drawioUrlElem.getAttribute('drawio-url');\n        }\n        return '';\n    }\n\n    /**\n     * Get the content of this editor.\n     * Used by the parent page editor component.\n     * @return {Promise<{html: String}>}\n     */\n    async getContent() {\n        return {\n            html: await this.editor.getContentAsHtml(),\n        };\n    }\n\n}\n", "import {buildForEditor as buildEditorConfig} from '../wysiwyg-tinymce/config';\nimport {Component} from './component';\n\nexport class WysiwygEditorTinymce extends Component {\n\n    setup() {\n        this.elem = this.$el;\n\n        this.tinyMceConfig = buildEditorConfig({\n            language: this.$opts.language,\n            containerElement: this.elem,\n            darkMode: document.documentElement.classList.contains('dark-mode'),\n            textDirection: this.$opts.textDirection,\n            drawioUrl: this.getDrawIoUrl(),\n            pageId: Number(this.$opts.pageId),\n            translations: {\n                imageUploadErrorText: this.$opts.imageUploadErrorText,\n                serverUploadLimitText: this.$opts.serverUploadLimitText,\n            },\n            translationMap: window.editor_translations,\n        });\n\n        window.$events.emitPublic(this.elem, 'editor-tinymce::pre-init', {config: this.tinyMceConfig});\n        window.tinymce.init(this.tinyMceConfig).then(editors => {\n            this.editor = editors[0];\n        });\n    }\n\n    getDrawIoUrl() {\n        const drawioUrlElem = document.querySelector('[drawio-url]');\n        if (drawioUrlElem) {\n            return drawioUrlElem.getAttribute('drawio-url');\n        }\n        return '';\n    }\n\n    /**\n     * Get the content of this editor.\n     * Used by the parent page editor component.\n     * @return {Promise<{html: String}>}\n     */\n    async getContent() {\n        return {\n            html: this.editor.getContent(),\n        };\n    }\n\n}\n", "import {Component} from './component';\nimport {buildForInput} from '../wysiwyg-tinymce/config';\n\nexport class WysiwygInput extends Component {\n\n    setup() {\n        this.elem = this.$el;\n\n        const config = buildForInput({\n            language: this.$opts.language,\n            containerElement: this.elem,\n            darkMode: document.documentElement.classList.contains('dark-mode'),\n            textDirection: this.$opts.textDirection,\n            translations: {},\n            translationMap: window.editor_translations,\n        });\n\n        window.tinymce.init(config).then(editors => {\n            this.editor = editors[0];\n        });\n    }\n\n}\n", "/**\n * Convert a kebab-case string to camelCase\n */\nexport function kebabToCamel(kebab: string): string {\n    const ucFirst = (word: string) => word.slice(0, 1).toUpperCase() + word.slice(1);\n    const words = kebab.split('-');\n    return words[0] + words.slice(1).map(ucFirst).join('');\n}\n\n/**\n * Convert a camelCase string to a kebab-case string.\n */\nexport function camelToKebab(camelStr: string): string {\n    return camelStr.replace(/[A-Z]/g, (str, offset) => (offset > 0 ? '-' : '') + str.toLowerCase());\n}\n", "import {kebabToCamel, camelToKebab} from './text';\nimport {Component} from \"../components/component\";\n\n/**\n * Parse out the element references within the given element\n * for the given component name.\n */\nfunction parseRefs(name: string, element: HTMLElement):\n    {refs: Record<string, HTMLElement>, manyRefs: Record<string, HTMLElement[]>} {\n    const refs: Record<string, HTMLElement> = {};\n    const manyRefs: Record<string, HTMLElement[]> = {};\n\n    const prefix = `${name}@`;\n    const selector = `[refs*=\"${prefix}\"]`;\n    const refElems = [...element.querySelectorAll(selector)];\n    if (element.matches(selector)) {\n        refElems.push(element);\n    }\n\n    for (const el of refElems as HTMLElement[]) {\n        const refNames = (el.getAttribute('refs') || '')\n            .split(' ')\n            .filter(str => str.startsWith(prefix))\n            .map(str => str.replace(prefix, ''))\n            .map(kebabToCamel);\n        for (const ref of refNames) {\n            refs[ref] = el;\n            if (typeof manyRefs[ref] === 'undefined') {\n                manyRefs[ref] = [];\n            }\n            manyRefs[ref].push(el);\n        }\n    }\n    return {refs, manyRefs};\n}\n\n/**\n * Parse out the element component options.\n */\nfunction parseOpts(componentName: string, element: HTMLElement): Record<string, string> {\n    const opts: Record<string, string> = {};\n    const prefix = `option:${componentName}:`;\n    for (const {name, value} of element.attributes) {\n        if (name.startsWith(prefix)) {\n            const optName = name.replace(prefix, '');\n            opts[kebabToCamel(optName)] = value || '';\n        }\n    }\n    return opts;\n}\n\nexport class ComponentStore {\n    /**\n     * A mapping of active components keyed by name, with values being arrays of component\n     * instances since there can be multiple components of the same type.\n     */\n    protected components: Record<string, Component[]> = {};\n\n    /**\n     * A mapping of component class models, keyed by name.\n     */\n    protected componentModelMap: Record<string, typeof Component> = {};\n\n    /**\n     * A mapping of active component maps, keyed by the element components are assigned to.\n     */\n    protected elementComponentMap: WeakMap<HTMLElement, Record<string, Component>> = new WeakMap();\n\n    /**\n     * Initialize a component instance on the given dom element.\n     */\n     protected initComponent(name: string, element: HTMLElement): void {\n        const ComponentModel = this.componentModelMap[name];\n        if (ComponentModel === undefined) return;\n\n        // Create our component instance\n        let instance: Component|null = null;\n        try {\n            instance = new ComponentModel();\n            instance.$name = name;\n            instance.$el = element;\n            const allRefs = parseRefs(name, element);\n            instance.$refs = allRefs.refs;\n            instance.$manyRefs = allRefs.manyRefs;\n            instance.$opts = parseOpts(name, element);\n            instance.setup();\n        } catch (e) {\n            console.error('Failed to create component', e, name, element);\n        }\n\n        if (!instance) {\n            return;\n        }\n\n        // Add to global listing\n        if (typeof this.components[name] === 'undefined') {\n            this.components[name] = [];\n        }\n        this.components[name].push(instance);\n\n        // Add to element mapping\n        const elComponents = this.elementComponentMap.get(element) || {};\n        elComponents[name] = instance;\n        this.elementComponentMap.set(element, elComponents);\n    }\n\n    /**\n     * Initialize all components found within the given element.\n     */\n    public init(parentElement: Document|HTMLElement = document) {\n        const componentElems = parentElement.querySelectorAll('[component],[components]');\n\n        for (const el of componentElems) {\n            const componentNames = `${el.getAttribute('component') || ''} ${(el.getAttribute('components'))}`.toLowerCase().split(' ').filter(Boolean);\n            for (const name of componentNames) {\n                this.initComponent(name, el as HTMLElement);\n            }\n        }\n    }\n\n    /**\n     * Register the given component mapping into the component system.\n     * @param {Object<String, ObjectConstructor<Component>>} mapping\n     */\n    public register(mapping: Record<string, typeof Component>) {\n        const keys = Object.keys(mapping);\n        for (const key of keys) {\n            this.componentModelMap[camelToKebab(key)] = mapping[key];\n        }\n    }\n\n    /**\n     * Get the first component of the given name.\n     */\n    public first(name: string): Component|null {\n        return (this.components[name] || [null])[0];\n    }\n\n    /**\n     * Get all the components of the given name.\n     */\n    public get(name: string): Component[] {\n        return this.components[name] || [];\n    }\n\n    /**\n     * Get the first component, of the given name, that's assigned to the given element.\n     */\n    public firstOnElement(element: HTMLElement, name: string): Component|null {\n        const elComponents = this.elementComponentMap.get(element) || {};\n        return elComponents[name] || null;\n    }\n}\n", "import {EventManager} from './services/events';\nimport {HttpManager} from './services/http';\nimport {Translator} from './services/translations';\nimport * as componentMap from './components/index';\nimport {ComponentStore} from './services/components';\nimport {baseUrl, importVersioned} from \"./services/util\";\n\n// eslint-disable-next-line no-underscore-dangle\nwindow.__DEV__ = false;\n\n// Make common important util functions global\nwindow.baseUrl = baseUrl;\nwindow.importVersioned = importVersioned;\n\n// Setup events, http & translation services\nwindow.$http = new HttpManager();\nwindow.$events = new EventManager();\nwindow.$trans = new Translator();\n\n// Load & initialise components\nwindow.$components = new ComponentStore();\nwindow.$components.register(componentMap);\nwindow.$components.init();\n"],
  "mappings": "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",
  "names": ["options", "el", "wrap", "clone", "elem", "elem", "newIndex", "el", "obj", "el", "options", "index", "elem", "ghostEl", "option", "defaults", "rootEl", "cloneEl", "oldIndex", "newIndex", "oldDraggableIndex", "newDraggableIndex", "putSortable", "pluginEvent", "_detectDirection", "_dragElInRowColumn", "_detectNearestEmptySortable", "_prepareGroup", "dragEl", "_hideGhostForTarget", "_unhideGhostForTarget", "nearestEmptyInsertDetectEvent", "_checkOutsideTargetEl", "dragStartFn", "target", "after", "plugins", "dragStarted", "drop", "autoScroll", "onSpill", "dragEl", "clone", "rootEl", "dragStarted", "dragOver", "parentEl", "putSortable", "options", "drop", "oldIndex", "el", "index", "newIndex", "elem", "index", "sort", "elem", "show", "upload", "option", "options", "el", "el", "formats", "options", "dragStart", "drop", "options", "elem", "register", "el", "register", "getPlugin", "register", "getPlugin", "register", "getPlugin", "register", "getPlugin", "el", "register", "getPlugin", "register", "elem", "getPlugin", "register", "el", "getPlugin", "options", "plugins", "getPlugin", "el", "version", "show", "elem", "elem", "show", "show", "index", "newIndex", "show", "elem", "el", "dragEl", "el"]
}
